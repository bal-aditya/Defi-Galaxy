var l0=Object.defineProperty;var u0=(r,e,t)=>e in r?l0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Et=(r,e,t)=>(u0(r,typeof e!="symbol"?e+"":e,t),t);import{g as Xn,c as bn,a as us,r as fe,R as el}from"./vendor-032311f1.js";var le={},To={};To.byteLength=h0;To.toByteArray=g0;To.fromByteArray=w0;var kn=[],un=[],d0=typeof Uint8Array<"u"?Uint8Array:Array,Ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $r=0,f0=Ia.length;$r<f0;++$r)kn[$r]=Ia[$r],un[Ia.charCodeAt($r)]=$r;un["-".charCodeAt(0)]=62;un["_".charCodeAt(0)]=63;function nd(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function h0(r){var e=nd(r),t=e[0],n=e[1];return(t+n)*3/4-n}function p0(r,e,t){return(e+t)*3/4-t}function g0(r){var e,t=nd(r),n=t[0],s=t[1],i=new d0(p0(r,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=un[r.charCodeAt(c)]<<18|un[r.charCodeAt(c+1)]<<12|un[r.charCodeAt(c+2)]<<6|un[r.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=un[r.charCodeAt(c)]<<2|un[r.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=un[r.charCodeAt(c)]<<10|un[r.charCodeAt(c+1)]<<4|un[r.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function y0(r){return kn[r>>18&63]+kn[r>>12&63]+kn[r>>6&63]+kn[r&63]}function m0(r,e,t){for(var n,s=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(y0(n));return s.join("")}function w0(r){for(var e,t=r.length,n=t%3,s=[],i=16383,o=0,a=t-n;o<a;o+=i)s.push(m0(r,o,o+i>a?a:o+i));return n===1?(e=r[t-1],s.push(kn[e>>2]+kn[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(kn[e>>10]+kn[e>>4&63]+kn[e<<2&63]+"=")),s.join("")}var tl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */tl.read=function(r,e,t,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,p=c>>1,g=-7,b=t?s-1:0,I=t?-1:1,m=r[e+b];for(b+=I,i=m&(1<<-g)-1,m>>=-g,g+=a;g>0;i=i*256+r[e+b],b+=I,g-=8);for(o=i&(1<<-g)-1,i>>=-g,g+=n;g>0;o=o*256+r[e+b],b+=I,g-=8);if(i===0)i=1-p;else{if(i===c)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-p}return(m?-1:1)*o*Math.pow(2,i-n)};tl.write=function(r,e,t,n,s,i){var o,a,c,p=i*8-s-1,g=(1<<p)-1,b=g>>1,I=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:i-1,R=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=g):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+b>=1?e+=I/c:e+=I*Math.pow(2,1-b),e*c>=2&&(o++,c/=2),o+b>=g?(a=0,o=g):o+b>=1?(a=(e*c-1)*Math.pow(2,s),o=o+b):(a=e*Math.pow(2,b-1)*Math.pow(2,s),o=0));s>=8;r[t+m]=a&255,m+=R,a/=256,s-=8);for(o=o<<s|a,p+=s;p>0;r[t+m]=o&255,m+=R,o/=256,p-=8);r[t+m-R]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=To,t=tl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=C,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const w=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(w,u),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(w){if(w>s)throw new RangeError('The value "'+w+'" is invalid for option "size"');const u=new Uint8Array(w);return Object.setPrototypeOf(u,a.prototype),u}function a(w,u,d){if(typeof w=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(w)}return c(w,u,d)}a.poolSize=8192;function c(w,u,d){if(typeof w=="string")return I(w,u);if(ArrayBuffer.isView(w))return R(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(en(w,ArrayBuffer)||w&&en(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(en(w,SharedArrayBuffer)||w&&en(w.buffer,SharedArrayBuffer)))return x(w,u,d);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=w.valueOf&&w.valueOf();if(A!=null&&A!==w)return a.from(A,u,d);const O=k(w);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),u,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,u,d){return c(w,u,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function p(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function g(w,u,d){return p(w),w<=0?o(w):u!==void 0?typeof d=="string"?o(w).fill(u,d):o(w).fill(u):o(w)}a.alloc=function(w,u,d){return g(w,u,d)};function b(w){return p(w),o(w<0?0:M(w)|0)}a.allocUnsafe=function(w){return b(w)},a.allocUnsafeSlow=function(w){return b(w)};function I(w,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const d=L(w,u)|0;let A=o(d);const O=A.write(w,u);return O!==d&&(A=A.slice(0,O)),A}function m(w){const u=w.length<0?0:M(w.length)|0,d=o(u);for(let A=0;A<u;A+=1)d[A]=w[A]&255;return d}function R(w){if(en(w,Uint8Array)){const u=new Uint8Array(w);return x(u.buffer,u.byteOffset,u.byteLength)}return m(w)}function x(w,u,d){if(u<0||w.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<u+(d||0))throw new RangeError('"length" is outside of buffer bounds');let A;return u===void 0&&d===void 0?A=new Uint8Array(w):d===void 0?A=new Uint8Array(w,u):A=new Uint8Array(w,u,d),Object.setPrototypeOf(A,a.prototype),A}function k(w){if(a.isBuffer(w)){const u=M(w.length)|0,d=o(u);return d.length===0||w.copy(d,0,0,u),d}if(w.length!==void 0)return typeof w.length!="number"||qe(w.length)?o(0):m(w);if(w.type==="Buffer"&&Array.isArray(w.data))return m(w.data)}function M(w){if(w>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return w|0}function C(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},a.compare=function(u,d){if(en(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),en(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(u)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===d)return 0;let A=u.length,O=d.length;for(let F=0,j=Math.min(A,O);F<j;++F)if(u[F]!==d[F]){A=u[F],O=d[F];break}return A<O?-1:O<A?1:0},a.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(u,d){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let A;if(d===void 0)for(d=0,A=0;A<u.length;++A)d+=u[A].length;const O=a.allocUnsafe(d);let F=0;for(A=0;A<u.length;++A){let j=u[A];if(en(j,Uint8Array))F+j.length>O.length?(a.isBuffer(j)||(j=a.from(j)),j.copy(O,F)):Uint8Array.prototype.set.call(O,j,F);else if(a.isBuffer(j))j.copy(O,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=j.length}return O};function L(w,u){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||en(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const d=w.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&d===0)return 0;let O=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return $e(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return je(w).length;default:if(O)return A?-1:$e(w).length;u=(""+u).toLowerCase(),O=!0}}a.byteLength=L;function U(w,u,d){let A=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,u>>>=0,d<=u))return"";for(w||(w="utf8");;)switch(w){case"hex":return T(this,u,d);case"utf8":case"utf-8":return l(this,u,d);case"ascii":return S(this,u,d);case"latin1":case"binary":return _(this,u,d);case"base64":return v(this,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,u,d);default:if(A)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),A=!0}}a.prototype._isBuffer=!0;function P(w,u,d){const A=w[u];w[u]=w[d],w[d]=A}a.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<u;d+=2)P(this,d,d+1);return this},a.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<u;d+=4)P(this,d,d+3),P(this,d+1,d+2);return this},a.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<u;d+=8)P(this,d,d+7),P(this,d+1,d+6),P(this,d+2,d+5),P(this,d+3,d+4);return this},a.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?l(this,0,u):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:a.compare(this,u)===0},a.prototype.inspect=function(){let u="";const d=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(u+=" ... "),"<Buffer "+u+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(u,d,A,O,F){if(en(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(d===void 0&&(d=0),A===void 0&&(A=u?u.length:0),O===void 0&&(O=0),F===void 0&&(F=this.length),d<0||A>u.length||O<0||F>this.length)throw new RangeError("out of range index");if(O>=F&&d>=A)return 0;if(O>=F)return-1;if(d>=A)return 1;if(d>>>=0,A>>>=0,O>>>=0,F>>>=0,this===u)return 0;let j=F-O,me=A-d;const ye=Math.min(j,me),pe=this.slice(O,F),De=u.slice(d,A);for(let he=0;he<ye;++he)if(pe[he]!==De[he]){j=pe[he],me=De[he];break}return j<me?-1:me<j?1:0};function K(w,u,d,A,O){if(w.length===0)return-1;if(typeof d=="string"?(A=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,qe(d)&&(d=O?0:w.length-1),d<0&&(d=w.length+d),d>=w.length){if(O)return-1;d=w.length-1}else if(d<0)if(O)d=0;else return-1;if(typeof u=="string"&&(u=a.from(u,A)),a.isBuffer(u))return u.length===0?-1:H(w,u,d,A,O);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(w,u,d):Uint8Array.prototype.lastIndexOf.call(w,u,d):H(w,[u],d,A,O);throw new TypeError("val must be string, number or Buffer")}function H(w,u,d,A,O){let F=1,j=w.length,me=u.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(w.length<2||u.length<2)return-1;F=2,j/=2,me/=2,d/=2}function ye(De,he){return F===1?De[he]:De.readUInt16BE(he*F)}let pe;if(O){let De=-1;for(pe=d;pe<j;pe++)if(ye(w,pe)===ye(u,De===-1?0:pe-De)){if(De===-1&&(De=pe),pe-De+1===me)return De*F}else De!==-1&&(pe-=pe-De),De=-1}else for(d+me>j&&(d=j-me),pe=d;pe>=0;pe--){let De=!0;for(let he=0;he<me;he++)if(ye(w,pe+he)!==ye(u,he)){De=!1;break}if(De)return pe}return-1}a.prototype.includes=function(u,d,A){return this.indexOf(u,d,A)!==-1},a.prototype.indexOf=function(u,d,A){return K(this,u,d,A,!0)},a.prototype.lastIndexOf=function(u,d,A){return K(this,u,d,A,!1)};function G(w,u,d,A){d=Number(d)||0;const O=w.length-d;A?(A=Number(A),A>O&&(A=O)):A=O;const F=u.length;A>F/2&&(A=F/2);let j;for(j=0;j<A;++j){const me=parseInt(u.substr(j*2,2),16);if(qe(me))return j;w[d+j]=me}return j}function z(w,u,d,A){return Fe($e(u,w.length-d),w,d,A)}function Y(w,u,d,A){return Fe(Je(u),w,d,A)}function q(w,u,d,A){return Fe(je(u),w,d,A)}function V(w,u,d,A){return Fe(bs(u,w.length-d),w,d,A)}a.prototype.write=function(u,d,A,O){if(d===void 0)O="utf8",A=this.length,d=0;else if(A===void 0&&typeof d=="string")O=d,A=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(A)?(A=A>>>0,O===void 0&&(O="utf8")):(O=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const F=this.length-d;if((A===void 0||A>F)&&(A=F),u.length>0&&(A<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let j=!1;for(;;)switch(O){case"hex":return G(this,u,d,A);case"utf8":case"utf-8":return z(this,u,d,A);case"ascii":case"latin1":case"binary":return Y(this,u,d,A);case"base64":return q(this,u,d,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,u,d,A);default:if(j)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),j=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(w,u,d){return u===0&&d===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(u,d))}function l(w,u,d){d=Math.min(w.length,d);const A=[];let O=u;for(;O<d;){const F=w[O];let j=null,me=F>239?4:F>223?3:F>191?2:1;if(O+me<=d){let ye,pe,De,he;switch(me){case 1:F<128&&(j=F);break;case 2:ye=w[O+1],(ye&192)===128&&(he=(F&31)<<6|ye&63,he>127&&(j=he));break;case 3:ye=w[O+1],pe=w[O+2],(ye&192)===128&&(pe&192)===128&&(he=(F&15)<<12|(ye&63)<<6|pe&63,he>2047&&(he<55296||he>57343)&&(j=he));break;case 4:ye=w[O+1],pe=w[O+2],De=w[O+3],(ye&192)===128&&(pe&192)===128&&(De&192)===128&&(he=(F&15)<<18|(ye&63)<<12|(pe&63)<<6|De&63,he>65535&&he<1114112&&(j=he))}}j===null?(j=65533,me=1):j>65535&&(j-=65536,A.push(j>>>10&1023|55296),j=56320|j&1023),A.push(j),O+=me}return y(A)}const h=4096;function y(w){const u=w.length;if(u<=h)return String.fromCharCode.apply(String,w);let d="",A=0;for(;A<u;)d+=String.fromCharCode.apply(String,w.slice(A,A+=h));return d}function S(w,u,d){let A="";d=Math.min(w.length,d);for(let O=u;O<d;++O)A+=String.fromCharCode(w[O]&127);return A}function _(w,u,d){let A="";d=Math.min(w.length,d);for(let O=u;O<d;++O)A+=String.fromCharCode(w[O]);return A}function T(w,u,d){const A=w.length;(!u||u<0)&&(u=0),(!d||d<0||d>A)&&(d=A);let O="";for(let F=u;F<d;++F)O+=Xe[w[F]];return O}function N(w,u,d){const A=w.slice(u,d);let O="";for(let F=0;F<A.length-1;F+=2)O+=String.fromCharCode(A[F]+A[F+1]*256);return O}a.prototype.slice=function(u,d){const A=this.length;u=~~u,d=d===void 0?A:~~d,u<0?(u+=A,u<0&&(u=0)):u>A&&(u=A),d<0?(d+=A,d<0&&(d=0)):d>A&&(d=A),d<u&&(d=u);const O=this.subarray(u,d);return Object.setPrototypeOf(O,a.prototype),O};function E(w,u,d){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+u>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(u,d,A){u=u>>>0,d=d>>>0,A||E(u,d,this.length);let O=this[u],F=1,j=0;for(;++j<d&&(F*=256);)O+=this[u+j]*F;return O},a.prototype.readUintBE=a.prototype.readUIntBE=function(u,d,A){u=u>>>0,d=d>>>0,A||E(u,d,this.length);let O=this[u+--d],F=1;for(;d>0&&(F*=256);)O+=this[u+--d]*F;return O},a.prototype.readUint8=a.prototype.readUInt8=function(u,d){return u=u>>>0,d||E(u,1,this.length),this[u]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(u,d){return u=u>>>0,d||E(u,2,this.length),this[u]|this[u+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(u,d){return u=u>>>0,d||E(u,2,this.length),this[u]<<8|this[u+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(u,d){return u=u>>>0,d||E(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(u,d){return u=u>>>0,d||E(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},a.prototype.readBigUInt64LE=pn(function(u){u=u>>>0,zn(u,"offset");const d=this[u],A=this[u+7];(d===void 0||A===void 0)&&Oe(u,this.length-8);const O=d+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,F=this[++u]+this[++u]*2**8+this[++u]*2**16+A*2**24;return BigInt(O)+(BigInt(F)<<BigInt(32))}),a.prototype.readBigUInt64BE=pn(function(u){u=u>>>0,zn(u,"offset");const d=this[u],A=this[u+7];(d===void 0||A===void 0)&&Oe(u,this.length-8);const O=d*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],F=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+A;return(BigInt(O)<<BigInt(32))+BigInt(F)}),a.prototype.readIntLE=function(u,d,A){u=u>>>0,d=d>>>0,A||E(u,d,this.length);let O=this[u],F=1,j=0;for(;++j<d&&(F*=256);)O+=this[u+j]*F;return F*=128,O>=F&&(O-=Math.pow(2,8*d)),O},a.prototype.readIntBE=function(u,d,A){u=u>>>0,d=d>>>0,A||E(u,d,this.length);let O=d,F=1,j=this[u+--O];for(;O>0&&(F*=256);)j+=this[u+--O]*F;return F*=128,j>=F&&(j-=Math.pow(2,8*d)),j},a.prototype.readInt8=function(u,d){return u=u>>>0,d||E(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},a.prototype.readInt16LE=function(u,d){u=u>>>0,d||E(u,2,this.length);const A=this[u]|this[u+1]<<8;return A&32768?A|4294901760:A},a.prototype.readInt16BE=function(u,d){u=u>>>0,d||E(u,2,this.length);const A=this[u+1]|this[u]<<8;return A&32768?A|4294901760:A},a.prototype.readInt32LE=function(u,d){return u=u>>>0,d||E(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},a.prototype.readInt32BE=function(u,d){return u=u>>>0,d||E(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},a.prototype.readBigInt64LE=pn(function(u){u=u>>>0,zn(u,"offset");const d=this[u],A=this[u+7];(d===void 0||A===void 0)&&Oe(u,this.length-8);const O=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(A<<24);return(BigInt(O)<<BigInt(32))+BigInt(d+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),a.prototype.readBigInt64BE=pn(function(u){u=u>>>0,zn(u,"offset");const d=this[u],A=this[u+7];(d===void 0||A===void 0)&&Oe(u,this.length-8);const O=(d<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(O)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+A)}),a.prototype.readFloatLE=function(u,d){return u=u>>>0,d||E(u,4,this.length),t.read(this,u,!0,23,4)},a.prototype.readFloatBE=function(u,d){return u=u>>>0,d||E(u,4,this.length),t.read(this,u,!1,23,4)},a.prototype.readDoubleLE=function(u,d){return u=u>>>0,d||E(u,8,this.length),t.read(this,u,!0,52,8)},a.prototype.readDoubleBE=function(u,d){return u=u>>>0,d||E(u,8,this.length),t.read(this,u,!1,52,8)};function f(w,u,d,A,O,F){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>O||u<F)throw new RangeError('"value" argument is out of bounds');if(d+A>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(u,d,A,O){if(u=+u,d=d>>>0,A=A>>>0,!O){const me=Math.pow(2,8*A)-1;f(this,u,d,A,me,0)}let F=1,j=0;for(this[d]=u&255;++j<A&&(F*=256);)this[d+j]=u/F&255;return d+A},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(u,d,A,O){if(u=+u,d=d>>>0,A=A>>>0,!O){const me=Math.pow(2,8*A)-1;f(this,u,d,A,me,0)}let F=A-1,j=1;for(this[d+F]=u&255;--F>=0&&(j*=256);)this[d+F]=u/j&255;return d+A},a.prototype.writeUint8=a.prototype.writeUInt8=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,1,255,0),this[d]=u&255,d+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,2,65535,0),this[d]=u&255,this[d+1]=u>>>8,d+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,2,65535,0),this[d]=u>>>8,this[d+1]=u&255,d+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,4,4294967295,0),this[d+3]=u>>>24,this[d+2]=u>>>16,this[d+1]=u>>>8,this[d]=u&255,d+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,4,4294967295,0),this[d]=u>>>24,this[d+1]=u>>>16,this[d+2]=u>>>8,this[d+3]=u&255,d+4};function B(w,u,d,A,O){He(u,A,O,w,d,7);let F=Number(u&BigInt(4294967295));w[d++]=F,F=F>>8,w[d++]=F,F=F>>8,w[d++]=F,F=F>>8,w[d++]=F;let j=Number(u>>BigInt(32)&BigInt(4294967295));return w[d++]=j,j=j>>8,w[d++]=j,j=j>>8,w[d++]=j,j=j>>8,w[d++]=j,d}function re(w,u,d,A,O){He(u,A,O,w,d,7);let F=Number(u&BigInt(4294967295));w[d+7]=F,F=F>>8,w[d+6]=F,F=F>>8,w[d+5]=F,F=F>>8,w[d+4]=F;let j=Number(u>>BigInt(32)&BigInt(4294967295));return w[d+3]=j,j=j>>8,w[d+2]=j,j=j>>8,w[d+1]=j,j=j>>8,w[d]=j,d+8}a.prototype.writeBigUInt64LE=pn(function(u,d=0){return B(this,u,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=pn(function(u,d=0){return re(this,u,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(u,d,A,O){if(u=+u,d=d>>>0,!O){const ye=Math.pow(2,8*A-1);f(this,u,d,A,ye-1,-ye)}let F=0,j=1,me=0;for(this[d]=u&255;++F<A&&(j*=256);)u<0&&me===0&&this[d+F-1]!==0&&(me=1),this[d+F]=(u/j>>0)-me&255;return d+A},a.prototype.writeIntBE=function(u,d,A,O){if(u=+u,d=d>>>0,!O){const ye=Math.pow(2,8*A-1);f(this,u,d,A,ye-1,-ye)}let F=A-1,j=1,me=0;for(this[d+F]=u&255;--F>=0&&(j*=256);)u<0&&me===0&&this[d+F+1]!==0&&(me=1),this[d+F]=(u/j>>0)-me&255;return d+A},a.prototype.writeInt8=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,1,127,-128),u<0&&(u=255+u+1),this[d]=u&255,d+1},a.prototype.writeInt16LE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,2,32767,-32768),this[d]=u&255,this[d+1]=u>>>8,d+2},a.prototype.writeInt16BE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,2,32767,-32768),this[d]=u>>>8,this[d+1]=u&255,d+2},a.prototype.writeInt32LE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,4,2147483647,-2147483648),this[d]=u&255,this[d+1]=u>>>8,this[d+2]=u>>>16,this[d+3]=u>>>24,d+4},a.prototype.writeInt32BE=function(u,d,A){return u=+u,d=d>>>0,A||f(this,u,d,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[d]=u>>>24,this[d+1]=u>>>16,this[d+2]=u>>>8,this[d+3]=u&255,d+4},a.prototype.writeBigInt64LE=pn(function(u,d=0){return B(this,u,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=pn(function(u,d=0){return re(this,u,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(w,u,d,A,O,F){if(d+A>w.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function ie(w,u,d,A,O){return u=+u,d=d>>>0,O||ee(w,u,d,4),t.write(w,u,d,A,23,4),d+4}a.prototype.writeFloatLE=function(u,d,A){return ie(this,u,d,!0,A)},a.prototype.writeFloatBE=function(u,d,A){return ie(this,u,d,!1,A)};function ze(w,u,d,A,O){return u=+u,d=d>>>0,O||ee(w,u,d,8),t.write(w,u,d,A,52,8),d+8}a.prototype.writeDoubleLE=function(u,d,A){return ze(this,u,d,!0,A)},a.prototype.writeDoubleBE=function(u,d,A){return ze(this,u,d,!1,A)},a.prototype.copy=function(u,d,A,O){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(A||(A=0),!O&&O!==0&&(O=this.length),d>=u.length&&(d=u.length),d||(d=0),O>0&&O<A&&(O=A),O===A||u.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),u.length-d<O-A&&(O=u.length-d+A);const F=O-A;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,A,O):Uint8Array.prototype.set.call(u,this.subarray(A,O),d),F},a.prototype.fill=function(u,d,A,O){if(typeof u=="string"){if(typeof d=="string"?(O=d,d=0,A=this.length):typeof A=="string"&&(O=A,A=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!a.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(u.length===1){const j=u.charCodeAt(0);(O==="utf8"&&j<128||O==="latin1")&&(u=j)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(d<0||this.length<d||this.length<A)throw new RangeError("Out of range index");if(A<=d)return this;d=d>>>0,A=A===void 0?this.length:A>>>0,u||(u=0);let F;if(typeof u=="number")for(F=d;F<A;++F)this[F]=u;else{const j=a.isBuffer(u)?u:a.from(u,O),me=j.length;if(me===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(F=0;F<A-d;++F)this[F+d]=j[F%me]}return this};const ve={};function _e(w,u,d){ve[w]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(w,u){return`The "${w}" argument must be of type number. Received type ${typeof u}`},TypeError),_e("ERR_OUT_OF_RANGE",function(w,u,d){let A=`The value of "${w}" is out of range.`,O=d;return Number.isInteger(d)&&Math.abs(d)>2**32?O=Un(String(d)):typeof d=="bigint"&&(O=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(O=Un(O)),O+="n"),A+=` It must be ${u}. Received ${O}`,A},RangeError);function Un(w){let u="",d=w.length;const A=w[0]==="-"?1:0;for(;d>=A+4;d-=3)u=`_${w.slice(d-3,d)}${u}`;return`${w.slice(0,d)}${u}`}function Te(w,u,d){zn(u,"offset"),(w[u]===void 0||w[u+d]===void 0)&&Oe(u,w.length-(d+1))}function He(w,u,d,A,O,F){if(w>d||w<u){const j=typeof u=="bigint"?"n":"";let me;throw F>3?u===0||u===BigInt(0)?me=`>= 0${j} and < 2${j} ** ${(F+1)*8}${j}`:me=`>= -(2${j} ** ${(F+1)*8-1}${j}) and < 2 ** ${(F+1)*8-1}${j}`:me=`>= ${u}${j} and <= ${d}${j}`,new ve.ERR_OUT_OF_RANGE("value",me,w)}Te(A,O,F)}function zn(w,u){if(typeof w!="number")throw new ve.ERR_INVALID_ARG_TYPE(u,"number",w)}function Oe(w,u,d){throw Math.floor(w)!==w?(zn(w,d),new ve.ERR_OUT_OF_RANGE(d||"offset","an integer",w)):u<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(d||"offset",`>= ${d?1:0} and <= ${u}`,w)}const Ze=/[^+/0-9A-Za-z-_]/g;function ws(w){if(w=w.split("=")[0],w=w.trim().replace(Ze,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function $e(w,u){u=u||1/0;let d;const A=w.length;let O=null;const F=[];for(let j=0;j<A;++j){if(d=w.charCodeAt(j),d>55295&&d<57344){if(!O){if(d>56319){(u-=3)>-1&&F.push(239,191,189);continue}else if(j+1===A){(u-=3)>-1&&F.push(239,191,189);continue}O=d;continue}if(d<56320){(u-=3)>-1&&F.push(239,191,189),O=d;continue}d=(O-55296<<10|d-56320)+65536}else O&&(u-=3)>-1&&F.push(239,191,189);if(O=null,d<128){if((u-=1)<0)break;F.push(d)}else if(d<2048){if((u-=2)<0)break;F.push(d>>6|192,d&63|128)}else if(d<65536){if((u-=3)<0)break;F.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((u-=4)<0)break;F.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return F}function Je(w){const u=[];for(let d=0;d<w.length;++d)u.push(w.charCodeAt(d)&255);return u}function bs(w,u){let d,A,O;const F=[];for(let j=0;j<w.length&&!((u-=2)<0);++j)d=w.charCodeAt(j),A=d>>8,O=d%256,F.push(O),F.push(A);return F}function je(w){return e.toByteArray(ws(w))}function Fe(w,u,d,A){let O;for(O=0;O<A&&!(O+d>=u.length||O>=w.length);++O)u[O+d]=w[O];return O}function en(w,u){return w instanceof u||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===u.name}function qe(w){return w!==w}const Xe=function(){const w="0123456789abcdef",u=new Array(256);for(let d=0;d<16;++d){const A=d*16;for(let O=0;O<16;++O)u[A+O]=w[d]+w[O]}return u}();function pn(w){return typeof BigInt>"u"?Qe:w}function Qe(){throw new Error("BigInt not supported")}})(le);const qr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nl(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ns(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function hn(r,...e){if(!nl(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function b0(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ns(r.outputLen),ns(r.blockLen)}function gi(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function rd(r,e){hn(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function v0(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function gr(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function xa(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function En(r,e){return r<<32-e|r>>>e}const S0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function E0(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function _0(r){for(let e=0;e<r.length;e++)r[e]=E0(r[e]);return r}const eu=S0?r=>r:_0,id=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),A0=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function yi(r){if(hn(r),id)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=A0[r[t]];return e}const Fn={_0:48,_9:57,A:65,F:70,a:97,f:102};function tu(r){if(r>=Fn._0&&r<=Fn._9)return r-Fn._0;if(r>=Fn.A&&r<=Fn.F)return r-(Fn.A-10);if(r>=Fn.a&&r<=Fn.f)return r-(Fn.a-10)}function rl(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(id)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=tu(r.charCodeAt(i)),a=tu(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function k0(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Co(r){return typeof r=="string"&&(r=k0(r)),hn(r),r}function Zn(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];hn(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class il{}function sl(r){const e=n=>r().update(Co(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function sd(r=32){if(qr&&typeof qr.getRandomValues=="function")return qr.getRandomValues(new Uint8Array(r));if(qr&&typeof qr.randomBytes=="function")return Uint8Array.from(qr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function I0(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,p=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+p,a,n)}function x0(r,e,t){return r&e^~r&t}function R0(r,e,t){return r&e^r&t^e&t}class od extends il{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=xa(this.buffer)}update(e){gi(this),e=Co(e),hn(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=xa(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gi(this),rd(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,gr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let b=o;b<s;b++)t[b]=0;I0(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=xa(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=c/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)a.setUint32(4*b,g[b],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Qn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ut=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),vs=BigInt(2**32-1),nu=BigInt(32);function B0(r,e=!1){return e?{h:Number(r&vs),l:Number(r>>nu&vs)}:{h:Number(r>>nu&vs)|0,l:Number(r&vs)|0}}function ad(r,e=!1){const t=r.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:a}=B0(r[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const ru=(r,e,t)=>r>>>t,iu=(r,e,t)=>r<<32-t|e>>>t,Hr=(r,e,t)=>r>>>t|e<<32-t,jr=(r,e,t)=>r<<32-t|e>>>t,Ss=(r,e,t)=>r<<64-t|e>>>t-32,Es=(r,e,t)=>r>>>t-32|e<<64-t,M0=(r,e,t)=>r<<t|e>>>32-t,T0=(r,e,t)=>e<<t|r>>>32-t,C0=(r,e,t)=>e<<t-32|r>>>64-t,L0=(r,e,t)=>r<<t-32|e>>>64-t;function Dn(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const P0=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),N0=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,O0=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),W0=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,U0=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),z0=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,F0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),er=new Uint32Array(64);class D0 extends od{constructor(e=32){super(64,e,8,!1),this.A=Qn[0]|0,this.B=Qn[1]|0,this.C=Qn[2]|0,this.D=Qn[3]|0,this.E=Qn[4]|0,this.F=Qn[5]|0,this.G=Qn[6]|0,this.H=Qn[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,n,s,i,o,a,c]}set(e,t,n,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let b=0;b<16;b++,t+=4)er[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const I=er[b-15],m=er[b-2],R=En(I,7)^En(I,18)^I>>>3,x=En(m,17)^En(m,19)^m>>>10;er[b]=x+er[b-7]+R+er[b-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:p,H:g}=this;for(let b=0;b<64;b++){const I=En(a,6)^En(a,11)^En(a,25),m=g+I+x0(a,c,p)+F0[b]+er[b]|0,x=(En(n,2)^En(n,13)^En(n,22))+R0(n,s,i)|0;g=p,p=c,c=a,a=o+m|0,o=i,i=s,s=n,n=m+x|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(n,s,i,o,a,c,p,g)}roundClean(){gr(er)}destroy(){this.set(0,0,0,0,0,0,0,0),gr(this.buffer)}}const cd=(()=>ad(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),K0=(()=>cd[0])(),$0=(()=>cd[1])(),tr=new Uint32Array(80),nr=new Uint32Array(80);class q0 extends od{constructor(e=64){super(128,e,16,!1),this.Ah=Ut[0]|0,this.Al=Ut[1]|0,this.Bh=Ut[2]|0,this.Bl=Ut[3]|0,this.Ch=Ut[4]|0,this.Cl=Ut[5]|0,this.Dh=Ut[6]|0,this.Dl=Ut[7]|0,this.Eh=Ut[8]|0,this.El=Ut[9]|0,this.Fh=Ut[10]|0,this.Fl=Ut[11]|0,this.Gh=Ut[12]|0,this.Gl=Ut[13]|0,this.Hh=Ut[14]|0,this.Hl=Ut[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:p,El:g,Fh:b,Fl:I,Gh:m,Gl:R,Hh:x,Hl:k}=this;return[e,t,n,s,i,o,a,c,p,g,b,I,m,R,x,k]}set(e,t,n,s,i,o,a,c,p,g,b,I,m,R,x,k){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=p|0,this.El=g|0,this.Fh=b|0,this.Fl=I|0,this.Gh=m|0,this.Gl=R|0,this.Hh=x|0,this.Hl=k|0}process(e,t){for(let L=0;L<16;L++,t+=4)tr[L]=e.getUint32(t),nr[L]=e.getUint32(t+=4);for(let L=16;L<80;L++){const U=tr[L-15]|0,P=nr[L-15]|0,K=Hr(U,P,1)^Hr(U,P,8)^ru(U,P,7),H=jr(U,P,1)^jr(U,P,8)^iu(U,P,7),G=tr[L-2]|0,z=nr[L-2]|0,Y=Hr(G,z,19)^Ss(G,z,61)^ru(G,z,6),q=jr(G,z,19)^Es(G,z,61)^iu(G,z,6),V=O0(H,q,nr[L-7],nr[L-16]),v=W0(V,K,Y,tr[L-7],tr[L-16]);tr[L]=v|0,nr[L]=V|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:p,Dl:g,Eh:b,El:I,Fh:m,Fl:R,Gh:x,Gl:k,Hh:M,Hl:C}=this;for(let L=0;L<80;L++){const U=Hr(b,I,14)^Hr(b,I,18)^Ss(b,I,41),P=jr(b,I,14)^jr(b,I,18)^Es(b,I,41),K=b&m^~b&x,H=I&R^~I&k,G=U0(C,P,H,$0[L],nr[L]),z=z0(G,M,U,K,K0[L],tr[L]),Y=G|0,q=Hr(n,s,28)^Ss(n,s,34)^Ss(n,s,39),V=jr(n,s,28)^Es(n,s,34)^Es(n,s,39),v=n&i^n&a^i&a,l=s&o^s&c^o&c;M=x|0,C=k|0,x=m|0,k=R|0,m=b|0,R=I|0,{h:b,l:I}=Dn(p|0,g|0,z|0,Y|0),p=a|0,g=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const h=P0(Y,V,l);n=N0(h,z,q,v),s=h|0}({h:n,l:s}=Dn(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Dn(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Dn(this.Ch|0,this.Cl|0,a|0,c|0),{h:p,l:g}=Dn(this.Dh|0,this.Dl|0,p|0,g|0),{h:b,l:I}=Dn(this.Eh|0,this.El|0,b|0,I|0),{h:m,l:R}=Dn(this.Fh|0,this.Fl|0,m|0,R|0),{h:x,l:k}=Dn(this.Gh|0,this.Gl|0,x|0,k|0),{h:M,l:C}=Dn(this.Hh|0,this.Hl|0,M|0,C|0),this.set(n,s,i,o,a,c,p,g,b,I,m,R,x,k,M,C)}roundClean(){gr(tr,nr)}destroy(){gr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ld=sl(()=>new D0),H0=sl(()=>new q0);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ol=BigInt(0),rc=BigInt(1);function Nr(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function _s(r){const e=r.toString(16);return e.length&1?"0"+e:e}function ud(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?ol:BigInt("0x"+r)}function Lo(r){return ud(yi(r))}function rs(r){return hn(r),ud(yi(Uint8Array.from(r).reverse()))}function al(r,e){return rl(r.toString(16).padStart(e*2,"0"))}function Po(r,e){return al(r,e).reverse()}function nt(r,e,t){let n;if(typeof e=="string")try{n=rl(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(nl(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}const Ra=r=>typeof r=="bigint"&&ol<=r;function j0(r,e,t){return Ra(r)&&Ra(e)&&Ra(t)&&e<=r&&r<t}function oi(r,e,t,n){if(!j0(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function V0(r){let e;for(e=0;r>ol;r>>=rc,e+=1);return e}const No=r=>(rc<<BigInt(r))-rc;function G0(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=m=>new Uint8Array(m),s=m=>Uint8Array.of(m);let i=n(r),o=n(r),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},p=(...m)=>t(o,i,...m),g=(m=n(0))=>{o=p(s(0),m),i=p(),m.length!==0&&(o=p(s(1),m),i=p())},b=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const R=[];for(;m<e;){i=p();const x=i.slice();R.push(x),m+=i.length}return Zn(...R)};return(m,R)=>{c(),g(m);let x;for(;!(x=R(b()));)g();return c(),x}}function ds(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(t).forEach(([s,i])=>n(s,i,!0))}function co(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qt=BigInt(0),Wt=BigInt(1),kr=BigInt(2),Y0=BigInt(3),dd=BigInt(4),fd=BigInt(5),hd=BigInt(8);function rt(r,e){const t=r%e;return t>=Qt?t:e+t}function et(r,e,t){let n=r;for(;e-- >Qt;)n*=n,n%=t;return n}function su(r,e){if(r===Qt)throw new Error("invert: expected non-zero number");if(e<=Qt)throw new Error("invert: expected positive modulus, got "+e);let t=rt(r,e),n=e,s=Qt,i=Wt;for(;t!==Qt;){const a=n/t,c=n%t,p=s-i*a;n=t,t=c,s=i,i=p}if(n!==Wt)throw new Error("invert: does not exist");return rt(s,e)}function pd(r,e){const t=(r.ORDER+Wt)/dd,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function Z0(r,e){const t=(r.ORDER-fd)/hd,n=r.mul(e,kr),s=r.pow(n,t),i=r.mul(e,s),o=r.mul(r.mul(i,kr),s),a=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),e))throw new Error("Cannot find square root");return a}function J0(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-Wt,t=0;for(;e%kr===Qt;)e/=kr,t++;let n=kr;const s=Ri(r);for(;ou(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return pd;let i=s.pow(n,e);const o=(e+Wt)/kr;return function(c,p){if(c.is0(p))return p;if(ou(c,p)!==1)throw new Error("Cannot find square root");let g=t,b=c.mul(c.ONE,i),I=c.pow(p,e),m=c.pow(p,o);for(;!c.eql(I,c.ONE);){if(c.is0(I))return c.ZERO;let R=1,x=c.sqr(I);for(;!c.eql(x,c.ONE);)if(R++,x=c.sqr(x),R===g)throw new Error("Cannot find square root");const k=Wt<<BigInt(g-R-1),M=c.pow(b,k);g=R,b=c.sqr(M),I=c.mul(I,b),m=c.mul(m,M)}return m}}function X0(r){return r%dd===Y0?pd:r%hd===fd?Z0:J0(r)}const Q0=(r,e)=>(rt(r,e)&Wt)===Wt,ep=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tp(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=ep.reduce((n,s)=>(n[s]="function",n),e);return ds(r,t),r}function np(r,e,t){if(t<Qt)throw new Error("invalid exponent, negatives unsupported");if(t===Qt)return r.ONE;if(t===Wt)return e;let n=r.ONE,s=e;for(;t>Qt;)t&Wt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Wt;return n}function gd(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),s=e.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return e.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),i),n}function ou(r,e){const t=(r.ORDER-Wt)/kr,n=r.pow(e,t),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function rp(r,e){e!==void 0&&ns(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Ri(r,e,t=!1,n={}){if(r<=Qt)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const g=e;g.BITS&&(s=g.BITS),g.sqrt&&(i=g.sqrt),typeof g.isLE=="boolean"&&(t=g.isLE)}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=rp(r,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const p=Object.freeze({ORDER:r,isLE:t,BITS:o,BYTES:a,MASK:No(o),ZERO:Qt,ONE:Wt,create:g=>rt(g,r),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return Qt<=g&&g<r},is0:g=>g===Qt,isValidNot0:g=>!p.is0(g)&&p.isValid(g),isOdd:g=>(g&Wt)===Wt,neg:g=>rt(-g,r),eql:(g,b)=>g===b,sqr:g=>rt(g*g,r),add:(g,b)=>rt(g+b,r),sub:(g,b)=>rt(g-b,r),mul:(g,b)=>rt(g*b,r),pow:(g,b)=>np(p,g,b),div:(g,b)=>rt(g*su(b,r),r),sqrN:g=>g*g,addN:(g,b)=>g+b,subN:(g,b)=>g-b,mulN:(g,b)=>g*b,inv:g=>su(g,r),sqrt:i||(g=>(c||(c=X0(r)),c(p,g))),toBytes:g=>t?Po(g,a):al(g,a),fromBytes:g=>{if(g.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+g.length);return t?rs(g):Lo(g)},invertBatch:g=>gd(p,g),cmov:(g,b,I)=>I?b:g});return Object.freeze(p)}function yd(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function md(r){const e=yd(r);return e+Math.ceil(e/2)}function ip(r,e,t=!1){const n=r.length,s=yd(e),i=md(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?rs(r):Lo(r),a=rt(o,e-Wt)+Wt;return t?Po(a,s):al(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mi=BigInt(0),Ir=BigInt(1);function Gi(r,e){const t=e.negate();return r?t:e}function wd(r,e,t){const n=e==="pz"?o=>o.pz:o=>o.ez,s=gd(r.Fp,t.map(n));return t.map((o,a)=>o.toAffine(s[a])).map(r.fromAffine)}function bd(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Ba(r,e){bd(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),s=2**r,i=No(r),o=BigInt(r);return{windows:t,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function au(r,e,t){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=t;let a=Number(r&s),c=r>>o;a>n&&(a-=i,c+=Ir);const p=e*n,g=p+Math.abs(a)-1,b=a===0,I=a<0,m=e%2!==0;return{nextN:c,offset:g,isZero:b,isNeg:I,isNegF:m,offsetF:p}}function sp(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function op(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Ma=new WeakMap,vd=new WeakMap;function Ta(r){return vd.get(r)||1}function cu(r){if(r!==mi)throw new Error("invalid wNAF")}function Sd(r,e){return{constTimeNegate:Gi,hasPrecomputes(t){return Ta(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>mi;)n&Ir&&(s=s.add(i)),i=i.double(),n>>=Ir;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=Ba(n,e),o=[];let a=t,c=a;for(let p=0;p<s;p++){c=a,o.push(c);for(let g=1;g<i;g++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,s){let i=r.ZERO,o=r.BASE;const a=Ba(t,e);for(let c=0;c<a.windows;c++){const{nextN:p,offset:g,isZero:b,isNeg:I,isNegF:m,offsetF:R}=au(s,c,a);s=p,b?o=o.add(Gi(m,n[R])):i=i.add(Gi(I,n[g]))}return cu(s),{p:i,f:o}},wNAFUnsafe(t,n,s,i=r.ZERO){const o=Ba(t,e);for(let a=0;a<o.windows&&s!==mi;a++){const{nextN:c,offset:p,isZero:g,isNeg:b}=au(s,a,o);if(s=c,!g){const I=n[p];i=i.add(b?I.negate():I)}}return cu(s),i},getPrecomputes(t,n,s){let i=Ma.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof s=="function"&&(i=s(i)),Ma.set(n,i))),i},wNAFCached(t,n,s){const i=Ta(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=Ta(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){bd(n,e),vd.set(t,n),Ma.delete(t)}}}function ap(r,e,t,n){let s=e,i=r.ZERO,o=r.ZERO;for(;t>mi||n>mi;)t&Ir&&(i=i.add(s)),n&Ir&&(o=o.add(s)),s=s.double(),t>>=Ir,n>>=Ir;return{p1:i,p2:o}}function Ed(r,e,t,n){sp(t,r),op(n,e);const s=t.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=V0(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const p=No(c),g=new Array(Number(p)+1).fill(o),b=Math.floor((e.BITS-1)/c)*c;let I=o;for(let m=b;m>=0;m-=c){g.fill(o);for(let x=0;x<i;x++){const k=n[x],M=Number(k>>BigInt(m)&p);g[M]=g[M].add(t[x])}let R=o;for(let x=g.length-1,k=o;x>0;x--)k=k.add(g[x]),R=R.add(k);if(I=I.add(R),m!==0)for(let x=0;x<c;x++)I=I.double()}return I}function lu(r,e){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return tp(e),e}else return Ri(r)}function _d(r,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>mi))throw new Error(`CURVE.${a} must be positive bigint`)}const n=lu(e.p,t.Fp),s=lu(e.n,t.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _n=BigInt(0),$t=BigInt(1),Ca=BigInt(2),cp=BigInt(8),lp={zip215:!0};function up(r,e,t,n){const s=r.sqr(t),i=r.sqr(n),o=r.add(r.mul(e.a,s),i),a=r.add(r.ONE,r.mul(e.d,r.mul(s,i)));return r.eql(o,a)}function dp(r,e={}){const{Fp:t,Fn:n}=_d("edwards",r,e),{h:s,n:i}=r;ds(e,{},{uvRatio:"function"});const o=Ca<<BigInt(n.BYTES*8)-$t,a=x=>t.create(x),c=e.uvRatio||((x,k)=>{try{return{isValid:!0,value:t.sqrt(t.div(x,k))}}catch{return{isValid:!1,value:_n}}});if(!up(t,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function p(x,k,M=!1){const C=M?$t:_n;return oi("coordinate "+x,k,C,o),k}function g(x){if(!(x instanceof m))throw new Error("ExtendedPoint expected")}const b=co((x,k)=>{const{ex:M,ey:C,ez:L}=x,U=x.is0();k==null&&(k=U?cp:t.inv(L));const P=a(M*k),K=a(C*k),H=a(L*k);if(U)return{x:_n,y:$t};if(H!==$t)throw new Error("invZ was invalid");return{x:P,y:K}}),I=co(x=>{const{a:k,d:M}=r;if(x.is0())throw new Error("bad point: ZERO");const{ex:C,ey:L,ez:U,et:P}=x,K=a(C*C),H=a(L*L),G=a(U*U),z=a(G*G),Y=a(K*k),q=a(G*a(Y+H)),V=a(z+a(M*a(K*H)));if(q!==V)throw new Error("bad point: equation left != right (1)");const v=a(C*L),l=a(U*P);if(v!==l)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(k,M,C,L){this.ex=p("x",k),this.ey=p("y",M),this.ez=p("z",C,!0),this.et=p("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(k){if(k instanceof m)throw new Error("extended point not allowed");const{x:M,y:C}=k||{};return p("x",M),p("y",C),new m(M,C,$t,a(M*C))}static normalizeZ(k){return wd(m,"ez",k)}static msm(k,M){return Ed(m,n,k,M)}_setWindowSize(k){this.precompute(k)}precompute(k=8,M=!0){return R.setWindowSize(this,k),M||this.multiply(Ca),this}assertValidity(){I(this)}equals(k){g(k);const{ex:M,ey:C,ez:L}=this,{ex:U,ey:P,ez:K}=k,H=a(M*K),G=a(U*L),z=a(C*K),Y=a(P*L);return H===G&&z===Y}is0(){return this.equals(m.ZERO)}negate(){return new m(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:k}=r,{ex:M,ey:C,ez:L}=this,U=a(M*M),P=a(C*C),K=a(Ca*a(L*L)),H=a(k*U),G=M+C,z=a(a(G*G)-U-P),Y=H+P,q=Y-K,V=H-P,v=a(z*q),l=a(Y*V),h=a(z*V),y=a(q*Y);return new m(v,l,y,h)}add(k){g(k);const{a:M,d:C}=r,{ex:L,ey:U,ez:P,et:K}=this,{ex:H,ey:G,ez:z,et:Y}=k,q=a(L*H),V=a(U*G),v=a(K*C*Y),l=a(P*z),h=a((L+U)*(H+G)-q-V),y=l-v,S=l+v,_=a(V-M*q),T=a(h*y),N=a(S*_),E=a(h*_),f=a(y*S);return new m(T,N,f,E)}subtract(k){return this.add(k.negate())}multiply(k){const M=k;oi("scalar",M,$t,i);const{p:C,f:L}=R.wNAFCached(this,M,m.normalizeZ);return m.normalizeZ([C,L])[0]}multiplyUnsafe(k,M=m.ZERO){const C=k;return oi("scalar",C,_n,i),C===_n?m.ZERO:this.is0()||C===$t?this:R.wNAFCachedUnsafe(this,C,m.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return R.wNAFCachedUnsafe(this,i).is0()}toAffine(k){return b(this,k)}clearCofactor(){return s===$t?this:this.multiplyUnsafe(s)}static fromBytes(k,M=!1){return hn(k),this.fromHex(k,M)}static fromHex(k,M=!1){const{d:C,a:L}=r,U=t.BYTES;k=nt("pointHex",k,U),Nr("zip215",M);const P=k.slice(),K=k[U-1];P[U-1]=K&-129;const H=rs(P),G=M?o:t.ORDER;oi("pointHex.y",H,_n,G);const z=a(H*H),Y=a(z-$t),q=a(C*z-L);let{isValid:V,value:v}=c(Y,q);if(!V)throw new Error("Point.fromHex: invalid y coordinate");const l=(v&$t)===$t,h=(K&128)!==0;if(!M&&v===_n&&h)throw new Error("Point.fromHex: x=0 and x_0=1");return h!==l&&(v=a(-v)),m.fromAffine({x:v,y:H})}static fromPrivateScalar(k){return m.BASE.multiply(k)}toBytes(){const{x:k,y:M}=this.toAffine(),C=Po(M,t.BYTES);return C[C.length-1]|=k&$t?128:0,C}toRawBytes(){return this.toBytes()}toHex(){return yi(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}m.BASE=new m(r.Gx,r.Gy,$t,a(r.Gx*r.Gy)),m.ZERO=new m(_n,$t,$t,_n),m.Fp=t,m.Fn=n;const R=Sd(m,n.BYTES*8);return m}function fp(r,e){ds(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=e,{BASE:s,Fp:i,Fn:o}=r,a=o.ORDER,c=e.randomBytes||sd,p=e.adjustScalarBytes||(P=>P),g=e.domain||((P,K,H)=>{if(Nr("phflag",H),K.length||H)throw new Error("Contexts/pre-hash are not supported");return P});function b(P){return o.create(P)}function I(P){return b(rs(P))}function m(P){const K=i.BYTES;P=nt("private key",P,K);const H=nt("hashed private key",n(P),2*K),G=p(H.slice(0,K)),z=H.slice(K,2*K),Y=I(G);return{head:G,prefix:z,scalar:Y}}function R(P){const{head:K,prefix:H,scalar:G}=m(P),z=s.multiply(G),Y=z.toBytes();return{head:K,prefix:H,scalar:G,point:z,pointBytes:Y}}function x(P){return R(P).pointBytes}function k(P=Uint8Array.of(),...K){const H=Zn(...K);return I(n(g(H,nt("context",P),!!t)))}function M(P,K,H={}){P=nt("message",P),t&&(P=t(P));const{prefix:G,scalar:z,pointBytes:Y}=R(K),q=k(H.context,G,P),V=s.multiply(q).toBytes(),v=k(H.context,V,Y,P),l=b(q+v*z);oi("signature.s",l,_n,a);const h=i.BYTES,y=Zn(V,Po(l,h));return nt("result",y,h*2)}const C=lp;function L(P,K,H,G=C){const{context:z,zip215:Y}=G,q=i.BYTES;P=nt("signature",P,2*q),K=nt("message",K),H=nt("publicKey",H,q),Y!==void 0&&Nr("zip215",Y),t&&(K=t(K));const V=rs(P.slice(q,2*q));let v,l,h;try{v=r.fromHex(H,Y),l=r.fromHex(P.slice(0,q),Y),h=s.multiplyUnsafe(V)}catch{return!1}if(!Y&&v.isSmallOrder())return!1;const y=k(z,l.toBytes(),v.toBytes(),K);return l.add(v.multiplyUnsafe(y)).subtract(h).clearCofactor().is0()}return s.precompute(8),{getPublicKey:x,sign:M,verify:L,utils:{getExtendedPublicKey:R,randomPrivateKey:()=>c(i.BYTES),precompute(P=8,K=r.BASE){return K.precompute(P,!1)}},Point:r}}function hp(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ri(e.n,r.nBitLength,!0),s={Fp:t,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:i}}function pp(r,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:r})}function gp(r){const{CURVE:e,curveOpts:t,eddsaOpts:n}=hp(r),s=dp(e,t),i=fp(s,n);return pp(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const yp=BigInt(1),uu=BigInt(2);BigInt(3);const mp=BigInt(5),wp=BigInt(8),Oo={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:wp,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function bp(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Oo.p,a=r*r%i*r%i,c=et(a,uu,i)*a%i,p=et(c,yp,i)*r%i,g=et(p,mp,i)*p%i,b=et(g,e,i)*g%i,I=et(b,t,i)*b%i,m=et(I,n,i)*I%i,R=et(m,s,i)*m%i,x=et(R,s,i)*m%i,k=et(x,e,i)*g%i;return{pow_p_5_8:et(k,uu,i)*r%i,b2:a}}function vp(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const du=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Sp(r,e){const t=Oo.p,n=rt(e*e*e,t),s=rt(n*n*e,t),i=bp(r*s).pow_p_5_8;let o=rt(r*n*i,t);const a=rt(e*o*o,t),c=o,p=rt(o*du,t),g=a===r,b=a===rt(-r,t),I=a===rt(-r*du,t);return g&&(o=c),(b||I)&&(o=p),Q0(o,t)&&(o=rt(-o,t)),{isValid:g||b,value:o}}const Ep=(()=>Ri(Oo.p,void 0,!0))(),_p=(()=>({...Oo,Fp:Ep,hash:H0,adjustScalarBytes:vp,uvRatio:Sp}))(),Ur=(()=>gp(_p))();var cl={exports:{}};const Ap={},kp=Object.freeze(Object.defineProperty({__proto__:null,default:Ap},Symbol.toStringTag,{value:"Module"})),Ip=Xn(kp);cl.exports;(function(r){(function(e,t){function n(v,l){if(!v)throw new Error(l||"Assertion failed")}function s(v,l){v.super_=l;var h=function(){};h.prototype=l.prototype,v.prototype=new h,v.prototype.constructor=v}function i(v,l,h){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((l==="le"||l==="be")&&(h=l,l=10),this._init(v||0,l||10,h||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ip.Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,h){return l.cmp(h)>0?l:h},i.min=function(l,h){return l.cmp(h)<0?l:h},i.prototype._init=function(l,h,y){if(typeof l=="number")return this._initNumber(l,h,y);if(typeof l=="object")return this._initArray(l,h,y);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),l=l.toString().replace(/\s+/g,"");var S=0;l[0]==="-"&&(S++,this.negative=1),S<l.length&&(h===16?this._parseHex(l,S,y):(this._parseBase(l,h,S),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(l,h,y){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(l,h,y){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var _,T,N=0;if(y==="be")for(S=l.length-1,_=0;S>=0;S-=3)T=l[S]|l[S-1]<<8|l[S-2]<<16,this.words[_]|=T<<N&67108863,this.words[_+1]=T>>>26-N&67108863,N+=24,N>=26&&(N-=26,_++);else if(y==="le")for(S=0,_=0;S<l.length;S+=3)T=l[S]|l[S+1]<<8|l[S+2]<<16,this.words[_]|=T<<N&67108863,this.words[_+1]=T>>>26-N&67108863,N+=24,N>=26&&(N-=26,_++);return this._strip()};function a(v,l){var h=v.charCodeAt(l);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;n(!1,"Invalid character in "+v)}function c(v,l,h){var y=a(v,h);return h-1>=l&&(y|=a(v,h-1)<<4),y}i.prototype._parseHex=function(l,h,y){this.length=Math.ceil((l.length-h)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var _=0,T=0,N;if(y==="be")for(S=l.length-1;S>=h;S-=2)N=c(l,h,S)<<_,this.words[T]|=N&67108863,_>=18?(_-=18,T+=1,this.words[T]|=N>>>26):_+=8;else{var E=l.length-h;for(S=E%2===0?h+1:h;S<l.length;S+=2)N=c(l,h,S)<<_,this.words[T]|=N&67108863,_>=18?(_-=18,T+=1,this.words[T]|=N>>>26):_+=8}this._strip()};function p(v,l,h,y){for(var S=0,_=0,T=Math.min(v.length,h),N=l;N<T;N++){var E=v.charCodeAt(N)-48;S*=y,E>=49?_=E-49+10:E>=17?_=E-17+10:_=E,n(E>=0&&_<y,"Invalid character"),S+=_}return S}i.prototype._parseBase=function(l,h,y){this.words=[0],this.length=1;for(var S=0,_=1;_<=67108863;_*=h)S++;S--,_=_/h|0;for(var T=l.length-y,N=T%S,E=Math.min(T,T-N)+y,f=0,B=y;B<E;B+=S)f=p(l,B,B+S,h),this.imuln(_),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(N!==0){var re=1;for(f=p(l,B,l.length,h),B=0;B<N;B++)re*=h;this.imuln(re),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var h=0;h<this.length;h++)l.words[h]=this.words[h];l.length=this.length,l.negative=this.negative,l.red=this.red};function g(v,l){v.words=l.words,v.length=l.length,v.negative=l.negative,v.red=l.red}if(i.prototype._move=function(l){g(l,this)},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{i.prototype.inspect=b}else i.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,h){l=l||10,h=h|0||1;var y;if(l===16||l==="hex"){y="";for(var S=0,_=0,T=0;T<this.length;T++){var N=this.words[T],E=((N<<S|_)&16777215).toString(16);_=N>>>24-S&16777215,S+=2,S>=26&&(S-=26,T--),_!==0||T!==this.length-1?y=I[6-E.length]+E+y:y=E+y}for(_!==0&&(y=_.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(l===(l|0)&&l>=2&&l<=36){var f=m[l],B=R[l];y="";var re=this.clone();for(re.negative=0;!re.isZero();){var ee=re.modrn(B).toString(l);re=re.idivn(B),re.isZero()?y=ee+y:y=I[f-ee.length]+ee+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(l,h){return this.toArrayLike(o,l,h)}),i.prototype.toArray=function(l,h){return this.toArrayLike(Array,l,h)};var x=function(l,h){return l.allocUnsafe?l.allocUnsafe(h):new l(h)};i.prototype.toArrayLike=function(l,h,y){this._strip();var S=this.byteLength(),_=y||Math.max(1,S);n(S<=_,"byte array longer than desired length"),n(_>0,"Requested array length <= 0");var T=x(l,_),N=h==="le"?"LE":"BE";return this["_toArrayLike"+N](T,S),T},i.prototype._toArrayLikeLE=function(l,h){for(var y=0,S=0,_=0,T=0;_<this.length;_++){var N=this.words[_]<<T|S;l[y++]=N&255,y<l.length&&(l[y++]=N>>8&255),y<l.length&&(l[y++]=N>>16&255),T===6?(y<l.length&&(l[y++]=N>>24&255),S=0,T=0):(S=N>>>24,T+=2)}if(y<l.length)for(l[y++]=S;y<l.length;)l[y++]=0},i.prototype._toArrayLikeBE=function(l,h){for(var y=l.length-1,S=0,_=0,T=0;_<this.length;_++){var N=this.words[_]<<T|S;l[y--]=N&255,y>=0&&(l[y--]=N>>8&255),y>=0&&(l[y--]=N>>16&255),T===6?(y>=0&&(l[y--]=N>>24&255),S=0,T=0):(S=N>>>24,T+=2)}if(y>=0)for(l[y--]=S;y>=0;)l[y--]=0},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var h=l,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(l){if(l===0)return 26;var h=l,y=0;return h&8191||(y+=13,h>>>=13),h&127||(y+=7,h>>>=7),h&15||(y+=4,h>>>=4),h&3||(y+=2,h>>>=2),h&1||y++,y},i.prototype.bitLength=function(){var l=this.words[this.length-1],h=this._countBits(l);return(this.length-1)*26+h};function k(v){for(var l=new Array(v.bitLength()),h=0;h<l.length;h++){var y=h/26|0,S=h%26;l[h]=v.words[y]>>>S&1}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(l+=y,y!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]|l.words[h];return this._strip()},i.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var h;this.length>l.length?h=l:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&l.words[y];return this.length=h.length,this._strip()},i.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var h,y;this.length>l.length?(h=this,y=l):(h=l,y=this);for(var S=0;S<y.length;S++)this.words[S]=h.words[S]^y.words[S];if(this!==h)for(;S<h.length;S++)this.words[S]=h.words[S];return this.length=h.length,this._strip()},i.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var h=Math.ceil(l/26)|0,y=l%26;this._expand(h),y>0&&h--;for(var S=0;S<h;S++)this.words[S]=~this.words[S]&67108863;return y>0&&(this.words[S]=~this.words[S]&67108863>>26-y),this._strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,h){n(typeof l=="number"&&l>=0);var y=l/26|0,S=l%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<S:this.words[y]=this.words[y]&~(1<<S),this._strip()},i.prototype.iadd=function(l){var h;if(this.negative!==0&&l.negative===0)return this.negative=0,h=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,h=this.isub(l),l.negative=1,h._normSign();var y,S;this.length>l.length?(y=this,S=l):(y=l,S=this);for(var _=0,T=0;T<S.length;T++)h=(y.words[T]|0)+(S.words[T]|0)+_,this.words[T]=h&67108863,_=h>>>26;for(;_!==0&&T<y.length;T++)h=(y.words[T]|0)+_,this.words[T]=h&67108863,_=h>>>26;if(this.length=y.length,_!==0)this.words[this.length]=_,this.length++;else if(y!==this)for(;T<y.length;T++)this.words[T]=y.words[T];return this},i.prototype.add=function(l){var h;return l.negative!==0&&this.negative===0?(l.negative=0,h=this.sub(l),l.negative^=1,h):l.negative===0&&this.negative!==0?(this.negative=0,h=l.sub(this),this.negative=1,h):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var h=this.iadd(l);return l.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var y=this.cmp(l);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,_;y>0?(S=this,_=l):(S=l,_=this);for(var T=0,N=0;N<_.length;N++)h=(S.words[N]|0)-(_.words[N]|0)+T,T=h>>26,this.words[N]=h&67108863;for(;T!==0&&N<S.length;N++)h=(S.words[N]|0)+T,T=h>>26,this.words[N]=h&67108863;if(T===0&&N<S.length&&S!==this)for(;N<S.length;N++)this.words[N]=S.words[N];return this.length=Math.max(this.length,N),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function M(v,l,h){h.negative=l.negative^v.negative;var y=v.length+l.length|0;h.length=y,y=y-1|0;var S=v.words[0]|0,_=l.words[0]|0,T=S*_,N=T&67108863,E=T/67108864|0;h.words[0]=N;for(var f=1;f<y;f++){for(var B=E>>>26,re=E&67108863,ee=Math.min(f,l.length-1),ie=Math.max(0,f-v.length+1);ie<=ee;ie++){var ze=f-ie|0;S=v.words[ze]|0,_=l.words[ie]|0,T=S*_+re,B+=T/67108864|0,re=T&67108863}h.words[f]=re|0,E=B|0}return E!==0?h.words[f]=E|0:h.length--,h._strip()}var C=function(l,h,y){var S=l.words,_=h.words,T=y.words,N=0,E,f,B,re=S[0]|0,ee=re&8191,ie=re>>>13,ze=S[1]|0,ve=ze&8191,_e=ze>>>13,Un=S[2]|0,Te=Un&8191,He=Un>>>13,zn=S[3]|0,Oe=zn&8191,Ze=zn>>>13,ws=S[4]|0,$e=ws&8191,Je=ws>>>13,bs=S[5]|0,je=bs&8191,Fe=bs>>>13,en=S[6]|0,qe=en&8191,Xe=en>>>13,pn=S[7]|0,Qe=pn&8191,w=pn>>>13,u=S[8]|0,d=u&8191,A=u>>>13,O=S[9]|0,F=O&8191,j=O>>>13,me=_[0]|0,ye=me&8191,pe=me>>>13,De=_[1]|0,he=De&8191,st=De>>>13,jl=_[2]|0,ot=jl&8191,at=jl>>>13,Vl=_[3]|0,ct=Vl&8191,lt=Vl>>>13,Gl=_[4]|0,ut=Gl&8191,dt=Gl>>>13,Yl=_[5]|0,ft=Yl&8191,ht=Yl>>>13,Zl=_[6]|0,pt=Zl&8191,gt=Zl>>>13,Jl=_[7]|0,yt=Jl&8191,mt=Jl>>>13,Xl=_[8]|0,wt=Xl&8191,bt=Xl>>>13,Ql=_[9]|0,vt=Ql&8191,St=Ql>>>13;y.negative=l.negative^h.negative,y.length=19,E=Math.imul(ee,ye),f=Math.imul(ee,pe),f=f+Math.imul(ie,ye)|0,B=Math.imul(ie,pe);var aa=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(aa>>>26)|0,aa&=67108863,E=Math.imul(ve,ye),f=Math.imul(ve,pe),f=f+Math.imul(_e,ye)|0,B=Math.imul(_e,pe),E=E+Math.imul(ee,he)|0,f=f+Math.imul(ee,st)|0,f=f+Math.imul(ie,he)|0,B=B+Math.imul(ie,st)|0;var ca=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ca>>>26)|0,ca&=67108863,E=Math.imul(Te,ye),f=Math.imul(Te,pe),f=f+Math.imul(He,ye)|0,B=Math.imul(He,pe),E=E+Math.imul(ve,he)|0,f=f+Math.imul(ve,st)|0,f=f+Math.imul(_e,he)|0,B=B+Math.imul(_e,st)|0,E=E+Math.imul(ee,ot)|0,f=f+Math.imul(ee,at)|0,f=f+Math.imul(ie,ot)|0,B=B+Math.imul(ie,at)|0;var la=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(la>>>26)|0,la&=67108863,E=Math.imul(Oe,ye),f=Math.imul(Oe,pe),f=f+Math.imul(Ze,ye)|0,B=Math.imul(Ze,pe),E=E+Math.imul(Te,he)|0,f=f+Math.imul(Te,st)|0,f=f+Math.imul(He,he)|0,B=B+Math.imul(He,st)|0,E=E+Math.imul(ve,ot)|0,f=f+Math.imul(ve,at)|0,f=f+Math.imul(_e,ot)|0,B=B+Math.imul(_e,at)|0,E=E+Math.imul(ee,ct)|0,f=f+Math.imul(ee,lt)|0,f=f+Math.imul(ie,ct)|0,B=B+Math.imul(ie,lt)|0;var ua=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ua>>>26)|0,ua&=67108863,E=Math.imul($e,ye),f=Math.imul($e,pe),f=f+Math.imul(Je,ye)|0,B=Math.imul(Je,pe),E=E+Math.imul(Oe,he)|0,f=f+Math.imul(Oe,st)|0,f=f+Math.imul(Ze,he)|0,B=B+Math.imul(Ze,st)|0,E=E+Math.imul(Te,ot)|0,f=f+Math.imul(Te,at)|0,f=f+Math.imul(He,ot)|0,B=B+Math.imul(He,at)|0,E=E+Math.imul(ve,ct)|0,f=f+Math.imul(ve,lt)|0,f=f+Math.imul(_e,ct)|0,B=B+Math.imul(_e,lt)|0,E=E+Math.imul(ee,ut)|0,f=f+Math.imul(ee,dt)|0,f=f+Math.imul(ie,ut)|0,B=B+Math.imul(ie,dt)|0;var da=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(da>>>26)|0,da&=67108863,E=Math.imul(je,ye),f=Math.imul(je,pe),f=f+Math.imul(Fe,ye)|0,B=Math.imul(Fe,pe),E=E+Math.imul($e,he)|0,f=f+Math.imul($e,st)|0,f=f+Math.imul(Je,he)|0,B=B+Math.imul(Je,st)|0,E=E+Math.imul(Oe,ot)|0,f=f+Math.imul(Oe,at)|0,f=f+Math.imul(Ze,ot)|0,B=B+Math.imul(Ze,at)|0,E=E+Math.imul(Te,ct)|0,f=f+Math.imul(Te,lt)|0,f=f+Math.imul(He,ct)|0,B=B+Math.imul(He,lt)|0,E=E+Math.imul(ve,ut)|0,f=f+Math.imul(ve,dt)|0,f=f+Math.imul(_e,ut)|0,B=B+Math.imul(_e,dt)|0,E=E+Math.imul(ee,ft)|0,f=f+Math.imul(ee,ht)|0,f=f+Math.imul(ie,ft)|0,B=B+Math.imul(ie,ht)|0;var fa=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(fa>>>26)|0,fa&=67108863,E=Math.imul(qe,ye),f=Math.imul(qe,pe),f=f+Math.imul(Xe,ye)|0,B=Math.imul(Xe,pe),E=E+Math.imul(je,he)|0,f=f+Math.imul(je,st)|0,f=f+Math.imul(Fe,he)|0,B=B+Math.imul(Fe,st)|0,E=E+Math.imul($e,ot)|0,f=f+Math.imul($e,at)|0,f=f+Math.imul(Je,ot)|0,B=B+Math.imul(Je,at)|0,E=E+Math.imul(Oe,ct)|0,f=f+Math.imul(Oe,lt)|0,f=f+Math.imul(Ze,ct)|0,B=B+Math.imul(Ze,lt)|0,E=E+Math.imul(Te,ut)|0,f=f+Math.imul(Te,dt)|0,f=f+Math.imul(He,ut)|0,B=B+Math.imul(He,dt)|0,E=E+Math.imul(ve,ft)|0,f=f+Math.imul(ve,ht)|0,f=f+Math.imul(_e,ft)|0,B=B+Math.imul(_e,ht)|0,E=E+Math.imul(ee,pt)|0,f=f+Math.imul(ee,gt)|0,f=f+Math.imul(ie,pt)|0,B=B+Math.imul(ie,gt)|0;var ha=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ha>>>26)|0,ha&=67108863,E=Math.imul(Qe,ye),f=Math.imul(Qe,pe),f=f+Math.imul(w,ye)|0,B=Math.imul(w,pe),E=E+Math.imul(qe,he)|0,f=f+Math.imul(qe,st)|0,f=f+Math.imul(Xe,he)|0,B=B+Math.imul(Xe,st)|0,E=E+Math.imul(je,ot)|0,f=f+Math.imul(je,at)|0,f=f+Math.imul(Fe,ot)|0,B=B+Math.imul(Fe,at)|0,E=E+Math.imul($e,ct)|0,f=f+Math.imul($e,lt)|0,f=f+Math.imul(Je,ct)|0,B=B+Math.imul(Je,lt)|0,E=E+Math.imul(Oe,ut)|0,f=f+Math.imul(Oe,dt)|0,f=f+Math.imul(Ze,ut)|0,B=B+Math.imul(Ze,dt)|0,E=E+Math.imul(Te,ft)|0,f=f+Math.imul(Te,ht)|0,f=f+Math.imul(He,ft)|0,B=B+Math.imul(He,ht)|0,E=E+Math.imul(ve,pt)|0,f=f+Math.imul(ve,gt)|0,f=f+Math.imul(_e,pt)|0,B=B+Math.imul(_e,gt)|0,E=E+Math.imul(ee,yt)|0,f=f+Math.imul(ee,mt)|0,f=f+Math.imul(ie,yt)|0,B=B+Math.imul(ie,mt)|0;var pa=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(pa>>>26)|0,pa&=67108863,E=Math.imul(d,ye),f=Math.imul(d,pe),f=f+Math.imul(A,ye)|0,B=Math.imul(A,pe),E=E+Math.imul(Qe,he)|0,f=f+Math.imul(Qe,st)|0,f=f+Math.imul(w,he)|0,B=B+Math.imul(w,st)|0,E=E+Math.imul(qe,ot)|0,f=f+Math.imul(qe,at)|0,f=f+Math.imul(Xe,ot)|0,B=B+Math.imul(Xe,at)|0,E=E+Math.imul(je,ct)|0,f=f+Math.imul(je,lt)|0,f=f+Math.imul(Fe,ct)|0,B=B+Math.imul(Fe,lt)|0,E=E+Math.imul($e,ut)|0,f=f+Math.imul($e,dt)|0,f=f+Math.imul(Je,ut)|0,B=B+Math.imul(Je,dt)|0,E=E+Math.imul(Oe,ft)|0,f=f+Math.imul(Oe,ht)|0,f=f+Math.imul(Ze,ft)|0,B=B+Math.imul(Ze,ht)|0,E=E+Math.imul(Te,pt)|0,f=f+Math.imul(Te,gt)|0,f=f+Math.imul(He,pt)|0,B=B+Math.imul(He,gt)|0,E=E+Math.imul(ve,yt)|0,f=f+Math.imul(ve,mt)|0,f=f+Math.imul(_e,yt)|0,B=B+Math.imul(_e,mt)|0,E=E+Math.imul(ee,wt)|0,f=f+Math.imul(ee,bt)|0,f=f+Math.imul(ie,wt)|0,B=B+Math.imul(ie,bt)|0;var ga=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ga>>>26)|0,ga&=67108863,E=Math.imul(F,ye),f=Math.imul(F,pe),f=f+Math.imul(j,ye)|0,B=Math.imul(j,pe),E=E+Math.imul(d,he)|0,f=f+Math.imul(d,st)|0,f=f+Math.imul(A,he)|0,B=B+Math.imul(A,st)|0,E=E+Math.imul(Qe,ot)|0,f=f+Math.imul(Qe,at)|0,f=f+Math.imul(w,ot)|0,B=B+Math.imul(w,at)|0,E=E+Math.imul(qe,ct)|0,f=f+Math.imul(qe,lt)|0,f=f+Math.imul(Xe,ct)|0,B=B+Math.imul(Xe,lt)|0,E=E+Math.imul(je,ut)|0,f=f+Math.imul(je,dt)|0,f=f+Math.imul(Fe,ut)|0,B=B+Math.imul(Fe,dt)|0,E=E+Math.imul($e,ft)|0,f=f+Math.imul($e,ht)|0,f=f+Math.imul(Je,ft)|0,B=B+Math.imul(Je,ht)|0,E=E+Math.imul(Oe,pt)|0,f=f+Math.imul(Oe,gt)|0,f=f+Math.imul(Ze,pt)|0,B=B+Math.imul(Ze,gt)|0,E=E+Math.imul(Te,yt)|0,f=f+Math.imul(Te,mt)|0,f=f+Math.imul(He,yt)|0,B=B+Math.imul(He,mt)|0,E=E+Math.imul(ve,wt)|0,f=f+Math.imul(ve,bt)|0,f=f+Math.imul(_e,wt)|0,B=B+Math.imul(_e,bt)|0,E=E+Math.imul(ee,vt)|0,f=f+Math.imul(ee,St)|0,f=f+Math.imul(ie,vt)|0,B=B+Math.imul(ie,St)|0;var ya=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ya>>>26)|0,ya&=67108863,E=Math.imul(F,he),f=Math.imul(F,st),f=f+Math.imul(j,he)|0,B=Math.imul(j,st),E=E+Math.imul(d,ot)|0,f=f+Math.imul(d,at)|0,f=f+Math.imul(A,ot)|0,B=B+Math.imul(A,at)|0,E=E+Math.imul(Qe,ct)|0,f=f+Math.imul(Qe,lt)|0,f=f+Math.imul(w,ct)|0,B=B+Math.imul(w,lt)|0,E=E+Math.imul(qe,ut)|0,f=f+Math.imul(qe,dt)|0,f=f+Math.imul(Xe,ut)|0,B=B+Math.imul(Xe,dt)|0,E=E+Math.imul(je,ft)|0,f=f+Math.imul(je,ht)|0,f=f+Math.imul(Fe,ft)|0,B=B+Math.imul(Fe,ht)|0,E=E+Math.imul($e,pt)|0,f=f+Math.imul($e,gt)|0,f=f+Math.imul(Je,pt)|0,B=B+Math.imul(Je,gt)|0,E=E+Math.imul(Oe,yt)|0,f=f+Math.imul(Oe,mt)|0,f=f+Math.imul(Ze,yt)|0,B=B+Math.imul(Ze,mt)|0,E=E+Math.imul(Te,wt)|0,f=f+Math.imul(Te,bt)|0,f=f+Math.imul(He,wt)|0,B=B+Math.imul(He,bt)|0,E=E+Math.imul(ve,vt)|0,f=f+Math.imul(ve,St)|0,f=f+Math.imul(_e,vt)|0,B=B+Math.imul(_e,St)|0;var ma=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ma>>>26)|0,ma&=67108863,E=Math.imul(F,ot),f=Math.imul(F,at),f=f+Math.imul(j,ot)|0,B=Math.imul(j,at),E=E+Math.imul(d,ct)|0,f=f+Math.imul(d,lt)|0,f=f+Math.imul(A,ct)|0,B=B+Math.imul(A,lt)|0,E=E+Math.imul(Qe,ut)|0,f=f+Math.imul(Qe,dt)|0,f=f+Math.imul(w,ut)|0,B=B+Math.imul(w,dt)|0,E=E+Math.imul(qe,ft)|0,f=f+Math.imul(qe,ht)|0,f=f+Math.imul(Xe,ft)|0,B=B+Math.imul(Xe,ht)|0,E=E+Math.imul(je,pt)|0,f=f+Math.imul(je,gt)|0,f=f+Math.imul(Fe,pt)|0,B=B+Math.imul(Fe,gt)|0,E=E+Math.imul($e,yt)|0,f=f+Math.imul($e,mt)|0,f=f+Math.imul(Je,yt)|0,B=B+Math.imul(Je,mt)|0,E=E+Math.imul(Oe,wt)|0,f=f+Math.imul(Oe,bt)|0,f=f+Math.imul(Ze,wt)|0,B=B+Math.imul(Ze,bt)|0,E=E+Math.imul(Te,vt)|0,f=f+Math.imul(Te,St)|0,f=f+Math.imul(He,vt)|0,B=B+Math.imul(He,St)|0;var wa=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(wa>>>26)|0,wa&=67108863,E=Math.imul(F,ct),f=Math.imul(F,lt),f=f+Math.imul(j,ct)|0,B=Math.imul(j,lt),E=E+Math.imul(d,ut)|0,f=f+Math.imul(d,dt)|0,f=f+Math.imul(A,ut)|0,B=B+Math.imul(A,dt)|0,E=E+Math.imul(Qe,ft)|0,f=f+Math.imul(Qe,ht)|0,f=f+Math.imul(w,ft)|0,B=B+Math.imul(w,ht)|0,E=E+Math.imul(qe,pt)|0,f=f+Math.imul(qe,gt)|0,f=f+Math.imul(Xe,pt)|0,B=B+Math.imul(Xe,gt)|0,E=E+Math.imul(je,yt)|0,f=f+Math.imul(je,mt)|0,f=f+Math.imul(Fe,yt)|0,B=B+Math.imul(Fe,mt)|0,E=E+Math.imul($e,wt)|0,f=f+Math.imul($e,bt)|0,f=f+Math.imul(Je,wt)|0,B=B+Math.imul(Je,bt)|0,E=E+Math.imul(Oe,vt)|0,f=f+Math.imul(Oe,St)|0,f=f+Math.imul(Ze,vt)|0,B=B+Math.imul(Ze,St)|0;var ba=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(ba>>>26)|0,ba&=67108863,E=Math.imul(F,ut),f=Math.imul(F,dt),f=f+Math.imul(j,ut)|0,B=Math.imul(j,dt),E=E+Math.imul(d,ft)|0,f=f+Math.imul(d,ht)|0,f=f+Math.imul(A,ft)|0,B=B+Math.imul(A,ht)|0,E=E+Math.imul(Qe,pt)|0,f=f+Math.imul(Qe,gt)|0,f=f+Math.imul(w,pt)|0,B=B+Math.imul(w,gt)|0,E=E+Math.imul(qe,yt)|0,f=f+Math.imul(qe,mt)|0,f=f+Math.imul(Xe,yt)|0,B=B+Math.imul(Xe,mt)|0,E=E+Math.imul(je,wt)|0,f=f+Math.imul(je,bt)|0,f=f+Math.imul(Fe,wt)|0,B=B+Math.imul(Fe,bt)|0,E=E+Math.imul($e,vt)|0,f=f+Math.imul($e,St)|0,f=f+Math.imul(Je,vt)|0,B=B+Math.imul(Je,St)|0;var va=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(va>>>26)|0,va&=67108863,E=Math.imul(F,ft),f=Math.imul(F,ht),f=f+Math.imul(j,ft)|0,B=Math.imul(j,ht),E=E+Math.imul(d,pt)|0,f=f+Math.imul(d,gt)|0,f=f+Math.imul(A,pt)|0,B=B+Math.imul(A,gt)|0,E=E+Math.imul(Qe,yt)|0,f=f+Math.imul(Qe,mt)|0,f=f+Math.imul(w,yt)|0,B=B+Math.imul(w,mt)|0,E=E+Math.imul(qe,wt)|0,f=f+Math.imul(qe,bt)|0,f=f+Math.imul(Xe,wt)|0,B=B+Math.imul(Xe,bt)|0,E=E+Math.imul(je,vt)|0,f=f+Math.imul(je,St)|0,f=f+Math.imul(Fe,vt)|0,B=B+Math.imul(Fe,St)|0;var Sa=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(Sa>>>26)|0,Sa&=67108863,E=Math.imul(F,pt),f=Math.imul(F,gt),f=f+Math.imul(j,pt)|0,B=Math.imul(j,gt),E=E+Math.imul(d,yt)|0,f=f+Math.imul(d,mt)|0,f=f+Math.imul(A,yt)|0,B=B+Math.imul(A,mt)|0,E=E+Math.imul(Qe,wt)|0,f=f+Math.imul(Qe,bt)|0,f=f+Math.imul(w,wt)|0,B=B+Math.imul(w,bt)|0,E=E+Math.imul(qe,vt)|0,f=f+Math.imul(qe,St)|0,f=f+Math.imul(Xe,vt)|0,B=B+Math.imul(Xe,St)|0;var Ea=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,E=Math.imul(F,yt),f=Math.imul(F,mt),f=f+Math.imul(j,yt)|0,B=Math.imul(j,mt),E=E+Math.imul(d,wt)|0,f=f+Math.imul(d,bt)|0,f=f+Math.imul(A,wt)|0,B=B+Math.imul(A,bt)|0,E=E+Math.imul(Qe,vt)|0,f=f+Math.imul(Qe,St)|0,f=f+Math.imul(w,vt)|0,B=B+Math.imul(w,St)|0;var _a=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(_a>>>26)|0,_a&=67108863,E=Math.imul(F,wt),f=Math.imul(F,bt),f=f+Math.imul(j,wt)|0,B=Math.imul(j,bt),E=E+Math.imul(d,vt)|0,f=f+Math.imul(d,St)|0,f=f+Math.imul(A,vt)|0,B=B+Math.imul(A,St)|0;var Aa=(N+E|0)+((f&8191)<<13)|0;N=(B+(f>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,E=Math.imul(F,vt),f=Math.imul(F,St),f=f+Math.imul(j,vt)|0,B=Math.imul(j,St);var ka=(N+E|0)+((f&8191)<<13)|0;return N=(B+(f>>>13)|0)+(ka>>>26)|0,ka&=67108863,T[0]=aa,T[1]=ca,T[2]=la,T[3]=ua,T[4]=da,T[5]=fa,T[6]=ha,T[7]=pa,T[8]=ga,T[9]=ya,T[10]=ma,T[11]=wa,T[12]=ba,T[13]=va,T[14]=Sa,T[15]=Ea,T[16]=_a,T[17]=Aa,T[18]=ka,N!==0&&(T[19]=N,y.length++),y};Math.imul||(C=M);function L(v,l,h){h.negative=l.negative^v.negative,h.length=v.length+l.length;for(var y=0,S=0,_=0;_<h.length-1;_++){var T=S;S=0;for(var N=y&67108863,E=Math.min(_,l.length-1),f=Math.max(0,_-v.length+1);f<=E;f++){var B=_-f,re=v.words[B]|0,ee=l.words[f]|0,ie=re*ee,ze=ie&67108863;T=T+(ie/67108864|0)|0,ze=ze+N|0,N=ze&67108863,T=T+(ze>>>26)|0,S+=T>>>26,T&=67108863}h.words[_]=N,y=T,T=S}return y!==0?h.words[_]=y:h.length--,h._strip()}function U(v,l,h){return L(v,l,h)}i.prototype.mulTo=function(l,h){var y,S=this.length+l.length;return this.length===10&&l.length===10?y=C(this,l,h):S<63?y=M(this,l,h):S<1024?y=L(this,l,h):y=U(this,l,h),y},i.prototype.mul=function(l){var h=new i(null);return h.words=new Array(this.length+l.length),this.mulTo(l,h)},i.prototype.mulf=function(l){var h=new i(null);return h.words=new Array(this.length+l.length),U(this,l,h)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){var h=l<0;h&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var y=0,S=0;S<this.length;S++){var _=(this.words[S]|0)*l,T=(_&67108863)+(y&67108863);y>>=26,y+=_/67108864|0,y+=T>>>26,this.words[S]=T&67108863}return y!==0&&(this.words[S]=y,this.length++),this.length=l===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var h=k(l);if(h.length===0)return new i(1);for(var y=this,S=0;S<h.length&&h[S]===0;S++,y=y.sqr());if(++S<h.length)for(var _=y.sqr();S<h.length;S++,_=_.sqr())h[S]!==0&&(y=y.mul(_));return y},i.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var h=l%26,y=(l-h)/26,S=67108863>>>26-h<<26-h,_;if(h!==0){var T=0;for(_=0;_<this.length;_++){var N=this.words[_]&S,E=(this.words[_]|0)-N<<h;this.words[_]=E|T,T=N>>>26-h}T&&(this.words[_]=T,this.length++)}if(y!==0){for(_=this.length-1;_>=0;_--)this.words[_+y]=this.words[_];for(_=0;_<y;_++)this.words[_]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,h,y){n(typeof l=="number"&&l>=0);var S;h?S=(h-h%26)/26:S=0;var _=l%26,T=Math.min((l-_)/26,this.length),N=67108863^67108863>>>_<<_,E=y;if(S-=T,S=Math.max(0,S),E){for(var f=0;f<T;f++)E.words[f]=this.words[f];E.length=T}if(T!==0)if(this.length>T)for(this.length-=T,f=0;f<this.length;f++)this.words[f]=this.words[f+T];else this.words[0]=0,this.length=1;var B=0;for(f=this.length-1;f>=0&&(B!==0||f>=S);f--){var re=this.words[f]|0;this.words[f]=B<<26-_|re>>>_,B=re&N}return E&&B!==0&&(E.words[E.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(l,h,y){return n(this.negative===0),this.iushrn(l,h,y)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var h=l%26,y=(l-h)/26,S=1<<h;if(this.length<=y)return!1;var _=this.words[y];return!!(_&S)},i.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var h=l%26,y=(l-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var S=67108863^67108863>>>h<<h;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,h,y){var S=l.length+y,_;this._expand(S);var T,N=0;for(_=0;_<l.length;_++){T=(this.words[_+y]|0)+N;var E=(l.words[_]|0)*h;T-=E&67108863,N=(T>>26)-(E/67108864|0),this.words[_+y]=T&67108863}for(;_<this.length-y;_++)T=(this.words[_+y]|0)+N,N=T>>26,this.words[_+y]=T&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,_=0;_<this.length;_++)T=-(this.words[_]|0)+N,N=T>>26,this.words[_]=T&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(l,h){var y=this.length-l.length,S=this.clone(),_=l,T=_.words[_.length-1]|0,N=this._countBits(T);y=26-N,y!==0&&(_=_.ushln(y),S.iushln(y),T=_.words[_.length-1]|0);var E=S.length-_.length,f;if(h!=="mod"){f=new i(null),f.length=E+1,f.words=new Array(f.length);for(var B=0;B<f.length;B++)f.words[B]=0}var re=S.clone()._ishlnsubmul(_,1,E);re.negative===0&&(S=re,f&&(f.words[E]=1));for(var ee=E-1;ee>=0;ee--){var ie=(S.words[_.length+ee]|0)*67108864+(S.words[_.length+ee-1]|0);for(ie=Math.min(ie/T|0,67108863),S._ishlnsubmul(_,ie,ee);S.negative!==0;)ie--,S.negative=0,S._ishlnsubmul(_,1,ee),S.isZero()||(S.negative^=1);f&&(f.words[ee]=ie)}return f&&f._strip(),S._strip(),h!=="div"&&y!==0&&S.iushrn(y),{div:f||null,mod:S}},i.prototype.divmod=function(l,h,y){if(n(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,_,T;return this.negative!==0&&l.negative===0?(T=this.neg().divmod(l,h),h!=="mod"&&(S=T.div.neg()),h!=="div"&&(_=T.mod.neg(),y&&_.negative!==0&&_.iadd(l)),{div:S,mod:_}):this.negative===0&&l.negative!==0?(T=this.divmod(l.neg(),h),h!=="mod"&&(S=T.div.neg()),{div:S,mod:T.mod}):this.negative&l.negative?(T=this.neg().divmod(l.neg(),h),h!=="div"&&(_=T.mod.neg(),y&&_.negative!==0&&_.isub(l)),{div:T.div,mod:_}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?h==="div"?{div:this.divn(l.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modrn(l.words[0]))}:this._wordDiv(l,h)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var h=this.divmod(l);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(l):h.mod,S=l.ushrn(1),_=l.andln(1),T=y.cmp(S);return T<0||_===1&&T===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(l){var h=l<0;h&&(l=-l),n(l<=67108863);for(var y=(1<<26)%l,S=0,_=this.length-1;_>=0;_--)S=(y*S+(this.words[_]|0))%l;return h?-S:S},i.prototype.modn=function(l){return this.modrn(l)},i.prototype.idivn=function(l){var h=l<0;h&&(l=-l),n(l<=67108863);for(var y=0,S=this.length-1;S>=0;S--){var _=(this.words[S]|0)+y*67108864;this.words[S]=_/l|0,y=_%l}return this._strip(),h?this.ineg():this},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var h=this,y=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var S=new i(1),_=new i(0),T=new i(0),N=new i(1),E=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++E;for(var f=y.clone(),B=h.clone();!h.isZero();){for(var re=0,ee=1;!(h.words[0]&ee)&&re<26;++re,ee<<=1);if(re>0)for(h.iushrn(re);re-- >0;)(S.isOdd()||_.isOdd())&&(S.iadd(f),_.isub(B)),S.iushrn(1),_.iushrn(1);for(var ie=0,ze=1;!(y.words[0]&ze)&&ie<26;++ie,ze<<=1);if(ie>0)for(y.iushrn(ie);ie-- >0;)(T.isOdd()||N.isOdd())&&(T.iadd(f),N.isub(B)),T.iushrn(1),N.iushrn(1);h.cmp(y)>=0?(h.isub(y),S.isub(T),_.isub(N)):(y.isub(h),T.isub(S),N.isub(_))}return{a:T,b:N,gcd:y.iushln(E)}},i.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var h=this,y=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var S=new i(1),_=new i(0),T=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var N=0,E=1;!(h.words[0]&E)&&N<26;++N,E<<=1);if(N>0)for(h.iushrn(N);N-- >0;)S.isOdd()&&S.iadd(T),S.iushrn(1);for(var f=0,B=1;!(y.words[0]&B)&&f<26;++f,B<<=1);if(f>0)for(y.iushrn(f);f-- >0;)_.isOdd()&&_.iadd(T),_.iushrn(1);h.cmp(y)>=0?(h.isub(y),S.isub(_)):(y.isub(h),_.isub(S))}var re;return h.cmpn(1)===0?re=S:re=_,re.cmpn(0)<0&&re.iadd(l),re},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var h=this.clone(),y=l.clone();h.negative=0,y.negative=0;for(var S=0;h.isEven()&&y.isEven();S++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var _=h.cmp(y);if(_<0){var T=h;h=y,y=T}else if(_===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(S)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){n(typeof l=="number");var h=l%26,y=(l-h)/26,S=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=S,this;for(var _=S,T=y;_!==0&&T<this.length;T++){var N=this.words[T]|0;N+=_,_=N>>>26,N&=67108863,this.words[T]=N}return _!==0&&(this.words[T]=_,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var h=l<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var y;if(this.length>1)y=1;else{h&&(l=-l),n(l<=67108863,"Number is too big");var S=this.words[0]|0;y=S===l?0:S<l?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var h=this.ucmp(l);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var S=this.words[y]|0,_=l.words[y]|0;if(S!==_){S<_?h=-1:S>_&&(h=1);break}}return h},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new q(l)},i.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var P={k256:null,p224:null,p192:null,p25519:null};function K(v,l){this.name=v,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},K.prototype.ireduce=function(l){var h=l,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var S=y<this.n?-1:h.ucmp(this.p);return S===0?(h.words[0]=0,h.length=1):S>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},K.prototype.split=function(l,h){l.iushrn(this.n,0,h)},K.prototype.imulK=function(l){return l.imul(this.k)};function H(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(H,K),H.prototype.split=function(l,h){for(var y=4194303,S=Math.min(l.length,9),_=0;_<S;_++)h.words[_]=l.words[_];if(h.length=S,l.length<=9){l.words[0]=0,l.length=1;return}var T=l.words[9];for(h.words[h.length++]=T&y,_=10;_<l.length;_++){var N=l.words[_]|0;l.words[_-10]=(N&y)<<4|T>>>22,T=N}T>>>=22,l.words[_-10]=T,T===0&&l.length>10?l.length-=10:l.length-=9},H.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var h=0,y=0;y<l.length;y++){var S=l.words[y]|0;h+=S*977,l.words[y]=h&67108863,h=S*64+(h/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function G(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(G,K);function z(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(z,K);function Y(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Y,K),Y.prototype.imulK=function(l){for(var h=0,y=0;y<l.length;y++){var S=(l.words[y]|0)*19+h,_=S&67108863;S>>>=26,l.words[y]=_,h=S}return h!==0&&(l.words[l.length++]=h),l},i._prime=function(l){if(P[l])return P[l];var h;if(l==="k256")h=new H;else if(l==="p224")h=new G;else if(l==="p192")h=new z;else if(l==="p25519")h=new Y;else throw new Error("Unknown prime "+l);return P[l]=h,h};function q(v){if(typeof v=="string"){var l=i._prime(v);this.m=l.p,this.prime=l}else n(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}q.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},q.prototype._verify2=function(l,h){n((l.negative|h.negative)===0,"red works only with positives"),n(l.red&&l.red===h.red,"red works only with red numbers")},q.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(g(l,l.umod(this.m)._forceRed(this)),l)},q.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},q.prototype.add=function(l,h){this._verify2(l,h);var y=l.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},q.prototype.iadd=function(l,h){this._verify2(l,h);var y=l.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},q.prototype.sub=function(l,h){this._verify2(l,h);var y=l.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},q.prototype.isub=function(l,h){this._verify2(l,h);var y=l.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},q.prototype.shl=function(l,h){return this._verify1(l),this.imod(l.ushln(h))},q.prototype.imul=function(l,h){return this._verify2(l,h),this.imod(l.imul(h))},q.prototype.mul=function(l,h){return this._verify2(l,h),this.imod(l.mul(h))},q.prototype.isqr=function(l){return this.imul(l,l.clone())},q.prototype.sqr=function(l){return this.mul(l,l)},q.prototype.sqrt=function(l){if(l.isZero())return l.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(l,y)}for(var S=this.m.subn(1),_=0;!S.isZero()&&S.andln(1)===0;)_++,S.iushrn(1);n(!S.isZero());var T=new i(1).toRed(this),N=T.redNeg(),E=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,E).cmp(N)!==0;)f.redIAdd(N);for(var B=this.pow(f,S),re=this.pow(l,S.addn(1).iushrn(1)),ee=this.pow(l,S),ie=_;ee.cmp(T)!==0;){for(var ze=ee,ve=0;ze.cmp(T)!==0;ve++)ze=ze.redSqr();n(ve<ie);var _e=this.pow(B,new i(1).iushln(ie-ve-1));re=re.redMul(_e),B=_e.redSqr(),ee=ee.redMul(B),ie=ve}return re},q.prototype.invm=function(l){var h=l._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},q.prototype.pow=function(l,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return l.clone();var y=4,S=new Array(1<<y);S[0]=new i(1).toRed(this),S[1]=l;for(var _=2;_<S.length;_++)S[_]=this.mul(S[_-1],l);var T=S[0],N=0,E=0,f=h.bitLength()%26;for(f===0&&(f=26),_=h.length-1;_>=0;_--){for(var B=h.words[_],re=f-1;re>=0;re--){var ee=B>>re&1;if(T!==S[0]&&(T=this.sqr(T)),ee===0&&N===0){E=0;continue}N<<=1,N|=ee,E++,!(E!==y&&(_!==0||re!==0))&&(T=this.mul(T,S[N]),E=0,N=0)}f=26}return T},q.prototype.convertTo=function(l){var h=l.umod(this.m);return h===l?h.clone():h},q.prototype.convertFrom=function(l){var h=l.clone();return h.red=null,h},i.mont=function(l){return new V(l)};function V(v){q.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,q),V.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},V.prototype.convertFrom=function(l){var h=this.imod(l.mul(this.rinv));return h.red=null,h},V.prototype.imul=function(l,h){if(l.isZero()||h.isZero())return l.words[0]=0,l.length=1,l;var y=l.imul(h),S=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=y.isub(S).iushrn(this.shift),T=_;return _.cmp(this.m)>=0?T=_.isub(this.m):_.cmpn(0)<0&&(T=_.iadd(this.m)),T._forceRed(this)},V.prototype.mul=function(l,h){if(l.isZero()||h.isZero())return new i(0)._forceRed(this);var y=l.mul(h),S=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=y.isub(S).iushrn(this.shift),T=_;return _.cmp(this.m)>=0?T=_.isub(this.m):_.cmpn(0)<0&&(T=_.iadd(this.m)),T._forceRed(this)},V.prototype.invm=function(l){var h=this.imod(l._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,bn)})(cl);var Ad=cl.exports;const fu=us(Ad);var ic={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=le,n=t.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof c=="string"?p.fill(a,c):p.fill(a):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(ic,ic.exports);var xp=ic.exports,As=xp.Buffer;function Rp(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=As.from(m)),!As.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var R=0,x=0,k=0,M=m.length;k!==M&&m[k]===0;)k++,R++;for(var C=(M-k)*p+1>>>0,L=new Uint8Array(C);k!==M;){for(var U=m[k],P=0,K=C-1;(U!==0||P<x)&&K!==-1;K--,P++)U+=256*L[K]>>>0,L[K]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");x=P,k++}for(var H=C-x;H!==C&&L[H]===0;)H++;for(var G=a.repeat(R);H<C;++H)G+=r.charAt(L[H]);return G}function b(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return As.alloc(0);for(var R=0,x=0,k=0;m[R]===a;)x++,R++;for(var M=(m.length-R)*c+1>>>0,C=new Uint8Array(M);R<m.length;){var L=m.charCodeAt(R);if(L>255)return;var U=e[L];if(U===255)return;for(var P=0,K=M-1;(U!==0||P<k)&&K!==-1;K--,P++)U+=o*C[K]>>>0,C[K]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");k=P,R++}for(var H=M-k;H!==M&&C[H]===0;)H++;var G=As.allocUnsafe(x+(M-H));G.fill(0,0,x);for(var z=x;H!==M;)G[z++]=C[H++];return G}function I(m){var R=b(m);if(R)return R;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:b,decode:I}}var Bp=Rp,Mp=Bp,Tp="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",kd=Mp(Tp);const Nt=us(kd),hu=ld;var Pt={};function jn(r,e,t){return e<=r&&r<=t}function Wo(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Cp(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),n+=1}else s.push(65533)}n+=1}return s}function Lp(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var lo=-1;function ll(r){this.tokens=[].slice.call(r)}ll.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():lo},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var wi=-1;function La(r,e){if(r)throw TypeError("Decoder error");return e||65533}var uo="utf-8";function fo(r,e){if(!(this instanceof fo))return new fo(r,e);if(r=r!==void 0?String(r).toLowerCase():uo,r!==uo)throw new Error("Encoding not supported. Only utf-8 is supported");e=Wo(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}fo.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Wo(t),this._streaming||(this._decoder=new Pp({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new ll(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==wi);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===wi)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Lp(i)}};function ho(r,e){if(!(this instanceof ho))return new ho(r,e);if(r=r!==void 0?String(r).toLowerCase():uo,r!==uo)throw new Error("Encoding not supported. Only utf-8 is supported");e=Wo(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ho.prototype={encode:function(e,t){e=e?String(e):"",t=Wo(t),this._streaming||(this._encoder=new Np(this._options)),this._streaming=!!t.stream;for(var n=[],s=new ll(Cp(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==wi);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==wi;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Pp(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===lo&&s!==0)return s=0,La(e);if(c===lo)return wi;if(s===0){if(jn(c,0,127))return c;if(jn(c,194,223))s=1,t=c-192;else if(jn(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,t=c-224;else if(jn(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,t=c-240;else return La(e);return t=t<<6*s,null}if(!jn(c,i,o))return t=s=n=0,i=128,o=191,a.prepend(c),La(e);if(i=128,o=191,n+=1,t+=c-128<<6*(s-n),n!==s)return null;var p=t;return t=s=n=0,p}}function Np(r){r.fatal,this.handler=function(e,t){if(t===lo)return wi;if(jn(t,0,127))return t;var n,s;jn(t,128,2047)?(n=1,s=192):jn(t,2048,65535)?(n=2,s=224):jn(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Op=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:fo,TextEncoder:ho},Symbol.toStringTag,{value:"Module"})),Wp=Xn(Op);var Up=bn&&bn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zp=bn&&bn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Cn=bn&&bn.__decorate||function(r,e,t,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i},Fp=bn&&bn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&Up(e,r,t);return zp(e,r),e},Id=bn&&bn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pt,"__esModule",{value:!0});var xd=Pt.deserializeUnchecked=Ld=Pt.deserialize=Cd=Pt.serialize=Pt.BinaryReader=Pt.BinaryWriter=Pt.BorshError=Pt.baseDecode=Pt.baseEncode=void 0;const cr=Id(Ad),Rd=Id(kd),Dp=Fp(Wp),Kp=typeof TextDecoder!="function"?Dp.TextDecoder:TextDecoder,$p=new Kp("utf-8",{fatal:!0});function qp(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),Rd.default.encode(Buffer.from(r))}Pt.baseEncode=qp;function Hp(r){return Buffer.from(Rd.default.decode(r))}Pt.baseDecode=Hp;const Pa=1024;class jt extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Pt.BorshError=jt;class Bd{constructor(){this.buf=Buffer.alloc(Pa),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Pa)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new cr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new cr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new cr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new cr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Pa)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}Pt.BinaryWriter=Bd;function Ln(r,e,t){const n=t.value;t.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new jt("Reached the end of buffer when deserializing")}throw i}}}class cn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new cr.default(e,"le")}readU128(){const e=this.readBuffer(16);return new cr.default(e,"le")}readU256(){const e=this.readBuffer(32);return new cr.default(e,"le")}readU512(){const e=this.readBuffer(64);return new cr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new jt(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return $p.decode(t)}catch(n){throw new jt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let s=0;s<t;++s)n.push(e());return n}}Cn([Ln],cn.prototype,"readU8",null);Cn([Ln],cn.prototype,"readU16",null);Cn([Ln],cn.prototype,"readU32",null);Cn([Ln],cn.prototype,"readU64",null);Cn([Ln],cn.prototype,"readU128",null);Cn([Ln],cn.prototype,"readU256",null);Cn([Ln],cn.prototype,"readU512",null);Cn([Ln],cn.prototype,"readString",null);Cn([Ln],cn.prototype,"readFixedArray",null);Cn([Ln],cn.prototype,"readArray",null);Pt.BinaryReader=cn;function Md(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Sr(r,e,t,n,s){try{if(typeof n=="string")s[`write${Md(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new jt(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new jt(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let i=0;i<n[1];i++)Sr(r,null,t[i],n[0],s)}else s.writeArray(t,i=>{Sr(r,e,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),Sr(r,e,t,n.type,s));break}case"map":{s.writeU32(t.size),t.forEach((i,o)=>{Sr(r,e,o,n.key,s),Sr(r,e,i,n.value,s)});break}default:throw new jt(`FieldType ${n} unrecognized`)}else Td(r,t,s)}catch(i){throw i instanceof jt&&i.addToFieldPath(e),i}}function Td(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const n=r.get(e.constructor);if(!n)throw new jt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Sr(r,s,e[s],i,t)});else if(n.kind==="enum"){const s=e[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){t.writeU8(i),Sr(r,o,e[o],a,t);break}}}else throw new jt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function jp(r,e,t=Bd){const n=new t;return Td(r,e,n),n.toArray()}var Cd=Pt.serialize=jp;function Er(r,e,t,n){try{if(typeof t=="string")return n[`read${Md(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){const s=[];for(let i=0;i<t[1];i++)s.push(Er(r,null,t[0],n));return s}else return n.readArray(()=>Er(r,e,t[0],n))}if(t.kind==="option")return n.readU8()?Er(r,e,t.type,n):void 0;if(t.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=Er(r,e,t.key,n),c=Er(r,e,t.value,n);s.set(a,c)}return s}return ul(r,t,n)}catch(s){throw s instanceof jt&&s.addToFieldPath(e),s}}function ul(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const n=r.get(e);if(!n)throw new jt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(e).fields)s[i]=Er(r,i,o,t);return new e(s)}if(n.kind==="enum"){const s=t.readU8();if(s>=n.values.length)throw new jt(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=Er(r,i,o,t);return new e({[i]:a})}throw new jt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function Vp(r,e,t,n=cn){const s=new n(t),i=ul(r,e,s);if(s.offset<t.length)throw new jt(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return i}var Ld=Pt.deserialize=Vp;function Gp(r,e,t,n=cn){const s=new n(t);return ul(r,e,s)}xd=Pt.deserializeUnchecked=Gp;var $={};Object.defineProperty($,"__esModule",{value:!0});$.s16=$.s8=$.nu64be=$.u48be=$.u40be=$.u32be=$.u24be=$.u16be=Ct=$.nu64=$.u48=$.u40=se=$.u32=$.u24=dn=$.u16=Ie=$.u8=hr=$.offset=$.greedy=$.Constant=$.UTF8=$.CString=$.Blob=$.Boolean=$.BitField=$.BitStructure=$.VariantLayout=$.Union=$.UnionLayoutDiscriminator=$.UnionDiscriminator=$.Structure=$.Sequence=$.DoubleBE=$.Double=$.FloatBE=$.Float=$.NearInt64BE=$.NearInt64=$.NearUInt64BE=$.NearUInt64=$.IntBE=$.Int=$.UIntBE=$.UInt=$.OffsetLayout=$.GreedyCount=$.ExternalLayout=$.bindConstructorLayout=$.nameWithProperty=$.Layout=$.uint8ArrayToBuffer=$.checkUint8Array=void 0;$.constant=$.utf8=$.cstr=Ke=$.blob=$.unionLayoutDiscriminator=$.union=Ot=$.seq=$.bits=oe=$.struct=$.f64be=$.f64=$.f32be=$.f32=$.ns64be=$.s48be=$.s40be=$.s32be=$.s24be=$.s16be=rn=$.ns64=$.s48=$.s40=$.s32=$.s24=void 0;const dl=le;function Bi(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$.checkUint8Array=Bi;function Be(r){return Bi(r),dl.Buffer.from(r.buffer,r.byteOffset,r.length)}$.uint8ArrayToBuffer=Be;class Le{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}$.Layout=Le;function fl(r,e){return e.property?r+"["+e.property+"]":r}$.nameWithProperty=fl;function Yp(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Le))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}$.bindConstructorLayout=Yp;class Xt extends Le{isCount(){throw new Error("ExternalLayout is abstract")}}$.ExternalLayout=Xt;class Pd extends Xt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Bi(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}$.GreedyCount=Pd;class hl extends Xt{constructor(e,t=0,n){if(!(e instanceof Le))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof fn||this.layout instanceof wn}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}$.OffsetLayout=hl;class fn extends Le{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readUIntLE(t,this.span)}encode(e,t,n=0){return Be(t).writeUIntLE(e,n,this.span),this.span}}$.UInt=fn;class wn extends Le{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readUIntBE(t,this.span)}encode(e,t,n=0){return Be(t).writeUIntBE(e,n,this.span),this.span}}$.UIntBE=wn;class zr extends Le{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readIntLE(t,this.span)}encode(e,t,n=0){return Be(t).writeIntLE(e,n,this.span),this.span}}$.Int=zr;class Mi extends Le{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readIntBE(t,this.span)}encode(e,t,n=0){return Be(t).writeIntBE(e,n,this.span),this.span}}$.IntBE=Mi;const sc=Math.pow(2,32);function Uo(r){const e=Math.floor(r/sc),t=r-e*sc;return{hi32:e,lo32:t}}function zo(r,e){return r*sc+e}class Nd extends Le{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readUInt32LE(t),i=n.readUInt32LE(t+4);return zo(i,s)}encode(e,t,n=0){const s=Uo(e),i=Be(t);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}$.NearUInt64=Nd;class Od extends Le{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readUInt32BE(t),i=n.readUInt32BE(t+4);return zo(s,i)}encode(e,t,n=0){const s=Uo(e),i=Be(t);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}$.NearUInt64BE=Od;class Wd extends Le{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readUInt32LE(t),i=n.readInt32LE(t+4);return zo(i,s)}encode(e,t,n=0){const s=Uo(e),i=Be(t);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}$.NearInt64=Wd;class Ud extends Le{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readInt32BE(t),i=n.readUInt32BE(t+4);return zo(s,i)}encode(e,t,n=0){const s=Uo(e),i=Be(t);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}$.NearInt64BE=Ud;class zd extends Le{constructor(e){super(4,e)}decode(e,t=0){return Be(e).readFloatLE(t)}encode(e,t,n=0){return Be(t).writeFloatLE(e,n),4}}$.Float=zd;class Fd extends Le{constructor(e){super(4,e)}decode(e,t=0){return Be(e).readFloatBE(t)}encode(e,t,n=0){return Be(t).writeFloatBE(e,n),4}}$.FloatBE=Fd;class Dd extends Le{constructor(e){super(8,e)}decode(e,t=0){return Be(e).readDoubleLE(t)}encode(e,t,n=0){return Be(t).writeDoubleLE(e,n),8}}$.Double=Dd;class Kd extends Le{constructor(e){super(8,e)}decode(e,t=0){return Be(e).readDoubleBE(t)}encode(e,t,n=0){return Be(t).writeDoubleBE(e,n),8}}$.DoubleBE=Kd;class $d extends Le{constructor(e,t,n){if(!(e instanceof Le))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Xt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof Xt)&&0<e.span&&(s=t*e.span),super(s,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Xt&&(s=s.decode(e,t)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e,t=0){const n=[];let s=0,i=this.count;for(i instanceof Xt&&(i=i.decode(e,t));s<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return n}encode(e,t,n=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,t,n+o),0);return this.count instanceof Xt&&this.count.encode(e.length,t,n),i}}$.Sequence=$d;class qd extends Le{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof Le,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){Bi(e);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const p=e[a.property];p!==void 0&&(o=a.encode(p,t,n),0>c&&(c=a.getSpan(t,n)))}i=n,n+=c}return i+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}$.Structure=qd;class pl{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}$.UnionDiscriminator=pl;class po extends pl{constructor(e,t){if(!(e instanceof Xt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}$.UnionLayoutDiscriminator=po;class gl extends Le{constructor(e,t,n){let s;if(e instanceof fn||e instanceof wn)s=new po(new hl(e));else if(e instanceof Xt&&e.isCount())s=new po(e);else if(e instanceof pl)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Le))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof fn||e instanceof wn)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof fn||e instanceof wn,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const s=this.discriminator,i=s.decode(e,t),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(e,t+c)}else n=o.decode(e,t);return n}encode(e,t,n=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new Hd(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}}$.Union=gl;class Hd extends Le{constructor(e,t,n,s){if(!(e instanceof gl))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Le))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+n)),n+s}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),i+=this.layout.getSpan(t,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}$.VariantLayout=Hd;function Gr(r){return 0>r&&(r+=4294967296),r}class yl extends Le{constructor(e,t,n){if(!(e instanceof fn||e instanceof wn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Gr(i),this},this._packedGetValue=function(){return s}}decode(e,t=0){const n=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(e));return n}encode(e,t,n=0){const s=this.word.decode(t,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new ml(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new jd(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}$.BitStructure=yl;class ml{constructor(e,t,n){if(!(e instanceof yl))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(t+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-t),this.wordMask=Gr(this.valueMask<<this.start),this.property=n}decode(e,t){const n=this.container._packedGetValue();return Gr(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Gr(e&this.valueMask))throw new TypeError(fl("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=Gr(e<<this.start);this.container._packedSetValue(Gr(t&~this.wordMask)|n)}}$.BitField=ml;let jd=class extends ml{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};$.Boolean=jd;class Vd extends Le{constructor(e,t){if(!(e instanceof Xt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Xt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),Be(e).slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof Xt&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(fl("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>t.length)throw new RangeError("encoding overruns Uint8Array");const i=Be(e);return Be(t).write(i.toString("hex"),n,s,"hex"),this.length instanceof Xt&&this.length.encode(s,t,n),s}}$.Blob=Vd;class Gd extends Le{constructor(e){super(-1,e)}getSpan(e,t=0){Bi(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return Be(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const s=dl.Buffer.from(e,"utf8"),i=s.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");const o=Be(t);return s.copy(o,n),o[n+i]=0,i+1}}$.CString=Gd;class Yd extends Le{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Bi(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Be(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const s=dl.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(Be(t),n),i}}$.UTF8=Yd;class Zd extends Le{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}$.Constant=Zd;$.greedy=(r,e)=>new Pd(r,e);var hr=$.offset=(r,e,t)=>new hl(r,e,t),Ie=$.u8=r=>new fn(1,r),dn=$.u16=r=>new fn(2,r);$.u24=r=>new fn(3,r);var se=$.u32=r=>new fn(4,r);$.u40=r=>new fn(5,r);$.u48=r=>new fn(6,r);var Ct=$.nu64=r=>new Nd(r);$.u16be=r=>new wn(2,r);$.u24be=r=>new wn(3,r);$.u32be=r=>new wn(4,r);$.u40be=r=>new wn(5,r);$.u48be=r=>new wn(6,r);$.nu64be=r=>new Od(r);$.s8=r=>new zr(1,r);$.s16=r=>new zr(2,r);$.s24=r=>new zr(3,r);$.s32=r=>new zr(4,r);$.s40=r=>new zr(5,r);$.s48=r=>new zr(6,r);var rn=$.ns64=r=>new Wd(r);$.s16be=r=>new Mi(2,r);$.s24be=r=>new Mi(3,r);$.s32be=r=>new Mi(4,r);$.s40be=r=>new Mi(5,r);$.s48be=r=>new Mi(6,r);$.ns64be=r=>new Ud(r);$.f32=r=>new zd(r);$.f32be=r=>new Fd(r);$.f64=r=>new Dd(r);$.f64be=r=>new Kd(r);var oe=$.struct=(r,e,t)=>new qd(r,e,t);$.bits=(r,e,t)=>new yl(r,e,t);var Ot=$.seq=(r,e,t)=>new $d(r,e,t);$.union=(r,e,t)=>new gl(r,e,t);$.unionLayoutDiscriminator=(r,e)=>new po(r,e);var Ke=$.blob=(r,e)=>new Vd(r,e);$.cstr=r=>new Gd(r);$.utf8=(r,e)=>new Yd(r,e);$.constant=(r,e)=>new Zd(r,e);var Zp=8078e3,Jp=8078001,Xp=8078004,Qp=8078005,eg=8078006,tg=8078011;function Jd(r){return Array.isArray(r)?"%5B"+r.map(Jd).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function ng([r,e]){return`${r}=${Jd(e)}`}function rg(r){const e=Object.entries(r).map(ng).join("&");return btoa(e)}function ig(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${rg(e)}'`),`${t}\``}}var ui=class extends Error{constructor(...[e,t]){let n,s;if(t){const{cause:o,...a}=t;o&&(s={cause:o}),Object.keys(a).length>0&&(n=a)}const i=ig(e,n);super(i,s);Et(this,"cause",this.cause);Et(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function sg(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function og(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(sg(e,r));return r.write(e,t,0),t}})}function ag(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function Vr(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function cg(r,e){if(Vr(r)!==Vr(e))throw new ui(Xp);if(Vr(r)&&Vr(e)&&r.fixedSize!==e.fixedSize)throw new ui(Qp,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!Vr(r)&&!Vr(e)&&r.maxSize!==e.maxSize)throw new ui(eg,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function lg(r,e,t=0){if(e.length-t<=0)throw new ui(Zp,{codecDescription:r})}function ug(r,e,t,n=0){const s=t.length-n;if(s<e)throw new ui(Jp,{bytesLength:s,codecDescription:r,expected:e})}function dg(r,e,t,n){if(n<e||n>t)throw new ui(tg,{codecDescription:r,max:t,min:e,value:n})}function Xd(r){return(r==null?void 0:r.endian)!==1}function fg(r){return og({fixedSize:r.size,write(e,t,n){r.range&&dg(r.name,r.range[0],r.range[1],e);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),e,Xd(r.config)),t.set(new Uint8Array(s),n),n+r.size}})}function hg(r){return ag({fixedSize:r.size,read(e,t=0){lg(r.name,e,t),ug(r.name,r.size,e,t);const n=new DataView(pg(e,t,r.size));return[r.get(n,Xd(r.config)),t+r.size]}})}function pg(r,e,t){const n=r.byteOffset+(e??0),s=t??r.byteLength;return r.buffer.slice(n,n+s)}var Qd=(r={})=>fg({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),gg=(r={})=>hg({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),yg=(r={})=>cg(Qd(r),gg(r));class mg extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function wg(r){return fs(r)&&typeof r[Symbol.iterator]=="function"}function fs(r){return typeof r=="object"&&r!=null}function go(r){return fs(r)&&!Array.isArray(r)}function vn(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function bg(r){const{done:e,value:t}=r.next();return e?void 0:t}function vg(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${vn(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:c}}function*pu(r,e,t,n){wg(r)||(r=[r]);for(const s of r){const i=vg(s,e,t,n);i&&(yield i)}}function*wl(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,a={path:n,branch:s,mask:o};i&&(r=e.coercer(r,a));let c="valid";for(const p of e.validator(r,a))p.explanation=t.message,c="not_valid",yield[p,void 0];for(let[p,g,b]of e.entries(r,a)){const I=wl(g,b,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,g],coerce:i,mask:o,message:t.message});for(const m of I)m[0]?(c=m[0].refinement!=null?"not_refined":"not_valid",yield[m[0],void 0]):i&&(g=m[1],p===void 0?r=g:r instanceof Map?r.set(p,g):r instanceof Set?r.add(g):fs(r)&&(g!==void 0||p in r)&&(r[p]=g))}if(c!=="not_valid")for(const p of e.refiner(r,a))p.explanation=t.message,c="not_refined",yield[p,void 0];c==="valid"&&(yield[void 0,r])}let Pn=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(c,p)=>{const g=s(c,p);return pu(g,p,this,c)}:this.validator=()=>[],i?this.refiner=(c,p)=>{const g=i(c,p);return pu(g,p,this,c)}:this.refiner=()=>[]}assert(e,t){return ef(e,this,t)}create(e,t){return Q(e,this,t)}is(e){return tf(e,this)}mask(e,t){return Sg(e,this,t)}validate(e,t={}){return hs(e,this,t)}};function ef(r,e,t){const n=hs(r,e,{message:t});if(n[0])throw n[0]}function Q(r,e,t){const n=hs(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Sg(r,e,t){const n=hs(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function tf(r,e){return!hs(r,e)[0]}function hs(r,e,t={}){const n=wl(r,e,t),s=bg(n);return s[0]?[new mg(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Fr(r,e){return new Pn({type:r,schema:null,validator:e})}function Eg(){return Fr("any",()=>!0)}function te(r){return new Pn({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${vn(e)}`}})}function Tn(){return Fr("boolean",r=>typeof r=="boolean")}function bl(r){return Fr("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${vn(e)}`)}function Ge(r){const e=vn(r),t=typeof r;return new Pn({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${vn(n)}`}})}function _g(){return Fr("never",()=>!1)}function ne(r){return new Pn({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function D(){return Fr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${vn(r)}`)}function de(r){return new Pn({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function nf(r,e){return new Pn({type:"record",schema:null,*entries(t){if(fs(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return go(t)||`Expected an object, but received: ${vn(t)}`},coercer(t){return go(t)?{...t}:t}})}function J(){return Fr("string",r=>typeof r=="string"||`Expected a string, but received: ${vn(r)}`)}function vl(r){const e=_g();return new Pn({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${vn(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Z(r){const e=Object.keys(r);return new Pn({type:"type",schema:r,*entries(t){if(fs(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return go(t)||`Expected an object, but received: ${vn(t)}`},coercer(t){return go(t)?{...t}:t}})}function Vt(r){const e=r.map(t=>t.type).join(" | ");return new Pn({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=wl(t,i,n),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${vn(t)}`,...s]}})}function Ti(){return Fr("unknown",()=>!0)}function ps(r,e,t){return new Pn({...r,coercer:(n,s)=>tf(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var ks,Ag=new Uint8Array(16);function rf(){if(!ks&&(ks=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ks))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ks(Ag)}const kg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Fo(r){return typeof r=="string"&&kg.test(r)}var Tt=[];for(var Na=0;Na<256;++Na)Tt.push((Na+256).toString(16).substr(1));function Do(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Tt[r[e+0]]+Tt[r[e+1]]+Tt[r[e+2]]+Tt[r[e+3]]+"-"+Tt[r[e+4]]+Tt[r[e+5]]+"-"+Tt[r[e+6]]+Tt[r[e+7]]+"-"+Tt[r[e+8]]+Tt[r[e+9]]+"-"+Tt[r[e+10]]+Tt[r[e+11]]+Tt[r[e+12]]+Tt[r[e+13]]+Tt[r[e+14]]+Tt[r[e+15]]).toLowerCase();if(!Fo(t))throw TypeError("Stringified UUID is invalid");return t}var gu,Oa,Wa=0,Ua=0;function Ig(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||gu,o=r.clockseq!==void 0?r.clockseq:Oa;if(i==null||o==null){var a=r.random||(r.rng||rf)();i==null&&(i=gu=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Oa=(a[6]<<8|a[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:Ua+1,g=c-Wa+(p-Ua)/1e4;if(g<0&&r.clockseq===void 0&&(o=o+1&16383),(g<0||c>Wa)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Wa=c,Ua=p,Oa=o,c+=122192928e5;var b=((c&268435455)*1e4+p)%4294967296;s[n++]=b>>>24&255,s[n++]=b>>>16&255,s[n++]=b>>>8&255,s[n++]=b&255;var I=c/4294967296*1e4&268435455;s[n++]=I>>>8&255,s[n++]=I&255,s[n++]=I>>>24&15|16,s[n++]=I>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var m=0;m<6;++m)s[n+m]=i[m];return e||Do(s)}function sf(r){if(!Fo(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function xg(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Rg="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Bg="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function of(r,e,t){function n(s,i,o,a){if(typeof s=="string"&&(s=xg(s)),typeof i=="string"&&(i=sf(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var p=0;p<16;++p)o[a+p]=c[p];return o}return Do(c)}try{n.name=r}catch{}return n.DNS=Rg,n.URL=Bg,n}function Mg(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return Tg(Cg(Lg(r),r.length*8))}function Tg(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function af(r){return(r+64>>>9<<4)+14+1}function Cg(r,e){r[e>>5]|=128<<e%32,r[af(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=t,c=n,p=s,g=i;t=zt(t,n,s,i,r[o],7,-680876936),i=zt(i,t,n,s,r[o+1],12,-389564586),s=zt(s,i,t,n,r[o+2],17,606105819),n=zt(n,s,i,t,r[o+3],22,-1044525330),t=zt(t,n,s,i,r[o+4],7,-176418897),i=zt(i,t,n,s,r[o+5],12,1200080426),s=zt(s,i,t,n,r[o+6],17,-1473231341),n=zt(n,s,i,t,r[o+7],22,-45705983),t=zt(t,n,s,i,r[o+8],7,1770035416),i=zt(i,t,n,s,r[o+9],12,-1958414417),s=zt(s,i,t,n,r[o+10],17,-42063),n=zt(n,s,i,t,r[o+11],22,-1990404162),t=zt(t,n,s,i,r[o+12],7,1804603682),i=zt(i,t,n,s,r[o+13],12,-40341101),s=zt(s,i,t,n,r[o+14],17,-1502002290),n=zt(n,s,i,t,r[o+15],22,1236535329),t=Ft(t,n,s,i,r[o+1],5,-165796510),i=Ft(i,t,n,s,r[o+6],9,-1069501632),s=Ft(s,i,t,n,r[o+11],14,643717713),n=Ft(n,s,i,t,r[o],20,-373897302),t=Ft(t,n,s,i,r[o+5],5,-701558691),i=Ft(i,t,n,s,r[o+10],9,38016083),s=Ft(s,i,t,n,r[o+15],14,-660478335),n=Ft(n,s,i,t,r[o+4],20,-405537848),t=Ft(t,n,s,i,r[o+9],5,568446438),i=Ft(i,t,n,s,r[o+14],9,-1019803690),s=Ft(s,i,t,n,r[o+3],14,-187363961),n=Ft(n,s,i,t,r[o+8],20,1163531501),t=Ft(t,n,s,i,r[o+13],5,-1444681467),i=Ft(i,t,n,s,r[o+2],9,-51403784),s=Ft(s,i,t,n,r[o+7],14,1735328473),n=Ft(n,s,i,t,r[o+12],20,-1926607734),t=Dt(t,n,s,i,r[o+5],4,-378558),i=Dt(i,t,n,s,r[o+8],11,-2022574463),s=Dt(s,i,t,n,r[o+11],16,1839030562),n=Dt(n,s,i,t,r[o+14],23,-35309556),t=Dt(t,n,s,i,r[o+1],4,-1530992060),i=Dt(i,t,n,s,r[o+4],11,1272893353),s=Dt(s,i,t,n,r[o+7],16,-155497632),n=Dt(n,s,i,t,r[o+10],23,-1094730640),t=Dt(t,n,s,i,r[o+13],4,681279174),i=Dt(i,t,n,s,r[o],11,-358537222),s=Dt(s,i,t,n,r[o+3],16,-722521979),n=Dt(n,s,i,t,r[o+6],23,76029189),t=Dt(t,n,s,i,r[o+9],4,-640364487),i=Dt(i,t,n,s,r[o+12],11,-421815835),s=Dt(s,i,t,n,r[o+15],16,530742520),n=Dt(n,s,i,t,r[o+2],23,-995338651),t=Kt(t,n,s,i,r[o],6,-198630844),i=Kt(i,t,n,s,r[o+7],10,1126891415),s=Kt(s,i,t,n,r[o+14],15,-1416354905),n=Kt(n,s,i,t,r[o+5],21,-57434055),t=Kt(t,n,s,i,r[o+12],6,1700485571),i=Kt(i,t,n,s,r[o+3],10,-1894986606),s=Kt(s,i,t,n,r[o+10],15,-1051523),n=Kt(n,s,i,t,r[o+1],21,-2054922799),t=Kt(t,n,s,i,r[o+8],6,1873313359),i=Kt(i,t,n,s,r[o+15],10,-30611744),s=Kt(s,i,t,n,r[o+6],15,-1560198380),n=Kt(n,s,i,t,r[o+13],21,1309151649),t=Kt(t,n,s,i,r[o+4],6,-145523070),i=Kt(i,t,n,s,r[o+11],10,-1120210379),s=Kt(s,i,t,n,r[o+2],15,718787259),n=Kt(n,s,i,t,r[o+9],21,-343485551),t=lr(t,a),n=lr(n,c),s=lr(s,p),i=lr(i,g)}return[t,n,s,i]}function Lg(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(af(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function lr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function Pg(r,e){return r<<e|r>>>32-e}function Ko(r,e,t,n,s,i){return lr(Pg(lr(lr(e,r),lr(n,i)),s),t)}function zt(r,e,t,n,s,i,o){return Ko(e&t|~e&n,r,e,s,i,o)}function Ft(r,e,t,n,s,i,o){return Ko(e&n|t&~n,r,e,s,i,o)}function Dt(r,e,t,n,s,i,o){return Ko(e^t^n,r,e,s,i,o)}function Kt(r,e,t,n,s,i,o){return Ko(t^(e|~n),r,e,s,i,o)}var Ng=of("v3",48,Mg);const Og=Ng;function Wg(r,e,t){r=r||{};var n=r.random||(r.rng||rf)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return Do(n)}function Ug(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function za(r,e){return r<<e|r>>>32-e}function zg(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var p=new Uint32Array(16),g=0;g<16;++g)p[g]=r[c*64+g*4]<<24|r[c*64+g*4+1]<<16|r[c*64+g*4+2]<<8|r[c*64+g*4+3];a[c]=p}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var b=0;b<o;++b){for(var I=new Uint32Array(80),m=0;m<16;++m)I[m]=a[b][m];for(var R=16;R<80;++R)I[R]=za(I[R-3]^I[R-8]^I[R-14]^I[R-16],1);for(var x=t[0],k=t[1],M=t[2],C=t[3],L=t[4],U=0;U<80;++U){var P=Math.floor(U/20),K=za(x,5)+Ug(P,k,M,C)+L+e[P]+I[U]>>>0;L=C,C=M,M=za(k,30)>>>0,k=x,x=K}t[0]=t[0]+x>>>0,t[1]=t[1]+k>>>0,t[2]=t[2]+M>>>0,t[3]=t[3]+C>>>0,t[4]=t[4]+L>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Fg=of("v5",80,zg);const Dg=Fg,Kg="00000000-0000-0000-0000-000000000000";function $g(r){if(!Fo(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const qg=Object.freeze(Object.defineProperty({__proto__:null,NIL:Kg,parse:sf,stringify:Do,v1:Ig,v3:Og,v4:Wg,v5:Dg,validate:Fo,version:$g},Symbol.toStringTag,{value:"Module"})),cf=Xn(qg),Hg=cf.v4,jg=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof t>"u"){const o=typeof n.generator=="function"?n.generator:function(){return Hg()};i.id=o(i,n)}else s===2&&t===null?n.notificationIdNull&&(i.id=null):i.id=t;return i};var Vg=jg;const Gg=cf.v4,Yg=Vg,is=function(r,e){if(!(this instanceof is))return new is(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Gg()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};var Zg=is;is.prototype.request=function(r,e,t,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof e=="function")n=e,i=r;else{typeof t=="function"&&(n=t,t=void 0);const p=typeof n=="function";try{i=Yg(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(p)return n(g);throw g}if(!p)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(p){return n(p)}return this.callServer(c,function(p,g){s._parseResponse(p,g,n)}),i};is.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return t(null,n.filter(s),n.filter(i))}else return t(null,n.error,n.result);t(null,n)};const Jg=us(Zg);var lf={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(c,p,g){this.fn=c,this.context=p,this.once=g||!1}function i(c,p,g,b,I){if(typeof g!="function")throw new TypeError("The listener must be a function");var m=new s(g,b||c,I),R=t?t+p:p;return c._events[R]?c._events[R].fn?c._events[R]=[c._events[R],m]:c._events[R].push(m):(c._events[R]=m,c._eventsCount++),c}function o(c,p){--c._eventsCount===0?c._events=new n:delete c._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],g,b;if(this._eventsCount===0)return p;for(b in g=this._events)e.call(g,b)&&p.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},a.prototype.listeners=function(p){var g=t?t+p:p,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var I=0,m=b.length,R=new Array(m);I<m;I++)R[I]=b[I].fn;return R},a.prototype.listenerCount=function(p){var g=t?t+p:p,b=this._events[g];return b?b.fn?1:b.length:0},a.prototype.emit=function(p,g,b,I,m,R){var x=t?t+p:p;if(!this._events[x])return!1;var k=this._events[x],M=arguments.length,C,L;if(k.fn){switch(k.once&&this.removeListener(p,k.fn,void 0,!0),M){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,g),!0;case 3:return k.fn.call(k.context,g,b),!0;case 4:return k.fn.call(k.context,g,b,I),!0;case 5:return k.fn.call(k.context,g,b,I,m),!0;case 6:return k.fn.call(k.context,g,b,I,m,R),!0}for(L=1,C=new Array(M-1);L<M;L++)C[L-1]=arguments[L];k.fn.apply(k.context,C)}else{var U=k.length,P;for(L=0;L<U;L++)switch(k[L].once&&this.removeListener(p,k[L].fn,void 0,!0),M){case 1:k[L].fn.call(k[L].context);break;case 2:k[L].fn.call(k[L].context,g);break;case 3:k[L].fn.call(k[L].context,g,b);break;case 4:k[L].fn.call(k[L].context,g,b,I);break;default:if(!C)for(P=1,C=new Array(M-1);P<M;P++)C[P-1]=arguments[P];k[L].fn.apply(k[L].context,C)}}return!0},a.prototype.on=function(p,g,b){return i(this,p,g,b,!1)},a.prototype.once=function(p,g,b){return i(this,p,g,b,!0)},a.prototype.removeListener=function(p,g,b,I){var m=t?t+p:p;if(!this._events[m])return this;if(!g)return o(this,m),this;var R=this._events[m];if(R.fn)R.fn===g&&(!I||R.once)&&(!b||R.context===b)&&o(this,m);else{for(var x=0,k=[],M=R.length;x<M;x++)(R[x].fn!==g||I&&!R[x].once||b&&R[x].context!==b)&&k.push(R[x]);k.length?this._events[m]=k.length===1?k[0]:k:o(this,m)}return this},a.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(lf);var Xg=lf.exports;const $o=us(Xg);var Qg=class extends $o{constructor(e,t,n){super();Et(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,t,n){const s=n||t;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function ey(r,e){return new Qg(r,e)}var ty=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},ny=class extends $o{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,p){super();Et(this,"address");Et(this,"rpc_id");Et(this,"queue");Et(this,"options");Et(this,"autoconnect");Et(this,"ready");Et(this,"reconnect");Et(this,"reconnect_timer_id");Et(this,"reconnect_interval");Et(this,"max_reconnects");Et(this,"rest_options");Et(this,"current_reconnects");Et(this,"generate_request_id");Et(this,"socket");Et(this,"webSocketFactory");Et(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),p?this.dataPack=p:this.dataPack=new ty,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,p=>{if(p)return o(p);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=le.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};const ry=BigInt(0),Pi=BigInt(1),iy=BigInt(2),sy=BigInt(7),oy=BigInt(256),ay=BigInt(113),uf=[],df=[],ff=[];for(let r=0,e=Pi,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],uf.push(2*(5*n+t)),df.push((r+1)*(r+2)/2%64);let s=ry;for(let i=0;i<7;i++)e=(e<<Pi^(e>>sy)*ay)%oy,e&iy&&(s^=Pi<<(Pi<<BigInt(i))-Pi);ff.push(s)}const hf=ad(ff,!0),cy=hf[0],ly=hf[1],yu=(r,e,t)=>t>32?C0(r,e,t):M0(r,e,t),mu=(r,e,t)=>t>32?L0(r,e,t):T0(r,e,t);function uy(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,p=t[c],g=t[c+1],b=yu(p,g,1)^t[a],I=mu(p,g,1)^t[a+1];for(let m=0;m<50;m+=10)r[o+m]^=b,r[o+m+1]^=I}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=df[o],c=yu(s,i,a),p=mu(s,i,a),g=uf[o];s=r[g],i=r[g+1],r[g]=c,r[g+1]=p}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=cy[n],r[1]^=ly[n]}gr(t)}class Sl extends il{constructor(e,t,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,ns(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=v0(this.state)}clone(){return this._cloneInto()}keccak(){eu(this.state32),uy(this.state32,this.rounds),eu(this.state32),this.posOut=0,this.pos=0}update(e){gi(this),e=Co(e),hn(e);const{blockLen:t,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,t&128&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){gi(this,!1),hn(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ns(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rd(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,gr(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Sl(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const dy=(r,e,t)=>sl(()=>new Sl(e,r,t)),wu=(()=>dy(1,136,256/8))();class pf extends il{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,b0(e);const n=Co(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),gr(i)}update(e){return gi(this),this.iHash.update(e),this}digestInto(e){gi(this),hn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gf=(r,e,t)=>new pf(r,e).update(t).digest();gf.create=(r,e)=>new pf(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bu(r){r.lowS!==void 0&&Nr("lowS",r.lowS),r.prehash!==void 0&&Nr("prehash",r.prehash)}class fy extends Error{constructor(e=""){super(e)}}const qn={Err:fy,_tlv:{encode:(r,e)=>{const{Err:t}=qn;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=_s(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?_s(s.length/2|128):"";return _s(r)+i+s+e},decode(r,e){const{Err:t}=qn;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const p=e.subarray(n,n+c);if(p.length!==c)throw new t("tlv.decode: length bytes not complete");if(p[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const g of p)o=o<<8|g;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=qn;if(r<Yi)throw new e("integer: negative integers are not allowed");let t=_s(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=qn;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Lo(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=qn,s=nt("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:p,l:g}=n.decode(2,c);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(p)}},hexFromSig(r){const{_tlv:e,_int:t}=qn,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},Yi=BigInt(0),Zi=BigInt(1),hy=BigInt(2),Is=BigInt(3),py=BigInt(4);function gy(r,e,t){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,e)),t)}return n}function yf(r,e,t){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=nt("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(t&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function yy(r,e={}){const{Fp:t,Fn:n}=_d("weierstrass",r,e),{h:s,n:i}=r;ds(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(G,z,Y){const{x:q,y:V}=z.toAffine(),v=t.toBytes(q);if(Nr("isCompressed",Y),Y){a();const l=!t.isOdd(V);return Zn(mf(l),v)}else return Zn(Uint8Array.of(4),v,t.toBytes(V))}function p(G){hn(G);const z=t.BYTES,Y=z+1,q=2*z+1,V=G.length,v=G[0],l=G.subarray(1);if(V===Y&&(v===2||v===3)){const h=t.fromBytes(l);if(!t.isValid(h))throw new Error("bad point: is not on curve, wrong x");const y=I(h);let S;try{S=t.sqrt(y)}catch(N){const E=N instanceof Error?": "+N.message:"";throw new Error("bad point: is not on curve, sqrt error"+E)}a();const _=t.isOdd(S);return(v&1)===1!==_&&(S=t.neg(S)),{x:h,y:S}}else if(V===q&&v===4){const h=t.fromBytes(l.subarray(z*0,z*1)),y=t.fromBytes(l.subarray(z*1,z*2));if(!m(h,y))throw new Error("bad point: is not on curve");return{x:h,y}}else throw new Error(`bad point: got length ${V}, expected compressed=${Y} or uncompressed=${q}`)}const g=e.toBytes||c,b=e.fromBytes||p,I=gy(t,r.a,r.b);function m(G,z){const Y=t.sqr(z),q=I(G);return t.eql(Y,q)}if(!m(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const R=t.mul(t.pow(r.a,Is),py),x=t.mul(t.sqr(r.b),BigInt(27));if(t.is0(t.add(R,x)))throw new Error("bad curve params: a or b");function k(G,z,Y=!1){if(!t.isValid(z)||Y&&t.is0(z))throw new Error(`bad point coordinate ${G}`);return z}function M(G){if(!(G instanceof P))throw new Error("ProjectivePoint expected")}const C=co((G,z)=>{const{px:Y,py:q,pz:V}=G;if(t.eql(V,t.ONE))return{x:Y,y:q};const v=G.is0();z==null&&(z=v?t.ONE:t.inv(V));const l=t.mul(Y,z),h=t.mul(q,z),y=t.mul(V,z);if(v)return{x:t.ZERO,y:t.ZERO};if(!t.eql(y,t.ONE))throw new Error("invZ was invalid");return{x:l,y:h}}),L=co(G=>{if(G.is0()){if(e.allowInfinityPoint&&!t.is0(G.py))return;throw new Error("bad point: ZERO")}const{x:z,y:Y}=G.toAffine();if(!t.isValid(z)||!t.isValid(Y))throw new Error("bad point: x or y not field elements");if(!m(z,Y))throw new Error("bad point: equation left != right");if(!G.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(G,z,Y,q,V){return Y=new P(t.mul(Y.px,G),Y.py,Y.pz),z=Gi(q,z),Y=Gi(V,Y),z.add(Y)}class P{constructor(z,Y,q){this.px=k("x",z),this.py=k("y",Y,!0),this.pz=k("z",q),Object.freeze(this)}static fromAffine(z){const{x:Y,y:q}=z||{};if(!z||!t.isValid(Y)||!t.isValid(q))throw new Error("invalid affine point");if(z instanceof P)throw new Error("projective point not allowed");return t.is0(Y)&&t.is0(q)?P.ZERO:new P(Y,q,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(z){return wd(P,"pz",z)}static fromBytes(z){return hn(z),P.fromHex(z)}static fromHex(z){const Y=P.fromAffine(b(nt("pointHex",z)));return Y.assertValidity(),Y}static fromPrivateKey(z){const Y=yf(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return P.BASE.multiply(Y(z))}static msm(z,Y){return Ed(P,n,z,Y)}precompute(z=8,Y=!0){return H.setWindowSize(this,z),Y||this.multiply(Is),this}_setWindowSize(z){this.precompute(z)}assertValidity(){L(this)}hasEvenY(){const{y:z}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(z)}equals(z){M(z);const{px:Y,py:q,pz:V}=this,{px:v,py:l,pz:h}=z,y=t.eql(t.mul(Y,h),t.mul(v,V)),S=t.eql(t.mul(q,h),t.mul(l,V));return y&&S}negate(){return new P(this.px,t.neg(this.py),this.pz)}double(){const{a:z,b:Y}=r,q=t.mul(Y,Is),{px:V,py:v,pz:l}=this;let h=t.ZERO,y=t.ZERO,S=t.ZERO,_=t.mul(V,V),T=t.mul(v,v),N=t.mul(l,l),E=t.mul(V,v);return E=t.add(E,E),S=t.mul(V,l),S=t.add(S,S),h=t.mul(z,S),y=t.mul(q,N),y=t.add(h,y),h=t.sub(T,y),y=t.add(T,y),y=t.mul(h,y),h=t.mul(E,h),S=t.mul(q,S),N=t.mul(z,N),E=t.sub(_,N),E=t.mul(z,E),E=t.add(E,S),S=t.add(_,_),_=t.add(S,_),_=t.add(_,N),_=t.mul(_,E),y=t.add(y,_),N=t.mul(v,l),N=t.add(N,N),_=t.mul(N,E),h=t.sub(h,_),S=t.mul(N,T),S=t.add(S,S),S=t.add(S,S),new P(h,y,S)}add(z){M(z);const{px:Y,py:q,pz:V}=this,{px:v,py:l,pz:h}=z;let y=t.ZERO,S=t.ZERO,_=t.ZERO;const T=r.a,N=t.mul(r.b,Is);let E=t.mul(Y,v),f=t.mul(q,l),B=t.mul(V,h),re=t.add(Y,q),ee=t.add(v,l);re=t.mul(re,ee),ee=t.add(E,f),re=t.sub(re,ee),ee=t.add(Y,V);let ie=t.add(v,h);return ee=t.mul(ee,ie),ie=t.add(E,B),ee=t.sub(ee,ie),ie=t.add(q,V),y=t.add(l,h),ie=t.mul(ie,y),y=t.add(f,B),ie=t.sub(ie,y),_=t.mul(T,ee),y=t.mul(N,B),_=t.add(y,_),y=t.sub(f,_),_=t.add(f,_),S=t.mul(y,_),f=t.add(E,E),f=t.add(f,E),B=t.mul(T,B),ee=t.mul(N,ee),f=t.add(f,B),B=t.sub(E,B),B=t.mul(T,B),ee=t.add(ee,B),E=t.mul(f,ee),S=t.add(S,E),E=t.mul(ie,ee),y=t.mul(re,y),y=t.sub(y,E),E=t.mul(re,f),_=t.mul(ie,_),_=t.add(_,E),new P(y,S,_)}subtract(z){return this.add(z.negate())}is0(){return this.equals(P.ZERO)}multiply(z){const{endo:Y}=e;if(!n.isValidNot0(z))throw new Error("invalid scalar: out of range");let q,V;const v=l=>H.wNAFCached(this,l,P.normalizeZ);if(Y){const{k1neg:l,k1:h,k2neg:y,k2:S}=Y.splitScalar(z),{p:_,f:T}=v(h),{p:N,f:E}=v(S);V=T.add(E),q=U(Y.beta,_,N,l,y)}else{const{p:l,f:h}=v(z);q=l,V=h}return P.normalizeZ([q,V])[0]}multiplyUnsafe(z){const{endo:Y}=e,q=this;if(!n.isValid(z))throw new Error("invalid scalar: out of range");if(z===Yi||q.is0())return P.ZERO;if(z===Zi)return q;if(H.hasPrecomputes(this))return this.multiply(z);if(Y){const{k1neg:V,k1:v,k2neg:l,k2:h}=Y.splitScalar(z),{p1:y,p2:S}=ap(P,q,v,h);return U(Y.beta,y,S,V,l)}else return H.wNAFCachedUnsafe(q,z)}multiplyAndAddUnsafe(z,Y,q){const V=this.multiplyUnsafe(Y).add(z.multiplyUnsafe(q));return V.is0()?void 0:V}toAffine(z){return C(this,z)}isTorsionFree(){const{isTorsionFree:z}=e;return s===Zi?!0:z?z(P,this):H.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:z}=e;return s===Zi?this:z?z(P,this):this.multiplyUnsafe(s)}toBytes(z=!0){return Nr("isCompressed",z),this.assertValidity(),g(P,this,z)}toRawBytes(z=!0){return this.toBytes(z)}toHex(z=!0){return yi(this.toBytes(z))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}P.BASE=new P(r.Gx,r.Gy,t.ONE),P.ZERO=new P(t.ZERO,t.ONE,t.ZERO),P.Fp=t,P.Fn=n;const K=n.BITS,H=Sd(P,e.endo?Math.ceil(K/2):K);return P}function mf(r){return Uint8Array.of(r?2:3)}function my(r,e,t={}){ds(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||sd,s=e.hmac||((q,...V)=>gf(e.hash,q,Zn(...V))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:c}=o;function p(q){const V=a>>Zi;return q>V}function g(q){return p(q)?o.neg(q):q}function b(q,V){if(!o.isValidNot0(V))throw new Error(`invalid signature ${q}: out of range 1..CURVE.n`)}class I{constructor(V,v,l){b("r",V),b("s",v),this.r=V,this.s=v,l!=null&&(this.recovery=l),Object.freeze(this)}static fromCompact(V){const v=o.BYTES,l=nt("compactSignature",V,v*2);return new I(o.fromBytes(l.subarray(0,v)),o.fromBytes(l.subarray(v,v*2)))}static fromDER(V){const{r:v,s:l}=qn.toSig(nt("DER",V));return new I(v,l)}assertValidity(){}addRecoveryBit(V){return new I(this.r,this.s,V)}recoverPublicKey(V){const v=i.ORDER,{r:l,s:h,recovery:y}=this;if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");if(a*hy<v&&y>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=y===2||y===3?l+a:l;if(!i.isValid(_))throw new Error("recovery id 2 or 3 invalid");const T=i.toBytes(_),N=r.fromHex(Zn(mf((y&1)===0),T)),E=o.inv(_),f=L(nt("msgHash",V)),B=o.create(-f*E),re=o.create(h*E),ee=r.BASE.multiplyUnsafe(B).add(N.multiplyUnsafe(re));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,o.neg(this.s),this.recovery):this}toBytes(V){if(V==="compact")return Zn(o.toBytes(this.r),o.toBytes(this.s));if(V==="der")return rl(qn.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return yi(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return yi(this.toBytes("compact"))}}const m=yf(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),R={isValidPrivateKey(q){try{return m(q),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const q=a;return ip(n(md(q)),q)},precompute(q=8,V=r.BASE){return V.precompute(q,!1)}};function x(q,V=!0){return r.fromPrivateKey(q).toBytes(V)}function k(q){if(typeof q=="bigint")return!1;if(q instanceof r)return!0;const v=nt("key",q).length,l=i.BYTES,h=l+1,y=2*l+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===h))return v===h||v===y}function M(q,V,v=!0){if(k(q)===!0)throw new Error("first arg must be private key");if(k(V)===!1)throw new Error("second arg must be public key");return r.fromHex(V).multiply(m(q)).toBytes(v)}const C=e.bits2int||function(q){if(q.length>8192)throw new Error("input is too large");const V=Lo(q),v=q.length*8-c;return v>0?V>>BigInt(v):V},L=e.bits2int_modN||function(q){return o.create(C(q))},U=No(c);function P(q){return oi("num < 2^"+c,q,Yi,U),o.toBytes(q)}function K(q,V,v=H){if(["recovered","canonical"].some(re=>re in v))throw new Error("sign() legacy options not supported");const{hash:l}=e;let{lowS:h,prehash:y,extraEntropy:S}=v;h==null&&(h=!0),q=nt("msgHash",q),bu(v),y&&(q=nt("prehashed msgHash",l(q)));const _=L(q),T=m(V),N=[P(T),P(_)];if(S!=null&&S!==!1){const re=S===!0?n(i.BYTES):S;N.push(nt("extraEntropy",re))}const E=Zn(...N),f=_;function B(re){const ee=C(re);if(!o.isValidNot0(ee))return;const ie=o.inv(ee),ze=r.BASE.multiply(ee).toAffine(),ve=o.create(ze.x);if(ve===Yi)return;const _e=o.create(ie*o.create(f+ve*T));if(_e===Yi)return;let Un=(ze.x===ve?0:2)|Number(ze.y&Zi),Te=_e;return h&&p(_e)&&(Te=g(_e),Un^=1),new I(ve,Te,Un)}return{seed:E,k2sig:B}}const H={lowS:e.lowS,prehash:!1},G={lowS:e.lowS,prehash:!1};function z(q,V,v=H){const{seed:l,k2sig:h}=K(q,V,v);return G0(e.hash.outputLen,o.BYTES,s)(l,h)}r.BASE.precompute(8);function Y(q,V,v,l=G){const h=q;V=nt("msgHash",V),v=nt("publicKey",v),bu(l);const{lowS:y,prehash:S,format:_}=l;if("strict"in l)throw new Error("options.strict was renamed to lowS");if(_!==void 0&&!["compact","der","js"].includes(_))throw new Error('format must be "compact", "der" or "js"');const T=typeof h=="string"||nl(h),N=!T&&!_&&typeof h=="object"&&h!==null&&typeof h.r=="bigint"&&typeof h.s=="bigint";if(!T&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E,f;try{if(N)if(_===void 0||_==="js")E=new I(h.r,h.s);else throw new Error("invalid format");if(T){try{_!=="compact"&&(E=I.fromDER(h))}catch(Te){if(!(Te instanceof qn.Err))throw Te}!E&&_!=="der"&&(E=I.fromCompact(h))}f=r.fromHex(v)}catch{return!1}if(!E||y&&E.hasHighS())return!1;S&&(V=e.hash(V));const{r:B,s:re}=E,ee=L(V),ie=o.inv(re),ze=o.create(ee*ie),ve=o.create(B*ie),_e=r.BASE.multiplyUnsafe(ze).add(f.multiplyUnsafe(ve));return _e.is0()?!1:o.create(_e.x)===B}return Object.freeze({getPublicKey:x,getSharedSecret:M,sign:z,verify:Y,utils:R,Point:r,Signature:I})}function wy(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ri(e.n,r.nBitLength),s={Fp:t,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:s}}function by(r){const{CURVE:e,curveOpts:t}=wy(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:n}}function vy(r,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:r})}function Sy(r){const{CURVE:e,curveOpts:t,ecdsaOpts:n}=by(r),s=yy(e,t),i=my(s,n,t);return vy(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ey(r,e){const t=n=>Sy({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yo={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const _y=BigInt(1),oc=BigInt(2),vu=(r,e)=>(r+e/oc)/e;function Ay(r){const e=yo.p,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),p=r*r*r%e,g=p*p*r%e,b=et(g,t,e)*g%e,I=et(b,t,e)*g%e,m=et(I,oc,e)*p%e,R=et(m,s,e)*m%e,x=et(R,i,e)*R%e,k=et(x,a,e)*x%e,M=et(k,c,e)*k%e,C=et(M,a,e)*x%e,L=et(C,t,e)*g%e,U=et(L,o,e)*R%e,P=et(U,n,e)*p%e,K=et(P,oc,e);if(!ac.eql(ac.sqr(K),r))throw new Error("Cannot find square root");return K}const ac=Ri(yo.p,void 0,void 0,{sqrt:Ay}),El=Ey({...yo,Fp:ac,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=yo.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_y*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=vu(i*r,e),c=vu(-n*r,e);let p=rt(r-a*t-c*s,e),g=rt(-a*n-c*i,e);const b=p>o,I=g>o;if(b&&(p=e-p),I&&(g=e-g),p>o||g>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:p,k2neg:I,k2:g}}}},ld),ky=Ur.utils.randomPrivateKey,Su=()=>{const r=Ur.utils.randomPrivateKey(),e=mo(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},mo=Ur.getPublicKey;function Eu(r){try{return Ur.ExtendedPoint.fromHex(r),!0}catch{return!1}}const _l=(r,e)=>Ur.sign(r,e.slice(0,32)),Iy=Ur.verify,be=r=>le.Buffer.isBuffer(r)?r:r instanceof Uint8Array?le.Buffer.from(r.buffer,r.byteOffset,r.byteLength):le.Buffer.from(r);class Al{constructor(e){Object.assign(this,e)}encode(){return le.Buffer.from(Cd(Ji,this))}static decode(e){return Ld(Ji,this,e)}static decodeUnchecked(e){return xd(Ji,this,e)}}class xy extends Al{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Ji=new Map;var wf;const bf=32,Mn=32;function Ry(r){return r._bn!==void 0}let _u=1;class X extends Al{constructor(e){if(super({}),this._bn=void 0,Ry(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Nt.decode(e);if(t.length!=Mn)throw new Error("Invalid public key input");this._bn=new fu(t)}else this._bn=new fu(e);if(this._bn.byteLength()>Mn)throw new Error("Invalid public key input")}}static unique(){const e=new X(_u);return _u+=1,new X(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Nt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(le.Buffer);if(e.length===Mn)return e;const t=le.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=le.Buffer.concat([e.toBuffer(),le.Buffer.from(t),n.toBuffer()]),i=hu(s);return new X(i)}static createProgramAddressSync(e,t){let n=le.Buffer.alloc(0);e.forEach(function(i){if(i.length>bf)throw new TypeError("Max seed length exceeded");n=le.Buffer.concat([n,be(i)])}),n=le.Buffer.concat([n,t.toBuffer(),le.Buffer.from("ProgramDerivedAddress")]);const s=hu(n);if(Eu(s))throw new Error("Invalid seeds, address must fall off the curve");return new X(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(le.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new X(e);return Eu(t.toBytes())}}wf=X;X.default=new wf("11111111111111111111111111111111");Ji.set(X,{kind:"struct",fields:[["_bn","u256"]]});class By{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=be(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=be(ky()),this._publicKey=be(mo(this._secretKey))}get publicKey(){return new X(this._publicKey)}get secretKey(){return le.Buffer.concat([this._secretKey,this._publicKey],64)}}const My=new X("BPFLoader1111111111111111111111111111111111"),pr=1280-40-8,qo=127,bi=64;class kl extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(kl.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Il extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Il.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ai extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ai.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ss{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Ee=(r="publicKey")=>Ke(32,r),Ty=(r="signature")=>Ke(64,r),xr=(r="string")=>{const e=oe([se("length"),se("lengthPadding"),Ke(hr(se(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:le.Buffer.from(i,"utf8")};return n(c,o,a)},s.alloc=i=>se().span+se().span+le.Buffer.from(i,"utf8").length,s},Cy=(r="authorized")=>oe([Ee("staker"),Ee("withdrawer")],r),Ly=(r="lockup")=>oe([rn("unixTimestamp"),rn("epoch"),Ee("custodian")],r),Py=(r="voteInit")=>oe([Ee("nodePubkey"),Ee("authorizedVoter"),Ee("authorizedWithdrawer"),Ie("commission")],r),Ny=(r="voteAuthorizeWithSeedArgs")=>oe([se("voteAuthorizationType"),Ee("currentAuthorityDerivedKeyOwnerPubkey"),xr("currentAuthorityDerivedKeySeed"),Ee("newAuthorized")],r);function vf(r,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return vf({layout:s},e[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=t(s)}),n}function Yt(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,!(n&128))break}return e}function sn(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Re(r,e){if(!r)throw new Error(e||"Assertion failed")}class Ho{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Ho(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Re(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Re(t.length>0,"Expected at least one writable signer key");const[c]=t[0];Re(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new X(c)),...n.map(([c])=>new X(c)),...s.map(([c])=>new X(c)),...i.map(([c])=>new X(c))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const a=new X(i),c=e.findIndex(p=>p.equals(a));c>=0&&(Re(c<256,"Max lookup table index exceeded"),n.push(c),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const Sf="Reached end of buffer unexpectedly";function In(r){if(r.length===0)throw new Error(Sf);return r.shift()}function Zt(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(Sf);return r.splice(...e)}class Sn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new X(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Nt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ss(this.staticAccountKeys)}static compile(e){const t=Ho.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new ss(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Nt.encode(a.data)}));return new Sn({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];sn(t,e);const n=this.instructions.map(b=>{const{accounts:I,programIdIndex:m}=b,R=Array.from(Nt.decode(b.data));let x=[];sn(x,I.length);let k=[];return sn(k,R.length),{programIdIndex:m,keyIndicesCount:le.Buffer.from(x),keyIndices:I,dataLength:le.Buffer.from(k),data:R}});let s=[];sn(s,n.length);let i=le.Buffer.alloc(pr);le.Buffer.from(s).copy(i);let o=s.length;n.forEach(b=>{const m=oe([Ie("programIdIndex"),Ke(b.keyIndicesCount.length,"keyIndicesCount"),Ot(Ie("keyIndex"),b.keyIndices.length,"keyIndices"),Ke(b.dataLength.length,"dataLength"),Ot(Ie("userdatum"),b.data.length,"data")]).encode(b,i,o);o+=m}),i=i.slice(0,o);const a=oe([Ke(1,"numRequiredSignatures"),Ke(1,"numReadonlySignedAccounts"),Ke(1,"numReadonlyUnsignedAccounts"),Ke(t.length,"keyCount"),Ot(Ee("key"),e,"keys"),Ee("recentBlockhash")]),c={numRequiredSignatures:le.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:le.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:le.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:le.Buffer.from(t),keys:this.accountKeys.map(b=>be(b.toBytes())),recentBlockhash:Nt.decode(this.recentBlockhash)};let p=le.Buffer.alloc(2048);const g=a.encode(c,p);return i.copy(p,g),p.slice(0,g+i.length)}static from(e){let t=[...e];const n=In(t);if(n!==(n&qo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=In(t),i=In(t),o=Yt(t);let a=[];for(let I=0;I<o;I++){const m=Zt(t,0,Mn);a.push(new X(le.Buffer.from(m)))}const c=Zt(t,0,Mn),p=Yt(t);let g=[];for(let I=0;I<p;I++){const m=In(t),R=Yt(t),x=Zt(t,0,R),k=Yt(t),M=Zt(t,0,k),C=Nt.encode(le.Buffer.from(M));g.push({programIdIndex:m,accounts:x,data:C})}const b={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Nt.encode(le.Buffer.from(c)),accountKeys:a,instructions:g};return new Sn(b)}}class Or{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ss(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Ho.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const g of i){const b=t.extractTableLookup(g);if(b!==void 0){const[I,{writable:m,readonly:R}]=b;n.push(I),s.writable.push(...m),s.readonly.push(...R)}}const[o,a]=t.getMessageComponents(),p=new ss(a,s).compileInstructions(e.instructions);return new Or({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const e=Array();sn(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();sn(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();sn(i,this.addressTableLookups.length);const o=oe([Ie("prefix"),oe([Ie("numRequiredSignatures"),Ie("numReadonlySignedAccounts"),Ie("numReadonlyUnsignedAccounts")],"header"),Ke(e.length,"staticAccountKeysLength"),Ot(Ee(),this.staticAccountKeys.length,"staticAccountKeys"),Ee("recentBlockhash"),Ke(n.length,"instructionsLength"),Ke(t.length,"serializedInstructions"),Ke(i.length,"addressTableLookupsLength"),Ke(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(pr),c=128,p=o.encode({prefix:c,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:Nt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,p)}serializeInstructions(){let e=0;const t=new Uint8Array(pr);for(const n of this.compiledInstructions){const s=Array();sn(s,n.accountKeyIndexes.length);const i=Array();sn(i,n.data.length);const o=oe([Ie("programIdIndex"),Ke(s.length,"encodedAccountKeyIndexesLength"),Ot(Ie(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ke(i.length,"encodedDataLength"),Ke(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(pr);for(const n of this.addressTableLookups){const s=Array();sn(s,n.writableIndexes.length);const i=Array();sn(i,n.readonlyIndexes.length);const o=oe([Ee("accountKey"),Ke(s.length,"encodedWritableIndexesLength"),Ot(Ie(),n.writableIndexes.length,"writableIndexes"),Ke(i.length,"encodedReadonlyIndexesLength"),Ot(Ie(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=In(t),s=n&qo;Re(n!==s,"Expected versioned message but received legacy message");const i=s;Re(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:In(t),numReadonlySignedAccounts:In(t),numReadonlyUnsignedAccounts:In(t)},a=[],c=Yt(t);for(let R=0;R<c;R++)a.push(new X(Zt(t,0,Mn)));const p=Nt.encode(Zt(t,0,Mn)),g=Yt(t),b=[];for(let R=0;R<g;R++){const x=In(t),k=Yt(t),M=Zt(t,0,k),C=Yt(t),L=new Uint8Array(Zt(t,0,C));b.push({programIdIndex:x,accountKeyIndexes:M,data:L})}const I=Yt(t),m=[];for(let R=0;R<I;R++){const x=new X(Zt(t,0,Mn)),k=Yt(t),M=Zt(t,0,k),C=Yt(t),L=Zt(t,0,C);m.push({accountKey:x,writableIndexes:M,readonlyIndexes:L})}return new Or({header:o,staticAccountKeys:a,recentBlockhash:p,compiledInstructions:b,addressTableLookups:m})}}const jo={deserializeMessageVersion(r){const e=r[0],t=e&qo;return t===e?"legacy":t},deserialize:r=>{const e=jo.deserializeMessageVersion(r);if(e==="legacy")return Sn.from(r);if(e===0)return Or.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Kn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Oy=le.Buffer.alloc(bi).fill(0);class Ne{constructor(e){this.keys=void 0,this.programId=void 0,this.data=le.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ke{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Ne(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<t.length;x++)if(t[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const s=[],i=[];t.forEach(x=>{x.keys.forEach(M=>{i.push({...M})});const k=x.programId.toString();s.includes(k)||s.push(k)}),s.forEach(x=>{i.push({pubkey:new X(x),isSigner:!1,isWritable:!1})});const o=[];i.forEach(x=>{const k=x.pubkey.toString(),M=o.findIndex(C=>C.pubkey.toString()===k);M>-1?(o[M].isWritable=o[M].isWritable||x.isWritable,o[M].isSigner=o[M].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,k){if(x.isSigner!==k.isSigner)return x.isSigner?-1:1;if(x.isWritable!==k.isWritable)return x.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(k.pubkey.toBase58(),"en",M)});const a=o.findIndex(x=>x.pubkey.equals(n));if(a>-1){const[x]=o.splice(a,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const x of this.signatures){const k=o.findIndex(M=>M.pubkey.equals(x.publicKey));if(k>-1)o[k].isSigner||(o[k].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let c=0,p=0,g=0;const b=[],I=[];o.forEach(({pubkey:x,isSigner:k,isWritable:M})=>{k?(b.push(x.toString()),c+=1,M||(p+=1)):(I.push(x.toString()),M||(g+=1))});const m=b.concat(I),R=t.map(x=>{const{data:k,programId:M}=x;return{programIdIndex:m.indexOf(M.toString()),accounts:x.keys.map(C=>m.indexOf(C.pubkey.toString())),data:Nt.encode(k)}});return R.forEach(x=>{Re(x.programIdIndex>=0),x.accounts.forEach(k=>Re(k>=0))}),new Sn({header:{numRequiredSignatures:c,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:g},accountKeys:m,recentBlockhash:e,instructions:R})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=_l(n,s.secretKey);this._addSignature(s.publicKey,be(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Re(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=le.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||(n.missing=[])).push(i):Iy(s,e,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];sn(n,t.length);const s=n.length+t.length*64+e.length,i=le.Buffer.alloc(s);return Re(t.length<256),le.Buffer.from(n).copy(i,0),t.forEach(({signature:o},a)=>{o!==null&&(Re(o.length===64,"signature has invalid length"),le.Buffer.from(o).copy(i,n.length+a*64))}),e.copy(i,n.length+t.length*64),Re(i.length<=pr,`Transaction too large: ${i.length} > ${pr}`),i}get keys(){return Re(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Re(this.instructions.length===1),this.instructions[0].programId}get data(){return Re(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Yt(t);let s=[];for(let i=0;i<n;i++){const o=Zt(t,0,bi);s.push(Nt.encode(le.Buffer.from(o)))}return ke.populate(Sn.from(t),s)}static populate(e,t=[]){const n=new ke;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==Nt.encode(Oy)?null:Nt.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Ne({keys:i,programId:e.accountKeys[s.programIdIndex],data:Nt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class xl{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,p=o-a;Re(p>0,"Message header is invalid");const g=e.staticAccountKeys.length-o-c;Re(g>=0,"Message header is invalid");const b=e.getAccountKeys(t),I=b.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const m=[];for(const R of s){const x=[];for(const M of R.accountKeyIndexes){const C=b.get(M);if(C===void 0)throw new Error(`Failed to find key for account key index ${M}`);const L=M<o;let U;L?U=M<p:M<b.staticAccountKeys.length?U=M-o<g:U=M-b.staticAccountKeys.length<b.accountKeysFromLookups.writable.length,x.push({pubkey:C,isSigner:M<n.numRequiredSignatures,isWritable:U})}const k=b.get(R.programIdIndex);if(k===void 0)throw new Error(`Failed to find program id for program id index ${R.programIdIndex}`);m.push(new Ne({programId:k,data:be(R.data),keys:x}))}return new xl({payerKey:I,instructions:m,recentBlockhash:i})}compileToLegacyMessage(){return Sn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Or.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class vi{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Re(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(bi));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();sn(t,this.signatures.length);const n=oe([Ke(t.length,"encodedSignaturesLength"),Ot(Ty(),this.signatures.length,"signatures"),Ke(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=Yt(t);for(let o=0;o<s;o++)n.push(new Uint8Array(Zt(t,0,bi)));const i=jo.deserialize(new Uint8Array(t));return new vi(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Re(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=_l(t,s.secretKey)}}addSignature(e,t){Re(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Re(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const Wy=160,Uy=64,zy=Wy/Uy,Ef=1e3/zy,An=new X("SysvarC1ock11111111111111111111111111111111"),Fy=new X("SysvarEpochSchedu1e111111111111111111111111"),Dy=new X("Sysvar1nstructions1111111111111111111111111"),Ms=new X("SysvarRecentB1ockHashes11111111111111111111"),Si=new X("SysvarRent111111111111111111111111111111111"),Ky=new X("SysvarRewards111111111111111111111111111111"),$y=new X("SysvarS1otHashes111111111111111111111111111"),qy=new X("SysvarS1otHistory11111111111111111111111111"),Ts=new X("SysvarStakeHistory1111111111111111111111111");class os extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const Hy={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ce extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function cc(r,e,t,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,c=a.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new os({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function _r(r){return new Promise(e=>setTimeout(e,r))}function Ae(r,e){const t=r.layout.span>=0?r.layout.span:vf(r,e),n=le.Buffer.alloc(t),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,n),n}function Me(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const _f=Ct("lamportsPerSignature"),Af=oe([se("version"),se("state"),Ee("authorizedPubkey"),Ee("nonce"),oe([_f],"feeCalculator")]),lc=Af.span;class Vo{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Af.decode(be(e),0);return new Vo({authorizedPubkey:new X(t.authorizedPubkey),nonce:new X(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Ei(r){const e=Ke(8,r),t=e.decode.bind(e),n=e.encode.bind(e),s=e,i=yg();return s.decode=(o,a)=>{const c=t(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const p=i.encode(o);return n(p,a,c)},s}class jy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Ue))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:s}=Me(Ue.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new X(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Me(Ue.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:s}=Me(Ue.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new X(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Me(Ue.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:s,programId:i}=Me(Ue.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new X(t),seed:n,space:s,programId:new X(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Me(Ue.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new X(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:s}=Me(Ue.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new X(t),seed:n,programId:new X(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:s,space:i,programId:o}=Me(Ue.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new X(t),seed:n,lamports:s,space:i,programId:new X(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Me(Ue.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new X(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Me(Ue.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Me(Ue.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Me(Ue.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new X(t)}}static checkProgramId(e){if(!e.equals(Mt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ue=Object.freeze({Create:{index:0,layout:oe([se("instruction"),rn("lamports"),rn("space"),Ee("programId")])},Assign:{index:1,layout:oe([se("instruction"),Ee("programId")])},Transfer:{index:2,layout:oe([se("instruction"),Ei("lamports")])},CreateWithSeed:{index:3,layout:oe([se("instruction"),Ee("base"),xr("seed"),rn("lamports"),rn("space"),Ee("programId")])},AdvanceNonceAccount:{index:4,layout:oe([se("instruction")])},WithdrawNonceAccount:{index:5,layout:oe([se("instruction"),rn("lamports")])},InitializeNonceAccount:{index:6,layout:oe([se("instruction"),Ee("authorized")])},AuthorizeNonceAccount:{index:7,layout:oe([se("instruction"),Ee("authorized")])},Allocate:{index:8,layout:oe([se("instruction"),rn("space")])},AllocateWithSeed:{index:9,layout:oe([se("instruction"),Ee("base"),xr("seed"),rn("space"),Ee("programId")])},AssignWithSeed:{index:10,layout:oe([se("instruction"),Ee("base"),xr("seed"),Ee("programId")])},TransferWithSeed:{index:11,layout:oe([se("instruction"),Ei("lamports"),xr("seed"),Ee("programId")])},UpgradeNonceAccount:{index:12,layout:oe([se("instruction")])}});class Mt{constructor(){}static createAccount(e){const t=Ue.Create,n=Ae(t,{lamports:e.lamports,space:e.space,programId:be(e.programId.toBuffer())});return new Ne({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=Ue.TransferWithSeed;t=Ae(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:be(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ue.Transfer;t=Ae(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=Ue.AssignWithSeed;t=Ae(s,{base:be(e.basePubkey.toBuffer()),seed:e.seed,programId:be(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ue.Assign;t=Ae(s,{programId:be(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ue.CreateWithSeed,n=Ae(t,{base:be(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:be(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ne({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new ke;"basePubkey"in e&&"seed"in e?t.add(Mt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:lc,programId:this.programId})):t.add(Mt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:lc,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Ue.InitializeNonceAccount,n=Ae(t,{authorized:be(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ms,isSigner:!1,isWritable:!1},{pubkey:Si,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ne(s)}static nonceAdvance(e){const t=Ue.AdvanceNonceAccount,n=Ae(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ms,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ne(s)}static nonceWithdraw(e){const t=Ue.WithdrawNonceAccount,n=Ae(t,{lamports:e.lamports});return new Ne({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ms,isSigner:!1,isWritable:!1},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Ue.AuthorizeNonceAccount,n=Ae(t,{authorized:be(e.newAuthorizedPubkey.toBuffer())});return new Ne({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=Ue.AllocateWithSeed;t=Ae(s,{base:be(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:be(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ue.Allocate;t=Ae(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}}Mt.programId=new X("11111111111111111111111111111111");const Vy=pr-300;class Wr{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Wr.chunkSize)+1+1)}static async load(e,t,n,s,i){{const b=await e.getMinimumBalanceForRentExemption(i.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let m=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==i.length&&(m=m||new ke,m.add(Mt.allocate({accountPubkey:n.publicKey,space:i.length}))),I.owner.equals(s)||(m=m||new ke,m.add(Mt.assign({accountPubkey:n.publicKey,programId:s}))),I.lamports<b&&(m=m||new ke,m.add(Mt.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:b-I.lamports})))}else m=new ke().add(Mt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:b>0?b:1,space:i.length,programId:s}));m!==null&&await cc(e,m,[t,n],{commitment:"confirmed"})}const o=oe([se("instruction"),se("offset"),se("bytesLength"),se("bytesLengthPadding"),Ot(Ie("byte"),hr(se(),-8),"bytes")]),a=Wr.chunkSize;let c=0,p=i,g=[];for(;p.length>0;){const b=p.slice(0,a),I=le.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:b,bytesLength:0,bytesLengthPadding:0},I);const m=new ke().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:I});g.push(cc(e,m,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await _r(1e3/4),c+=a,p=p.slice(a)}await Promise.all(g);{const b=oe([se("instruction")]),I=le.Buffer.alloc(b.span);b.encode({instruction:1},I);const m=new ke().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1}],programId:s,data:I}),R="processed",x=await e.sendTransaction(m,[t,n],{preflightCommitment:R}),{context:k,value:M}=await e.confirmTransaction({signature:x,lastValidBlockHeight:m.lastValidBlockHeight,blockhash:m.recentBlockhash},R);if(M.err)throw new Error(`Transaction ${x} failed (${JSON.stringify(M)})`);for(;;){try{if(await e.getSlot({commitment:R})>k.slot)break}catch{}await new Promise(C=>setTimeout(C,Math.round(Ef/2)))}}return!0}}Wr.chunkSize=Vy;const Gy=new X("BPFLoader2111111111111111111111111111111111");class Yy{static getMinNumSignatures(e){return Wr.getMinNumSignatures(e)}static load(e,t,n,s,i){return Wr.load(e,t,n,i,s)}}function Zy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fa,Au;function Jy(){if(Au)return Fa;Au=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,a,c,p,g,b;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(b=r.call(n),b==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=t(n[i],!0)+",";return o>-1&&(a+=t(n[i],!0)),a+"]"}else if(b==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",i=0;i<o;)p=c[i],g=t(n[p],!1),g!==void 0&&(a&&(a+=","),a+=JSON.stringify(p)+":"+g),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Fa=function(n){var s=t(n,!1);if(s!==void 0)return""+s},Fa}var Xy=Jy(),ku=Zy(Xy);const Ni=32;function Da(r){let e=0;for(;r>1;)r/=2,e++;return e}function Qy(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class kf{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Da(Qy(e+Ni+1))-Da(Ni)-1,n=this.getSlotsInEpoch(t),s=e-(n-Ni);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Ni:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Da(Ni)):this.slotsPerEpoch}}var em=globalThis.fetch;class tm extends ny{constructor(e,t,n){const s=i=>{const o=ey(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function nm(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Iu=56;class uc{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=nm(rm,e),n=e.length-Iu;Re(n>=0,"lookup table is invalid"),Re(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=oe([Ot(Ee(),s,"addresses")]).decode(e.slice(Iu));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new X(t.authority[0]):void 0,addresses:i.map(o=>new X(o))}}}const rm={index:1,layout:oe([se("typeIndex"),Ei("deactivationSlot"),Ct("lastExtendedSlot"),Ie("lastExtendedStartIndex"),Ie(),Ot(Ee(),hr(Ie(),-1),"authority")])},im=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function sm(r){const e=r.match(im);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${i}`}const Ye=ps(bl(X),J(),r=>new X(r)),If=vl([J(),Ge("base64")]),Rl=ps(bl(le.Buffer),If,r=>le.Buffer.from(r[0],"base64")),xf=30*1e3;function om(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function We(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function xu(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Rf(r){return Vt([Z({jsonrpc:Ge("2.0"),id:J(),result:r}),Z({jsonrpc:Ge("2.0"),id:J(),error:Z({code:Ti(),message:J(),data:de(Eg())})})])}const am=Rf(Ti());function we(r){return ps(Rf(r),am,e=>"error"in e?e:{...e,result:Q(e.result,r)})}function tt(r){return we(Z({context:Z({slot:D()}),value:r}))}function Go(r){return Z({context:Z({slot:D()}),value:r})}function Ka(r,e){return r===0?new Or({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new X(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Nt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Sn(e)}const cm=Z({foundation:D(),foundationTerm:D(),initial:D(),taper:D(),terminal:D()}),lm=we(te(ne(Z({epoch:D(),effectiveSlot:D(),amount:D(),postBalance:D(),commission:de(ne(D()))})))),um=te(Z({slot:D(),prioritizationFee:D()})),dm=Z({total:D(),validator:D(),foundation:D(),epoch:D()}),fm=Z({epoch:D(),slotIndex:D(),slotsInEpoch:D(),absoluteSlot:D(),blockHeight:de(D()),transactionCount:de(D())}),hm=Z({slotsPerEpoch:D(),leaderScheduleSlotOffset:D(),warmup:Tn(),firstNormalEpoch:D(),firstNormalSlot:D()}),pm=nf(J(),te(D())),Dr=ne(Vt([Z({}),J()])),gm=Z({err:Dr}),ym=Ge("receivedSignature"),mm=Z({"solana-core":J(),"feature-set":de(D())}),wm=Z({program:J(),programId:Ye,parsed:Ti()}),bm=Z({programId:Ye,accounts:te(Ye),data:J()}),Ru=tt(Z({err:ne(Vt([Z({}),J()])),logs:ne(te(J())),accounts:de(ne(te(ne(Z({executable:Tn(),owner:J(),lamports:D(),data:te(J()),rentEpoch:de(D())}))))),unitsConsumed:de(D()),returnData:de(ne(Z({programId:J(),data:vl([J(),Ge("base64")])}))),innerInstructions:de(ne(te(Z({index:D(),instructions:te(Vt([wm,bm]))}))))})),vm=tt(Z({byIdentity:nf(J(),te(D())),range:Z({firstSlot:D(),lastSlot:D()})}));function Sm(r,e,t,n,s,i){const o=t||em;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(g,b)=>{const I=await new Promise((m,R)=>{try{n(g,b,(x,k)=>m([x,k]))}catch(x){R(x)}});return await o(...I)}),new Jg(async(g,b)=>{const I={method:"POST",body:g,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},Sw)};try{let m=5,R,x=500;for(;c?R=await c(r,I):R=await o(r,I),!(R.status!==429||s===!0||(m-=1,m===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${x}ms delay...`),await _r(x),x*=2;const k=await R.text();R.ok?b(null,k):b(new Error(`${R.status} ${R.statusText}: ${k}`))}catch(m){m instanceof Error&&b(m)}},{})}function Em(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function _m(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const Am=we(cm),km=we(dm),Im=we(um),xm=we(fm),Rm=we(hm),Bm=we(pm),Mm=we(D()),Tm=tt(Z({total:D(),circulating:D(),nonCirculating:D(),nonCirculatingAccounts:te(Ye)})),dc=Z({amount:J(),uiAmount:ne(D()),decimals:D(),uiAmountString:de(J())}),Cm=tt(te(Z({address:Ye,amount:J(),uiAmount:ne(D()),decimals:D(),uiAmountString:de(J())}))),Lm=tt(te(Z({pubkey:Ye,account:Z({executable:Tn(),owner:Ye,lamports:D(),data:Rl,rentEpoch:D()})}))),fc=Z({program:J(),parsed:Ti(),space:D()}),Pm=tt(te(Z({pubkey:Ye,account:Z({executable:Tn(),owner:Ye,lamports:D(),data:fc,rentEpoch:D()})}))),Nm=tt(te(Z({lamports:D(),address:Ye}))),as=Z({executable:Tn(),owner:Ye,lamports:D(),data:Rl,rentEpoch:D()}),Om=Z({pubkey:Ye,account:as}),Wm=ps(Vt([bl(le.Buffer),fc]),Vt([If,fc]),r=>Array.isArray(r)?Q(r,Rl):r),hc=Z({executable:Tn(),owner:Ye,lamports:D(),data:Wm,rentEpoch:D()}),Um=Z({pubkey:Ye,account:hc}),zm=Z({state:Vt([Ge("active"),Ge("inactive"),Ge("activating"),Ge("deactivating")]),active:D(),inactive:D()}),Fm=we(te(Z({signature:J(),slot:D(),err:Dr,memo:ne(J()),blockTime:de(ne(D()))}))),Dm=we(te(Z({signature:J(),slot:D(),err:Dr,memo:ne(J()),blockTime:de(ne(D()))}))),Km=Z({subscription:D(),result:Go(as)}),$m=Z({pubkey:Ye,account:as}),qm=Z({subscription:D(),result:Go($m)}),Hm=Z({parent:D(),slot:D(),root:D()}),jm=Z({subscription:D(),result:Hm}),Vm=Vt([Z({type:Vt([Ge("firstShredReceived"),Ge("completed"),Ge("optimisticConfirmation"),Ge("root")]),slot:D(),timestamp:D()}),Z({type:Ge("createdBank"),parent:D(),slot:D(),timestamp:D()}),Z({type:Ge("frozen"),slot:D(),timestamp:D(),stats:Z({numTransactionEntries:D(),numSuccessfulTransactions:D(),numFailedTransactions:D(),maxTransactionsPerEntry:D()})}),Z({type:Ge("dead"),slot:D(),timestamp:D(),err:J()})]),Gm=Z({subscription:D(),result:Vm}),Ym=Z({subscription:D(),result:Go(Vt([gm,ym]))}),Zm=Z({subscription:D(),result:D()}),Jm=Z({pubkey:J(),gossip:ne(J()),tpu:ne(J()),rpc:ne(J()),version:ne(J())}),Bu=Z({votePubkey:J(),nodePubkey:J(),activatedStake:D(),epochVoteAccount:Tn(),epochCredits:te(vl([D(),D(),D()])),commission:D(),lastVote:D(),rootSlot:ne(D())}),Xm=we(Z({current:te(Bu),delinquent:te(Bu)})),Qm=Vt([Ge("processed"),Ge("confirmed"),Ge("finalized")]),ew=Z({slot:D(),confirmations:ne(D()),err:Dr,confirmationStatus:de(Qm)}),tw=tt(te(ne(ew))),nw=we(D()),Bf=Z({accountKey:Ye,writableIndexes:te(D()),readonlyIndexes:te(D())}),Bl=Z({signatures:te(J()),message:Z({accountKeys:te(J()),header:Z({numRequiredSignatures:D(),numReadonlySignedAccounts:D(),numReadonlyUnsignedAccounts:D()}),instructions:te(Z({accounts:te(D()),data:J(),programIdIndex:D()})),recentBlockhash:J(),addressTableLookups:de(te(Bf))})}),Mf=Z({pubkey:Ye,signer:Tn(),writable:Tn(),source:de(Vt([Ge("transaction"),Ge("lookupTable")]))}),Tf=Z({accountKeys:te(Mf),signatures:te(J())}),Cf=Z({parsed:Ti(),program:J(),programId:Ye}),Lf=Z({accounts:te(Ye),data:J(),programId:Ye}),rw=Vt([Lf,Cf]),iw=Vt([Z({parsed:Ti(),program:J(),programId:J()}),Z({accounts:te(J()),data:J(),programId:J()})]),Pf=ps(rw,iw,r=>"accounts"in r?Q(r,Lf):Q(r,Cf)),Nf=Z({signatures:te(J()),message:Z({accountKeys:te(Mf),instructions:te(Pf),recentBlockhash:J(),addressTableLookups:de(ne(te(Bf)))})}),wo=Z({accountIndex:D(),mint:J(),owner:de(J()),programId:de(J()),uiTokenAmount:dc}),Of=Z({writable:te(Ye),readonly:te(Ye)}),Yo=Z({err:Dr,fee:D(),innerInstructions:de(ne(te(Z({index:D(),instructions:te(Z({accounts:te(D()),data:J(),programIdIndex:D()}))})))),preBalances:te(D()),postBalances:te(D()),logMessages:de(ne(te(J()))),preTokenBalances:de(ne(te(wo))),postTokenBalances:de(ne(te(wo))),loadedAddresses:de(Of),computeUnitsConsumed:de(D())}),Ml=Z({err:Dr,fee:D(),innerInstructions:de(ne(te(Z({index:D(),instructions:te(Pf)})))),preBalances:te(D()),postBalances:te(D()),logMessages:de(ne(te(J()))),preTokenBalances:de(ne(te(wo))),postTokenBalances:de(ne(te(wo))),loadedAddresses:de(Of),computeUnitsConsumed:de(D())}),Ci=Vt([Ge(0),Ge("legacy")]),Kr=Z({pubkey:J(),lamports:D(),postBalance:ne(D()),rewardType:ne(J()),commission:de(ne(D()))}),sw=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),transactions:te(Z({transaction:Bl,meta:ne(Yo),version:de(Ci)})),rewards:de(te(Kr)),blockTime:ne(D()),blockHeight:ne(D())}))),ow=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),rewards:de(te(Kr)),blockTime:ne(D()),blockHeight:ne(D())}))),aw=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),transactions:te(Z({transaction:Tf,meta:ne(Yo),version:de(Ci)})),rewards:de(te(Kr)),blockTime:ne(D()),blockHeight:ne(D())}))),cw=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),transactions:te(Z({transaction:Nf,meta:ne(Ml),version:de(Ci)})),rewards:de(te(Kr)),blockTime:ne(D()),blockHeight:ne(D())}))),lw=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),transactions:te(Z({transaction:Tf,meta:ne(Ml),version:de(Ci)})),rewards:de(te(Kr)),blockTime:ne(D()),blockHeight:ne(D())}))),uw=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),rewards:de(te(Kr)),blockTime:ne(D()),blockHeight:ne(D())}))),dw=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),transactions:te(Z({transaction:Bl,meta:ne(Yo)})),rewards:de(te(Kr)),blockTime:ne(D())}))),Mu=we(ne(Z({blockhash:J(),previousBlockhash:J(),parentSlot:D(),signatures:te(J()),blockTime:ne(D())}))),$a=we(ne(Z({slot:D(),meta:ne(Yo),blockTime:de(ne(D())),transaction:Bl,version:de(Ci)}))),xs=we(ne(Z({slot:D(),transaction:Nf,meta:ne(Ml),blockTime:de(ne(D())),version:de(Ci)}))),fw=tt(Z({blockhash:J(),lastValidBlockHeight:D()})),hw=tt(Tn()),pw=Z({slot:D(),numTransactions:D(),numSlots:D(),samplePeriodSecs:D()}),gw=we(te(pw)),yw=tt(ne(Z({feeCalculator:Z({lamportsPerSignature:D()})}))),mw=we(J()),ww=we(J()),bw=Z({err:Dr,logs:te(J()),signature:J()}),vw=Z({result:Go(bw),subscription:D()}),Sw={"solana-client":"js/1.0.0-maintenance"};class Wf{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async g=>{const{commitment:b,config:I}=We(g),m=this._buildArgs([],b,void 0,I),R=ku(m);return p[R]=p[R]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",m),k=Q(x,we(D()));if("error"in k)throw new ce(k.error,"failed to get block height information");return k.result}finally{delete p[R]}})(),await p[R]}})();let n,s,i,o,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=om(e),this._rpcWsEndpoint=n||sm(e),this._rpcClient=Sm(e,s,i,o,a,c),this._rpcRequest=Em(this._rpcClient),this._rpcBatchRequest=_m(this._rpcClient),this._rpcWebSocket=new tm(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=Q(o,tt(D()));if("error"in a)throw new ce(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=Q(t,we(ne(D())));if("error"in n)throw new ce(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=Q(e,we(D()));if("error"in t)throw new ce(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=Q(e,Mm);if("error"in t)throw new ce(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=Q(n,Tm);if("error"in s)throw new ce(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=Q(s,tt(dc));if("error"in i)throw new ce(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=Q(s,tt(dc));if("error"in i)throw new ce(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=We(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),p=Q(c,Lm);if("error"in p)throw new ce(p.error,`failed to get token accounts owned by account ${e.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Q(o,Pm);if("error"in a)throw new ce(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Q(s,Nm);if("error"in i)throw new ce(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Q(s,Cm);if("error"in i)throw new ce(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Q(o,tt(ne(as)));if("error"in a)throw new ce(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Q(o,tt(ne(hc)));if("error"in a)throw new ce(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=We(t),i=e.map(p=>p.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Q(a,tt(te(ne(hc))));if("error"in c)throw new ce(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=We(t),i=e.map(p=>p.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Q(a,tt(te(ne(as))));if("error"in c)throw new ce(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=We(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=Q(a,we(zm));if("error"in c)throw new ce(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=We(t),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:xu(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),p=te(Om),g=o.withContext===!0?Q(c,tt(p)):Q(c,we(p));if("error"in g)throw new ce(g.error,`failed to get accounts owned by program ${e.toBase58()}`);return g.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Q(o,we(te(Um)));if("error"in a)throw new ce(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var i;let n;if(typeof e=="string")n=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=Nt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Re(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((c,p)=>{try{n=this.onSignature(t,(b,I)=>{n=void 0;const m={context:I,value:b};c({__type:Kn.PROCESSED,response:m})},e);const g=new Promise(b=>{n==null?b():s=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&b()})});(async()=>{if(await g,i)return;const b=await this.getSignatureStatus(t);if(i||b==null)return;const{context:I,value:m}=b;if(m!=null)if(m!=null&&m.err)p(m.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(m.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(m.confirmationStatus==="processed"||m.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Kn.PROCESSED,response:{context:I,value:m}})}})()}catch(g){p(g)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(b=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let m=await I();if(!i){for(;m<=n;)if(await _r(1e3),i||(m=await I(),i))return;b({__type:Kn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),p=this.getCancellationPromise(t);let g;try{const b=await Promise.race([p,c,o]);if(b.__type===Kn.PROCESSED)g=b.response;else throw new kl(s)}finally{i=!0,a()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(m=>{let R=i,x=null;const k=async()=>{try{const{context:M,value:C}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return x=M.slot,C==null?void 0:C.nonce}catch{return R}};(async()=>{if(R=await k(),!a)for(;;){if(i!==R){m({__type:Kn.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await _r(2e3),a||(R=await k(),a))return}})()}),{abortConfirmation:p,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),b=this.getCancellationPromise(t);let I;try{const m=await Promise.race([b,g,c]);if(m.__type===Kn.PROCESSED)I=m.response;else{let R;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(m.slotInWhichNonceDidAdvance??n)){await _r(400);continue}R=x;break}if(R!=null&&R.value){const x=e||"finalized",{confirmationStatus:k}=R.value;switch(x){case"processed":case"recent":if(k!=="processed"&&k!=="confirmed"&&k!=="finalized")throw new ai(o);break;case"confirmed":case"single":case"singleGossip":if(k!=="confirmed"&&k!=="finalized")throw new ai(o);break;case"finalized":case"max":case"root":if(k!=="finalized")throw new ai(o);break;default:}I={context:R.context,value:{err:R.value.err}}}else throw new ai(o)}}finally{a=!0,p()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(c=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Kn.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([o,s]);if(c.__type===Kn.PROCESSED)a=c.response;else throw new Il(t,c.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=Q(e,we(te(Jm)));if("error"in t)throw new ce(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=Q(n,Xm);if("error"in s)throw new ce(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=We(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=Q(i,we(D()));if("error"in o)throw new ce(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=We(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Q(i,we(J()));if("error"in o)throw new ce(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=Q(s,we(te(Ye)));if("error"in i)throw new ce(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Re(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=Q(s,tw);if("error"in i)throw new ce(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=We(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Q(i,we(D()));if("error"in o)throw new ce(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=Q(n,Am);if("error"in s)throw new ce(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=We(n),o=this._buildArgs([e.map(p=>p.toBase58())],s,void 0,{...i,epoch:t??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=Q(a,lm);if("error"in c)throw new ce(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=Q(e,km);if("error"in t)throw new ce(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=We(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Q(i,xm);if("error"in o)throw new ce(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=Q(e,Rm);if("error"in t)throw new ce(t.error,"failed to get epoch schedule");const n=t.result;return new kf(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=Q(e,Bm);if("error"in t)throw new ce(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Q(s,nw);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=Q(t,gw);if("error"in n)throw new ce(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Q(s,yw);if("error"in i)throw new ce(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=be(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=Q(i,tt(ne(D())));if("error"in o)throw new ce(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=t!=null&&t.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Q(s,Im);if("error"in i)throw new ce(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=We(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Q(i,fw);if("error"in o)throw new ce(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Q(o,hw);if("error"in a)throw new ce(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=Q(e,we(mm));if("error"in t)throw new ce(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=Q(e,we(J()));if("error"in t)throw new ce(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Q(o,aw);if("error"in a)throw a.error;return a.result}case"none":{const a=Q(o,ow);if("error"in a)throw a.error;return a.result}default:{const a=Q(o,sw);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:p,meta:g,version:b})=>({meta:g,transaction:{...p,message:Ka(b,p.message)},version:b}))}:null}}}catch(a){throw new ce(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Q(o,lw);if("error"in a)throw a.error;return a.result}case"none":{const a=Q(o,uw);if("error"in a)throw a.error;return a.result}default:{const a=Q(o,cw);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ce(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,t=c}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=Q(i,vm);if("error"in o)throw new ce(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Q(o,$a);if("error"in a)throw new ce(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Ka(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=We(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Q(o,xs);if("error"in a)throw new ce(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=We(t),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const p=Q(c,xs);if("error"in p)throw new ce(p.error,"failed to get transactions");return p.result})}async getTransactions(e,t){const{commitment:n,config:s}=We(t),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const p=Q(c,$a);if("error"in p)throw new ce(p.error,"failed to get transactions");const g=p.result;return g&&{...g,transaction:{...g.transaction,message:Ka(g.version,g.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=Q(s,dw);if("error"in i)throw new ce(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:p})=>{const g=new Sn(c.message);return{meta:p,transaction:{...c,message:g}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:p})=>({meta:p,transaction:ke.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=Q(i,we(te(D())));if("error"in o)throw new ce(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,Mu);if("error"in i)throw new ce(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,Mu);if("error"in i)throw new ce(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=Q(s,$a);if("error"in i)throw new ce(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Sn(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:ke.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=Q(s,xs);if("error"in i)throw new ce(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=Q(o,xs);if("error"in a)throw new ce(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Q(i,Fm);if("error"in o)throw new ce(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=Q(i,Dm);if("error"in o)throw new ce(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new uc({key:e,state:uc.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=Vo.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=Q(n,mw);if("error"in s)throw new ce(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await _r(100);const n=Date.now()-this._blockhashInfo.lastFetch>=xf;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await _r(Ef/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=We(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Q(i,tt(D()));if("error"in o)throw new ce(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const x=e.serialize(),k=le.Buffer.from(x).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const M=t||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(M.innerInstructions=t.innerInstructions);const C=[k,M],L=await this._rpcRequest("simulateTransaction",C),U=Q(L,Ru);if("error"in U)throw new Error("failed to simulate transaction: "+U.error.message);return U.result}let s;if(e instanceof ke){let R=e;s=new ke,s.feePayer=R.feePayer,s.instructions=e.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=ke.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=x.lastValidBlockHeight,s.recentBlockhash=x.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const k=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(k)&&!this._blockhashInfo.transactionSignatures.includes(k)){this._blockhashInfo.simulatedSignatures.push(k);break}else R=!0}}const o=s._compile(),a=o.serialize(),p=s._serialize(a).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(n){const R=(Array.isArray(n)?n:o.nonProgramIds()).map(x=>x.toBase58());g.accounts={encoding:"base64",addresses:R}}i&&(g.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(g.innerInstructions=t.innerInstructions);const b=[p,g],I=await this._rpcRequest("simulateTransaction",b),m=Q(I,Ru);if("error"in m){let R;if("data"in m.error&&(R=m.error.data.logs,R&&Array.isArray(R))){const x=`
    `,k=x+R.join(x);console.error(m.error.message,k)}throw new os({action:"simulate",signature:"",transactionMessage:m.error.message,logs:R})}return m.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=be(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=Q(a,ww);if("error"in c){let p;throw"data"in c.error&&(p=c.error.data.logs),new os({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:p})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var s;const n=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var i;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=Q(e,Km);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=ku([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Re(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=We(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=Q(e,qm);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=We(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:xu(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=Q(e,vw);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=Q(e,jm);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=Q(e,Gm);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=Q(e,Ym);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,p)=>{t(c,p);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=Q(e,Zm);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class di{constructor(e){this._keypair=void 0,this._keypair=e??Su()}static generate(){return new di(Su())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=mo(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new di({publicKey:n,secretKey:e})}static fromSeed(e){const t=mo(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new di({publicKey:t,secretKey:n})}get publicKey(){return new X(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Vn=Object.freeze({CreateLookupTable:{index:0,layout:oe([se("instruction"),Ei("recentSlot"),Ie("bumpSeed")])},FreezeLookupTable:{index:1,layout:oe([se("instruction")])},ExtendLookupTable:{index:2,layout:oe([se("instruction"),Ei(),Ot(Ee(),hr(se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:oe([se("instruction")])},CloseLookupTable:{index:4,layout:oe([se("instruction")])}});class Ew{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Vn))if(o.index==n){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Me(Vn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Me(Vn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new X(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Tl.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Tl{constructor(){}static createLookupTable(e){const[t,n]=X.findProgramAddressSync([e.authority.toBuffer(),Qd().encode(e.recentSlot)],this.programId),s=Vn.CreateLookupTable,i=Ae(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Mt.programId,isSigner:!1,isWritable:!1}];return[new Ne({programId:this.programId,keys:o,data:i}),t]}static freezeLookupTable(e){const t=Vn.FreezeLookupTable,n=Ae(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ne({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){const t=Vn.ExtendLookupTable,n=Ae(t,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Mt.programId,isSigner:!1,isWritable:!1}),new Ne({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){const t=Vn.DeactivateLookupTable,n=Ae(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ne({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){const t=Vn.CloseLookupTable,n=Ae(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Ne({programId:this.programId,keys:s,data:n})}}Tl.programId=new X("AddressLookupTab1e1111111111111111111111111");class _w{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ie("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(xn))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Me(xn.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Me(xn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Me(xn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Me(xn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Cl.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const xn=Object.freeze({RequestUnits:{index:0,layout:oe([Ie("instruction"),se("units"),se("additionalFee")])},RequestHeapFrame:{index:1,layout:oe([Ie("instruction"),se("bytes")])},SetComputeUnitLimit:{index:2,layout:oe([Ie("instruction"),se("units")])},SetComputeUnitPrice:{index:3,layout:oe([Ie("instruction"),Ei("microLamports")])}});class Cl{constructor(){}static requestUnits(e){const t=xn.RequestUnits,n=Ae(t,e);return new Ne({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=xn.RequestHeapFrame,n=Ae(t,e);return new Ne({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=xn.SetComputeUnitLimit,n=Ae(t,e);return new Ne({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=xn.SetComputeUnitPrice,n=Ae(t,{microLamports:BigInt(e.microLamports)});return new Ne({keys:[],programId:this.programId,data:n})}}Cl.programId=new X("ComputeBudget111111111111111111111111111111");const Tu=64,Cu=32,Lu=64,Pu=oe([Ie("numSignatures"),Ie("padding"),dn("signatureOffset"),dn("signatureInstructionIndex"),dn("publicKeyOffset"),dn("publicKeyInstructionIndex"),dn("messageDataOffset"),dn("messageDataSize"),dn("messageInstructionIndex")]);class Zo{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,instructionIndex:i}=e;Re(t.length===Cu,`Public Key must be ${Cu} bytes but received ${t.length} bytes`),Re(s.length===Lu,`Signature must be ${Lu} bytes but received ${s.length} bytes`);const o=Pu.span,a=o+t.length,c=a+s.length,p=1,g=le.Buffer.alloc(c+n.length),b=i??65535;return Pu.encode({numSignatures:p,padding:0,signatureOffset:a,signatureInstructionIndex:b,publicKeyOffset:o,publicKeyInstructionIndex:b,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:b},g),g.fill(t,o),g.fill(s,a),g.fill(n,c),new Ne({keys:[],programId:Zo.programId,data:g})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Re(t.length===Tu,`Private key must be ${Tu} bytes but received ${t.length} bytes`);try{const i=di.fromSecretKey(t),o=i.publicKey.toBytes(),a=_l(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Zo.programId=new X("Ed25519SigVerify111111111111111111111111111");const Aw=(r,e)=>{const t=El.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};El.utils.isValidPrivateKey;const kw=El.getPublicKey,Nu=32,qa=20,Ou=64,Iw=11,Ha=oe([Ie("numSignatures"),dn("signatureOffset"),Ie("signatureInstructionIndex"),dn("ethAddressOffset"),Ie("ethAddressInstructionIndex"),dn("messageDataOffset"),dn("messageDataSize"),Ie("messageInstructionIndex"),Ke(20,"ethAddress"),Ke(64,"signature"),Ie("recoveryId")]);class fi{constructor(){}static publicKeyToEthAddress(e){Re(e.length===Ou,`Public key must be ${Ou} bytes but received ${e.length} bytes`);try{return le.Buffer.from(wu(be(e))).slice(-qa)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,recoveryId:i,instructionIndex:o}=e;return fi.createInstructionWithEthAddress({ethAddress:fi.publicKeyToEthAddress(t),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=le.Buffer.from(t.substr(2),"hex"):a=le.Buffer.from(t,"hex"):a=t,Re(a.length===qa,`Address must be ${qa} bytes but received ${a.length} bytes`);const c=1+Iw,p=c,g=c+a.length,b=g+s.length+1,I=1,m=le.Buffer.alloc(Ha.span+n.length);return Ha.encode({numSignatures:I,signatureOffset:g,signatureInstructionIndex:o,ethAddressOffset:p,ethAddressInstructionIndex:o,messageDataOffset:b,messageDataSize:n.length,messageInstructionIndex:o,signature:be(s),ethAddress:be(a),recoveryId:i},m),m.fill(be(n),Ha.span),new Ne({keys:[],programId:fi.programId,data:m})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Re(t.length===Nu,`Private key must be ${Nu} bytes but received ${t.length} bytes`);try{const i=be(t),o=kw(i,!1).slice(1),a=le.Buffer.from(wu(be(n))),[c,p]=Aw(a,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:c,recoveryId:p,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}fi.programId=new X("KeccakSecp256k11111111111111111111111111111");var Uf;const zf=new X("StakeConfig11111111111111111111111111111111");class Ff{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class gs{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}Uf=gs;gs.default=new Uf(0,0,X.default);class xw{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(xt))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Me(xt.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Ff(new X(t.staker),new X(t.withdrawer)),lockup:new gs(n.unixTimestamp,n.epoch,new X(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Me(xt.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Me(xt.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new X(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:i}=Me(xt.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new X(i),newAuthorizedPubkey:new X(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Me(xt.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Me(xt.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Me(xt.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Me(xt.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Jo.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const xt=Object.freeze({Initialize:{index:0,layout:oe([se("instruction"),Cy(),Ly()])},Authorize:{index:1,layout:oe([se("instruction"),Ee("newAuthorized"),se("stakeAuthorizationType")])},Delegate:{index:2,layout:oe([se("instruction")])},Split:{index:3,layout:oe([se("instruction"),rn("lamports")])},Withdraw:{index:4,layout:oe([se("instruction"),rn("lamports")])},Deactivate:{index:5,layout:oe([se("instruction")])},Merge:{index:7,layout:oe([se("instruction")])},AuthorizeWithSeed:{index:8,layout:oe([se("instruction"),Ee("newAuthorized"),se("stakeAuthorizationType"),xr("authoritySeed"),Ee("authorityOwner")])}}),Rw=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Jo{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:s}=e,i=s||gs.default,o=xt.Initialize,a=Ae(o,{authorized:{staker:be(n.staker.toBuffer()),withdrawer:be(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:be(i.custodian.toBuffer())}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Ne(c)}static createAccountWithSeed(e){const t=new ke;t.add(Mt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(e){const t=new ke;t.add(Mt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:s}=e,i=xt.Delegate,o=Ae(i);return new ke().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:zf,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,a=xt.Authorize,c=Ae(a,{newAuthorized:be(s.toBuffer()),stakeAuthorizationType:i.index}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:An,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new ke().add({keys:p,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:c}=e,p=xt.AuthorizeWithSeed,g=Ae(p,{newAuthorized:be(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:be(i.toBuffer())}),b=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1}];return c&&b.push({pubkey:c,isSigner:!0,isWritable:!1}),new ke().add({keys:b,programId:this.programId,data:g})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=e,o=xt.Split,a=Ae(o,{lamports:i});return new Ne({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){const n=new ke;return n.add(Mt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:a,lamports:c}=e,p=new ke;return p.add(Mt.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&p.add(Mt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),p.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:c}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:s}=e,i=xt.Merge,o=Ae(i);return new ke().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=e,a=xt.Withdraw,c=Ae(a,{lamports:i}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new ke().add({keys:p,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,s=xt.Deactivate,i=Ae(s);return new ke().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Jo.programId=new X("Stake11111111111111111111111111111111111111");Jo.space=200;class Df{constructor(e,t,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=s}}class Bw{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Rn))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Me(Rn.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Df(new X(t.nodePubkey),new X(t.authorizedVoter),new X(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Me(Rn.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new X(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:i}}=Me(Rn.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new X(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new X(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Me(Rn.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Li.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Rn=Object.freeze({InitializeAccount:{index:0,layout:oe([se("instruction"),Py()])},Authorize:{index:1,layout:oe([se("instruction"),Ee("newAuthorized"),se("voteAuthorizationType")])},Withdraw:{index:3,layout:oe([se("instruction"),rn("lamports")])},UpdateValidatorIdentity:{index:4,layout:oe([se("instruction")])},AuthorizeWithSeed:{index:10,layout:oe([se("instruction"),Ny()])}}),Mw=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Li{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:s}=e,i=Rn.InitializeAccount,o=Ae(i,{voteInit:{nodePubkey:be(s.nodePubkey.toBuffer()),authorizedVoter:be(s.authorizedVoter.toBuffer()),authorizedWithdrawer:be(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ne(a)}static createAccount(e){const t=new ke;return t.add(Mt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=Rn.Authorize,a=Ae(o,{newAuthorized:be(s.toBuffer()),voteAuthorizationType:i.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ke().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=e,c=Rn.AuthorizeWithSeed,p=Ae(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:be(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:be(i.toBuffer()),voteAuthorizationType:o.index}}),g=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ke().add({keys:g,programId:this.programId,data:p})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=e,o=Rn.Withdraw,a=Ae(o,{lamports:s}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new ke().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return Li.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,i=Rn.UpdateValidatorIdentity,o=Ae(i),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ke().add({keys:a,programId:this.programId,data:o})}}Li.programId=new X("Vote111111111111111111111111111111111111111");Li.space=3762;const Kf=new X("Va1idator1nfo111111111111111111111111111111"),Tw=Z({name:J(),website:de(J()),details:de(J()),iconUrl:de(J()),keybaseUsername:de(J())});class Ll{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Yt(t)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new X(Zt(t,0,Mn)),a=In(t)===1;s.push({publicKey:o,isSigner:a})}if(s[0].publicKey.equals(Kf)&&s[1].isSigner){const i=xr().decode(le.Buffer.from(t)),o=JSON.parse(i);return ef(o,Tw),new Ll(s[1].publicKey,o)}return null}}const Cw=new X("Vote111111111111111111111111111111111111111"),Lw=oe([Ee("nodePubkey"),Ee("authorizedWithdrawer"),Ie("commission"),Ct(),Ot(oe([Ct("slot"),se("confirmationCount")]),hr(se(),-8),"votes"),Ie("rootSlotValid"),Ct("rootSlot"),Ct(),Ot(oe([Ct("epoch"),Ee("authorizedVoter")]),hr(se(),-8),"authorizedVoters"),oe([Ot(oe([Ee("authorizedPubkey"),Ct("epochOfLastAuthorizedSwitch"),Ct("targetEpoch")]),32,"buf"),Ct("idx"),Ie("isEmpty")],"priorVoters"),Ct(),Ot(oe([Ct("epoch"),Ct("credits"),Ct("prevCredits")]),hr(se(),-8),"epochCredits"),oe([Ct("slot"),Ct("timestamp")],"lastTimestamp")]);class Pl{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Lw.decode(be(e),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new Pl({nodePubkey:new X(n.nodePubkey),authorizedWithdrawer:new X(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(Pw),priorVoters:Nw(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Pw({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new X(r)}}function Wu({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new X(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Nw({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(Wu),...r.slice(0,e).map(Wu)]}const Uu={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Ow(r,e){const t=e===!1?"http":"https";if(!r)return Uu[t].devnet;const n=Uu[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function Ww(r,e,t,n){let s,i;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,i=n):i=t;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},a=await r.sendRawTransaction(e,o),c=i&&i.commitment,g=(await(s?r.confirmTransaction(s,c):r.confirmTransaction(a,c))).value;if(g.err)throw a!=null?new os({action:o!=null&&o.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(g)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(g)})`);return a}const Uw=1e9,zw=Object.freeze(Object.defineProperty({__proto__:null,Account:By,AddressLookupTableAccount:uc,AddressLookupTableInstruction:Ew,AddressLookupTableProgram:Tl,Authorized:Ff,BLOCKHASH_CACHE_TIMEOUT_MS:xf,BPF_LOADER_DEPRECATED_PROGRAM_ID:My,BPF_LOADER_PROGRAM_ID:Gy,BpfLoader:Yy,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:xn,ComputeBudgetInstruction:_w,ComputeBudgetProgram:Cl,Connection:Wf,Ed25519Program:Zo,Enum:xy,EpochSchedule:kf,FeeCalculatorLayout:_f,Keypair:di,LAMPORTS_PER_SOL:Uw,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Vn,Loader:Wr,Lockup:gs,MAX_SEED_LENGTH:bf,Message:Sn,MessageAccountKeys:ss,MessageV0:Or,NONCE_ACCOUNT_LENGTH:lc,NonceAccount:Vo,PACKET_DATA_SIZE:pr,PUBLIC_KEY_LENGTH:Mn,PublicKey:X,SIGNATURE_LENGTH_IN_BYTES:bi,SOLANA_SCHEMA:Ji,STAKE_CONFIG_ID:zf,STAKE_INSTRUCTION_LAYOUTS:xt,SYSTEM_INSTRUCTION_LAYOUTS:Ue,SYSVAR_CLOCK_PUBKEY:An,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Fy,SYSVAR_INSTRUCTIONS_PUBKEY:Dy,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Ms,SYSVAR_RENT_PUBKEY:Si,SYSVAR_REWARDS_PUBKEY:Ky,SYSVAR_SLOT_HASHES_PUBKEY:$y,SYSVAR_SLOT_HISTORY_PUBKEY:qy,SYSVAR_STAKE_HISTORY_PUBKEY:Ts,Secp256k1Program:fi,SendTransactionError:os,SolanaJSONRPCError:ce,SolanaJSONRPCErrorCode:Hy,StakeAuthorizationLayout:Rw,StakeInstruction:xw,StakeProgram:Jo,Struct:Al,SystemInstruction:jy,SystemProgram:Mt,Transaction:ke,TransactionExpiredBlockheightExceededError:kl,TransactionExpiredNonceInvalidError:ai,TransactionExpiredTimeoutError:Il,TransactionInstruction:Ne,TransactionMessage:xl,TransactionStatus:Kn,VALIDATOR_INFO_KEY:Kf,VERSION_PREFIX_MASK:qo,VOTE_PROGRAM_ID:Cw,ValidatorInfo:Ll,VersionedMessage:jo,VersionedTransaction:vi,VoteAccount:Pl,VoteAuthorizationLayout:Mw,VoteInit:Df,VoteInstruction:Bw,VoteProgram:Li,clusterApiUrl:Ow,sendAndConfirmRawTransaction:Ww,sendAndConfirmTransaction:cc},Symbol.toStringTag,{value:"Module"})),$f=fe.createContext({});function Fw(){return fe.useContext($f)}const vS=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=fe.useMemo(()=>new Wf(e,t),[e,t]);return el.createElement($f.Provider,{value:{connection:n}},r)};class it extends Error{constructor(e,t){super(e),this.error=t}}class bo extends it{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Dw extends it{constructor(){super(...arguments),this.name="WalletLoadError"}}class ci extends it{constructor(){super(...arguments),this.name="WalletConfigError"}}class qf extends it{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Hf extends it{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class jf extends it{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Rr extends it{constructor(){super(...arguments),this.name="WalletAccountError"}}class Vf extends it{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Kw extends it{constructor(){super(...arguments),this.name="WalletKeypairError"}}class Bn extends it{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Br extends it{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Mr extends it{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Gf extends it{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class pc extends it{constructor(){super(...arguments),this.name="WalletSignInError"}}class $w extends it{constructor(){super(...arguments),this.name="WalletTimeoutError"}}class qw extends it{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}class Hw extends it{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}var Jt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Jt||(Jt={}));class Nl extends $o{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const s=this.publicKey;if(!s)throw new Bn;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function jw(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const i of e)i()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function Vw(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function ur(r){return"version"in r}class Yf extends Nl{async sendTransaction(e,t,n={}){let s=!0;try{if(ur(e)){if(!this.supportedTransactionVersions)throw new Br("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Br(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const i=e.serialize();return await t.sendRawTransaction(i,n)}catch(i){throw i instanceof Mr?(s=!1,i):new Br(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=n;e=await this.prepareTransaction(e,t,o),i!=null&&i.length&&e.partialSign(...i),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(i){throw i instanceof Mr?(s=!1,i):new Br(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(e){for(const n of e)if(ur(n)){if(!this.supportedTransactionVersions)throw new Mr("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Mr(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class Zf extends Yf{}class Gw extends Zf{}const Gn="solana:signAndSendTransaction",Cs="solana:signIn",Yr="solana:signMessage",Rt="solana:signTransaction",Yw="solana:signAndSendAllTransactions",Zw=Object.freeze(Object.defineProperty({__proto__:null,SignAndSendAllTransactions:Yw,SolanaSignAndSendTransaction:Gn,SolanaSignIn:Cs,SolanaSignMessage:Yr,SolanaSignTransaction:Rt},Symbol.toStringTag,{value:"Module"})),Xo="standard:connect",Jw=Xo,vo="standard:disconnect",Xw=vo,Qo="standard:events",Qw=Qo,e1=Object.freeze(Object.defineProperty({__proto__:null,Connect:Jw,Disconnect:Xw,Events:Qw,StandardConnect:Xo,StandardDisconnect:vo,StandardEvents:Qo},Symbol.toStringTag,{value:"Module"}));function Jf(r){return Xo in r.features&&Qo in r.features&&(Gn in r.features||Rt in r.features)}var gc;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(gc||(gc={}));const t1=Object.freeze(Object.defineProperty({__proto__:null,BaseMessageSignerWalletAdapter:Zf,BaseSignInMessageSignerWalletAdapter:Gw,BaseSignerWalletAdapter:Yf,BaseWalletAdapter:Nl,EventEmitter:$o,WalletAccountError:Rr,get WalletAdapterNetwork(){return gc},WalletConfigError:ci,WalletConnectionError:qf,WalletDisconnectedError:Hf,WalletDisconnectionError:jf,WalletError:it,WalletKeypairError:Kw,WalletLoadError:Dw,WalletNotConnectedError:Bn,WalletNotReadyError:bo,WalletPublicKeyError:Vf,get WalletReadyState(){return Jt},WalletSendTransactionError:Br,WalletSignInError:pc,WalletSignMessageError:Gf,WalletSignTransactionError:Mr,WalletTimeoutError:$w,WalletWindowBlockedError:qw,WalletWindowClosedError:Hw,isIosAndRedirectable:Vw,isVersionedTransaction:ur,isWalletAdapterCompatibleStandardWallet:Jf,scopePollingDetectionStrategy:jw},Symbol.toStringTag,{value:"Module"}));class zu extends it{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const n1=[],ea={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){yn("call","select")},connect(){return Promise.reject(yn("call","connect"))},disconnect(){return Promise.reject(yn("call","disconnect"))},sendTransaction(){return Promise.reject(yn("call","sendTransaction"))},signTransaction(){return Promise.reject(yn("call","signTransaction"))},signAllTransactions(){return Promise.reject(yn("call","signAllTransactions"))},signMessage(){return Promise.reject(yn("call","signMessage"))},signIn(){return Promise.reject(yn("call","signIn"))}};Object.defineProperty(ea,"wallets",{get(){return yn("read","wallets"),n1}});Object.defineProperty(ea,"wallet",{get(){return yn("read","wallet"),null}});Object.defineProperty(ea,"publicKey",{get(){return yn("read","publicKey"),null}});function yn(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const Xf=fe.createContext(ea);function SS(){return fe.useContext(Xf)}function r1(r,e){const t=fe.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return e}),n=t[0],s=fe.useRef(!0);return fe.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),t}var yr={};const i1=Xn(t1),Qf=Xn(zw),eh=Xn(Zw);var Nn={},ys={},s1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},th={},ln={};let Ol;const o1=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ln.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ln.getSymbolTotalCodewords=function(e){return o1[e]};ln.getBCHDigit=function(r){let e=0;for(;r!==0;)e++,r>>>=1;return e};ln.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ol=e};ln.isKanjiModeEnabled=function(){return typeof Ol<"u"};ln.toSJIS=function(e){return Ol(e)};var ta={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}})(ta);function nh(){this.buffer=[],this.length=0}nh.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let t=0;t<e;t++)this.putBit((r>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var a1=nh;function ms(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}ms.prototype.set=function(r,e,t,n){const s=r*this.size+e;this.data[s]=t,n&&(this.reservedBit[s]=!0)};ms.prototype.get=function(r,e){return this.data[r*this.size+e]};ms.prototype.xor=function(r,e,t){this.data[r*this.size+e]^=t};ms.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]};var c1=ms,rh={};(function(r){const e=ln.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}})(rh);var ih={};const l1=ln.getSymbolSize,Fu=7;ih.getPositions=function(e){const t=l1(e);return[[0,0],[t-Fu,0],[0,t-Fu]]};var sh={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,p=null,g=null;for(let b=0;b<i;b++){a=c=0,p=g=null;for(let I=0;I<i;I++){let m=s.get(b,I);m===p?a++:(a>=5&&(o+=e.N1+(a-5)),p=m,a=1),m=s.get(I,b),m===g?c++:(c>=5&&(o+=e.N1+(c-5)),g=m,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const p=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(p===4||p===0)&&o++}return o*e.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let p=0;p<i;p++){a=c=0;for(let g=0;g<i;g++)a=a<<1&2047|s.get(p,g),g>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(g,p),g>=10&&(c===1488||c===93)&&o++}return o*e.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,t(s,c,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,c=1/0;for(let p=0;p<o;p++){i(p),r.applyMask(p,s);const g=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(p,s),g<c&&(c=g,a=p)}return a}})(sh);var na={};const dr=ta,Rs=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Bs=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];na.getBlocksCount=function(e,t){switch(t){case dr.L:return Rs[(e-1)*4+0];case dr.M:return Rs[(e-1)*4+1];case dr.Q:return Rs[(e-1)*4+2];case dr.H:return Rs[(e-1)*4+3];default:return}};na.getTotalCodewordsCount=function(e,t){switch(t){case dr.L:return Bs[(e-1)*4+0];case dr.M:return Bs[(e-1)*4+1];case dr.Q:return Bs[(e-1)*4+2];case dr.H:return Bs[(e-1)*4+3];default:return}};var oh={},ra={};const Xi=new Uint8Array(512),So=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Xi[t]=e,So[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Xi[t]=Xi[t-255]})();ra.log=function(e){if(e<1)throw new Error("log("+e+")");return So[e]};ra.exp=function(e){return Xi[e]};ra.mul=function(e,t){return e===0||t===0?0:Xi[So[e]+So[t]]};(function(r){const e=ra;r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(oh);const ah=oh;function Wl(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Wl.prototype.initialize=function(e){this.degree=e,this.genPoly=ah.generateECPolynomial(this.degree)};Wl.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=ah.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var u1=Wl,ch={},mr={},Ul={};Ul.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var On={};const lh="[0-9]+",d1="[A-Z $%*+\\-./:]+";let cs="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";cs=cs.replace(/u/g,"\\u");const f1="(?:(?![A-Z0-9 $%*+\\-./:]|"+cs+`)(?:.|[\r
]))+`;On.KANJI=new RegExp(cs,"g");On.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");On.BYTE=new RegExp(f1,"g");On.NUMERIC=new RegExp(lh,"g");On.ALPHANUMERIC=new RegExp(d1,"g");const h1=new RegExp("^"+cs+"$"),p1=new RegExp("^"+lh+"$"),g1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");On.testKanji=function(e){return h1.test(e)};On.testNumeric=function(e){return p1.test(e)};On.testAlphanumeric=function(e){return g1.test(e)};(function(r){const e=Ul,t=On;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return t.testNumeric(i)?r.NUMERIC:t.testAlphanumeric(i)?r.ALPHANUMERIC:t.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(mr);(function(r){const e=ln,t=na,n=ta,s=mr,i=Ul,o=7973,a=e.getBCHDigit(o);function c(I,m,R){for(let x=1;x<=40;x++)if(m<=r.getCapacity(x,R,I))return x}function p(I,m){return s.getCharCountIndicator(I,m)+4}function g(I,m){let R=0;return I.forEach(function(x){const k=p(x.mode,m);R+=k+x.getBitsLength()}),R}function b(I,m){for(let R=1;R<=40;R++)if(g(I,R)<=r.getCapacity(R,m,s.MIXED))return R}r.from=function(m,R){return i.isValid(m)?parseInt(m,10):R},r.getCapacity=function(m,R,x){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=s.BYTE);const k=e.getSymbolTotalCodewords(m),M=t.getTotalCodewordsCount(m,R),C=(k-M)*8;if(x===s.MIXED)return C;const L=C-p(x,m);switch(x){case s.NUMERIC:return Math.floor(L/10*3);case s.ALPHANUMERIC:return Math.floor(L/11*2);case s.KANJI:return Math.floor(L/13);case s.BYTE:default:return Math.floor(L/8)}},r.getBestVersionForData=function(m,R){let x;const k=n.from(R,n.M);if(Array.isArray(m)){if(m.length>1)return b(m,k);if(m.length===0)return 1;x=m[0]}else x=m;return c(x.mode,x.getLength(),k)},r.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let R=m<<12;for(;e.getBCHDigit(R)-a>=0;)R^=o<<e.getBCHDigit(R)-a;return m<<12|R}})(ch);var uh={};const yc=ln,dh=1335,y1=21522,Du=yc.getBCHDigit(dh);uh.getEncodedBits=function(e,t){const n=e.bit<<3|t;let s=n<<10;for(;yc.getBCHDigit(s)-Du>=0;)s^=dh<<yc.getBCHDigit(s)-Du;return(n<<10|s)^y1};var fh={};const m1=mr;function _i(r){this.mode=m1.NUMERIC,this.data=r.toString()}_i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};_i.prototype.getLength=function(){return this.data.length};_i.prototype.getBitsLength=function(){return _i.getBitsLength(this.data.length)};_i.prototype.write=function(e){let t,n,s;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),s=parseInt(n,10),e.put(s,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),s=parseInt(n,10),e.put(s,i*3+1))};var w1=_i;const b1=mr,ja=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ai(r){this.mode=b1.ALPHANUMERIC,this.data=r}Ai.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ai.prototype.getLength=function(){return this.data.length};Ai.prototype.getBitsLength=function(){return Ai.getBitsLength(this.data.length)};Ai.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=ja.indexOf(this.data[t])*45;n+=ja.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(ja.indexOf(this.data[t]),6)};var v1=Ai;const S1=mr;function ki(r){this.mode=S1.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}ki.getBitsLength=function(e){return e*8};ki.prototype.getLength=function(){return this.data.length};ki.prototype.getBitsLength=function(){return ki.getBitsLength(this.data.length)};ki.prototype.write=function(r){for(let e=0,t=this.data.length;e<t;e++)r.put(this.data[e],8)};var E1=ki;const _1=mr,A1=ln;function Ii(r){this.mode=_1.KANJI,this.data=r}Ii.getBitsLength=function(e){return e*13};Ii.prototype.getLength=function(){return this.data.length};Ii.prototype.getBitsLength=function(){return Ii.getBitsLength(this.data.length)};Ii.prototype.write=function(r){let e;for(e=0;e<this.data.length;e++){let t=A1.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),r.put(t,13)}};var k1=Ii,hh={exports:{}};(function(r){var e={single_source_shortest_paths:function(t,n,s){var i={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,p,g,b,I,m,R,x,k;!a.empty();){c=a.pop(),p=c.value,b=c.cost,I=t[p]||{};for(g in I)I.hasOwnProperty(g)&&(m=I[g],R=b+m,x=o[g],k=typeof o[g]>"u",(k||x>R)&&(o[g]=R,a.push(g,R),i[g]=p))}if(typeof s<"u"&&typeof o[s]>"u"){var M=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(M)}return i},extract_shortest_path_from_predecessor_list:function(t,n){for(var s=[],i=n;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,n,s){var i=e.single_source_shortest_paths(t,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,s={},i;t=t||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=t.sorter||n.default_sorter,s},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var s={value:t,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(hh);var I1=hh.exports;(function(r){const e=mr,t=w1,n=v1,s=E1,i=k1,o=On,a=ln,c=I1;function p(M){return unescape(encodeURIComponent(M)).length}function g(M,C,L){const U=[];let P;for(;(P=M.exec(L))!==null;)U.push({data:P[0],index:P.index,mode:C,length:P[0].length});return U}function b(M){const C=g(o.NUMERIC,e.NUMERIC,M),L=g(o.ALPHANUMERIC,e.ALPHANUMERIC,M);let U,P;return a.isKanjiModeEnabled()?(U=g(o.BYTE,e.BYTE,M),P=g(o.KANJI,e.KANJI,M)):(U=g(o.BYTE_KANJI,e.BYTE,M),P=[]),C.concat(L,U,P).sort(function(H,G){return H.index-G.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function I(M,C){switch(C){case e.NUMERIC:return t.getBitsLength(M);case e.ALPHANUMERIC:return n.getBitsLength(M);case e.KANJI:return i.getBitsLength(M);case e.BYTE:return s.getBitsLength(M)}}function m(M){return M.reduce(function(C,L){const U=C.length-1>=0?C[C.length-1]:null;return U&&U.mode===L.mode?(C[C.length-1].data+=L.data,C):(C.push(L),C)},[])}function R(M){const C=[];for(let L=0;L<M.length;L++){const U=M[L];switch(U.mode){case e.NUMERIC:C.push([U,{data:U.data,mode:e.ALPHANUMERIC,length:U.length},{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.ALPHANUMERIC:C.push([U,{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.KANJI:C.push([U,{data:U.data,mode:e.BYTE,length:p(U.data)}]);break;case e.BYTE:C.push([{data:U.data,mode:e.BYTE,length:p(U.data)}])}}return C}function x(M,C){const L={},U={start:{}};let P=["start"];for(let K=0;K<M.length;K++){const H=M[K],G=[];for(let z=0;z<H.length;z++){const Y=H[z],q=""+K+z;G.push(q),L[q]={node:Y,lastCount:0},U[q]={};for(let V=0;V<P.length;V++){const v=P[V];L[v]&&L[v].node.mode===Y.mode?(U[v][q]=I(L[v].lastCount+Y.length,Y.mode)-I(L[v].lastCount,Y.mode),L[v].lastCount+=Y.length):(L[v]&&(L[v].lastCount=Y.length),U[v][q]=I(Y.length,Y.mode)+4+e.getCharCountIndicator(Y.mode,C))}}P=G}for(let K=0;K<P.length;K++)U[P[K]].end=0;return{map:U,table:L}}function k(M,C){let L;const U=e.getBestModeForData(M);if(L=e.from(C,U),L!==e.BYTE&&L.bit<U.bit)throw new Error('"'+M+'" cannot be encoded with mode '+e.toString(L)+`.
 Suggested mode is: `+e.toString(U));switch(L===e.KANJI&&!a.isKanjiModeEnabled()&&(L=e.BYTE),L){case e.NUMERIC:return new t(M);case e.ALPHANUMERIC:return new n(M);case e.KANJI:return new i(M);case e.BYTE:return new s(M)}}r.fromArray=function(C){return C.reduce(function(L,U){return typeof U=="string"?L.push(k(U,null)):U.data&&L.push(k(U.data,U.mode)),L},[])},r.fromString=function(C,L){const U=b(C,a.isKanjiModeEnabled()),P=R(U),K=x(P,L),H=c.find_path(K.map,"start","end"),G=[];for(let z=1;z<H.length-1;z++)G.push(K.table[H[z]].node);return r.fromArray(m(G))},r.rawSplit=function(C){return r.fromArray(b(C,a.isKanjiModeEnabled()))}})(fh);const ia=ln,Va=ta,x1=a1,R1=c1,B1=rh,M1=ih,mc=sh,wc=na,T1=u1,Eo=ch,C1=uh,L1=mr,Ga=fh;function P1(r,e){const t=r.size,n=M1.getPositions(e);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||t<=i+a))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?r.set(i+a,o+c,!0,!0):r.set(i+a,o+c,!1,!0))}}function N1(r){const e=r.size;for(let t=8;t<e-8;t++){const n=t%2===0;r.set(t,6,n,!0),r.set(6,t,n,!0)}}function O1(r,e){const t=B1.getPositions(e);for(let n=0;n<t.length;n++){const s=t[n][0],i=t[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?r.set(s+o,i+a,!0,!0):r.set(s+o,i+a,!1,!0)}}function W1(r,e){const t=r.size,n=Eo.getEncodedBits(e);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+t-8-3,o=(n>>a&1)===1,r.set(s,i,o,!0),r.set(i,s,o,!0)}function Ya(r,e,t){const n=r.size,s=C1.getEncodedBits(e,t);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?r.set(i,8,o,!0):i<8?r.set(i+1,8,o,!0):r.set(n-15+i,8,o,!0),i<8?r.set(8,n-i-1,o,!0):i<9?r.set(8,15-i-1+1,o,!0):r.set(8,15-i-1,o,!0);r.set(n-8,8,1,!0)}function U1(r,e){const t=r.size;let n=-1,s=t-1,i=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!r.isReserved(s,a-c)){let p=!1;o<e.length&&(p=(e[o]>>>i&1)===1),r.set(s,a-c,p),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||t<=s){s-=n,n=-n;break}}}function z1(r,e,t){const n=new x1;t.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),L1.getCharCountIndicator(c.mode,r)),c.write(n)});const s=ia.getSymbolTotalCodewords(r),i=wc.getTotalCodewordsCount(r,e),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return F1(n,r,e)}function F1(r,e,t){const n=ia.getSymbolTotalCodewords(e),s=wc.getTotalCodewordsCount(e,t),i=n-s,o=wc.getBlocksCount(e,t),a=n%o,c=o-a,p=Math.floor(n/o),g=Math.floor(i/o),b=g+1,I=p-g,m=new T1(I);let R=0;const x=new Array(o),k=new Array(o);let M=0;const C=new Uint8Array(r.buffer);for(let H=0;H<o;H++){const G=H<c?g:b;x[H]=C.slice(R,R+G),k[H]=m.encode(x[H]),R+=G,M=Math.max(M,G)}const L=new Uint8Array(n);let U=0,P,K;for(P=0;P<M;P++)for(K=0;K<o;K++)P<x[K].length&&(L[U++]=x[K][P]);for(P=0;P<I;P++)for(K=0;K<o;K++)L[U++]=k[K][P];return L}function D1(r,e,t,n){let s;if(Array.isArray(r))s=Ga.fromArray(r);else if(typeof r=="string"){let p=e;if(!p){const g=Ga.rawSplit(r);p=Eo.getBestVersionForData(g,t)}s=Ga.fromString(r,p||40)}else throw new Error("Invalid data");const i=Eo.getBestVersionForData(s,t);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=z1(e,t,s),a=ia.getSymbolSize(e),c=new R1(a);return P1(c,e),N1(c),O1(c,e),Ya(c,t,0),e>=7&&W1(c,e),U1(c,o),isNaN(n)&&(n=mc.getBestMask(c,Ya.bind(null,c,t))),mc.applyMask(n,c),Ya(c,t,n),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:n,segments:s}}th.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Va.M,s,i;return typeof t<"u"&&(n=Va.from(t.errorCorrectionLevel,Va.M),s=Eo.from(t.version),i=mc.from(t.maskPattern),t.toSJISFunc&&ia.setToSJISFunction(t.toSJISFunc)),D1(e,s,n,i)};var ph={},zl={};(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,c=r.getScale(o,i),p=Math.floor((o+i.margin*2)*c),g=i.margin*c,b=[i.color.light,i.color.dark];for(let I=0;I<p;I++)for(let m=0;m<p;m++){let R=(I*p+m)*4,x=i.color.light;if(I>=g&&m>=g&&I<p-g&&m<p-g){const k=Math.floor((I-g)/c),M=Math.floor((m-g)/c);x=b[a[k*o+M]?1:0]}n[R++]=x.r,n[R++]=x.g,n[R++]=x.b,n[R]=x.a}}})(zl);(function(r){const e=zl;function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let c=a,p=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(p=n()),c=e.getOptions(c);const g=e.getImageWidth(i.modules.size,c),b=p.getContext("2d"),I=b.createImageData(g,g);return e.qrToImageData(I.data,i,c),t(b,p,g),b.putImageData(I,0,0),p},r.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const p=r.render(i,o,c),g=c.type||"image/png",b=c.rendererOpts||{};return p.toDataURL(g,b.quality)}})(ph);var gh={};const K1=zl;function Ku(r,e){const t=r.a/255,n=e+'="'+r.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function Za(r,e,t){let n=r+e;return typeof t<"u"&&(n+=" "+t),n}function $1(r,e,t){let n="",s=0,i=!1,o=0;for(let a=0;a<r.length;a++){const c=Math.floor(a%e),p=Math.floor(a/e);!c&&!i&&(i=!0),r[a]?(o++,a>0&&c>0&&r[a-1]||(n+=i?Za("M",c+t,.5+p+t):Za("m",s,0),s=0,i=!1),c+1<e&&r[a+1]||(n+=Za("h",o),o=0)):s++}return n}gh.render=function(e,t,n){const s=K1.getOptions(t),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,c=s.color.light.a?"<path "+Ku(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",p="<path "+Ku(s.color.dark,"stroke")+' d="'+$1(o,i,s.margin)+'"/>',g='viewBox="0 0 '+a+" "+a+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+g+' shape-rendering="crispEdges">'+c+p+`</svg>
`;return typeof n=="function"&&n(null,I),I};const q1=s1,bc=th,yh=ph,H1=gh;function Fl(r,e,t,n,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!q1())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=t,t=e,e=n=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=n=void 0):o===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(c,p){try{const g=bc.create(t,n);c(r(g,e,n))}catch(g){p(g)}})}try{const c=bc.create(t,n);s(null,r(c,e,n))}catch(c){s(c)}}ys.create=bc.create;ys.toCanvas=Fl.bind(null,yh.render);ys.toDataURL=Fl.bind(null,yh.renderToDataURL);ys.toString=Fl.bind(null,function(r,e,t){return H1.render(r,t)});const j1=Xn(e1);var mn={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SOLANA_CHAINS=r.SOLANA_LOCALNET_CHAIN=r.SOLANA_TESTNET_CHAIN=r.SOLANA_DEVNET_CHAIN=r.SOLANA_MAINNET_CHAIN=void 0,r.isSolanaChain=e,r.SOLANA_MAINNET_CHAIN="solana:mainnet",r.SOLANA_DEVNET_CHAIN="solana:devnet",r.SOLANA_TESTNET_CHAIN="solana:testnet",r.SOLANA_LOCALNET_CHAIN="solana:localnet",r.SOLANA_CHAINS=[r.SOLANA_MAINNET_CHAIN,r.SOLANA_DEVNET_CHAIN,r.SOLANA_TESTNET_CHAIN,r.SOLANA_LOCALNET_CHAIN];function e(t){return r.SOLANA_CHAINS.includes(t)}})(mn);var Wn={};function Ls(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const _o="https://api.mainnet-beta.solana.com",mh="https://api.devnet.solana.com",wh="https://api.testnet.solana.com",bh="http://localhost:8899";function vh(r){return r.includes(_o)?mn.SOLANA_MAINNET_CHAIN:/\bdevnet\b/i.test(r)?mn.SOLANA_DEVNET_CHAIN:/\btestnet\b/i.test(r)?mn.SOLANA_TESTNET_CHAIN:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?mn.SOLANA_LOCALNET_CHAIN:mn.SOLANA_MAINNET_CHAIN}function V1(r,e){return e||(r===mn.SOLANA_MAINNET_CHAIN?_o:r===mn.SOLANA_DEVNET_CHAIN?mh:r===mn.SOLANA_TESTNET_CHAIN?wh:r===mn.SOLANA_LOCALNET_CHAIN?bh:_o)}function Sh(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function G1(r,e){return Sh(r,e)}function Dl({message:r,signedMessage:e,signature:t,publicKey:n}){return G1(r,e)&&Ur.verify(t,e,n)}function Y1(r,e){const{message:t,account:{publicKey:n}}=r,{signedMessage:s,signature:i}=e;return Dl({message:t,signedMessage:s,signature:i,publicKey:n})}function Z1(r,e){const{signedMessage:t,signature:n,account:{publicKey:s}}=e,i=Eh(r,e);return!!i&&Dl({message:i,signedMessage:t,signature:n,publicKey:s})}function Eh(r,e){const t=_h(r,e);return t?new TextEncoder().encode(t):null}function _h(r,e){const t=Ah(e.signedMessage);if(!t||r.domain&&r.domain!==t.domain||r.address&&r.address!==t.address||r.statement!==t.statement||r.uri!==t.uri||r.version!==t.version||r.chainId!==t.chainId||r.nonce!==t.nonce||r.issuedAt!==t.issuedAt||r.expirationTime!==t.expirationTime||r.notBefore!==t.notBefore||r.requestId!==t.requestId)return null;if(r.resources){if(!t.resources||!Sh(r.resources,t.resources))return null}else if(t.resources)return null;return Kl(t)}function Ah(r){const e=new TextDecoder().decode(r);return kh(e)}const J1="(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n",X1="(?<address>[^\\n]+)(?:\\n|$)",Q1="(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??",eb="(?:\\nURI: (?<uri>[^\\n]+))?",tb="(?:\\nVersion: (?<version>[^\\n]+))?",nb="(?:\\nChain ID: (?<chainId>[^\\n]+))?",rb="(?:\\nNonce: (?<nonce>[^\\n]+))?",ib="(?:\\nIssued At: (?<issuedAt>[^\\n]+))?",sb="(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?",ob="(?:\\nNot Before: (?<notBefore>[^\\n]+))?",ab="(?:\\nRequest ID: (?<requestId>[^\\n]+))?",cb="(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?",lb=`${eb}${tb}${nb}${rb}${ib}${sb}${ob}${ab}${cb}`,ub=new RegExp(`^${J1}${X1}${Q1}${lb}\\n*$`);function kh(r){var n;const e=ub.exec(r);if(!e)return null;const t=e.groups;return t?{domain:t.domain,address:t.address,statement:t.statement,uri:t.uri,version:t.version,nonce:t.nonce,chainId:t.chainId,issuedAt:t.issuedAt,expirationTime:t.expirationTime,notBefore:t.notBefore,requestId:t.requestId,resources:(n=t.resources)==null?void 0:n.split(`
- `).slice(1)}:null}function db(r){const e=Kl(r);return new TextEncoder().encode(e)}function Kl(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const fb=Object.freeze(Object.defineProperty({__proto__:null,DEVNET_ENDPOINT:mh,LOCALNET_ENDPOINT:bh,MAINNET_ENDPOINT:_o,TESTNET_ENDPOINT:wh,createSignInMessage:db,createSignInMessageText:Kl,deriveSignInMessage:Eh,deriveSignInMessageText:_h,getChainForEndpoint:vh,getCommitment:Ls,getEndpointForChain:V1,parseSignInMessage:Ah,parseSignInMessageText:kh,verifyMessageSignature:Dl,verifySignIn:Z1,verifySignMessage:Y1},Symbol.toStringTag,{value:"Module"})),hb=Xn(fb);Object.defineProperty(Wn,"__esModule",{value:!0});var pb=hb;const on={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class an extends Error{constructor(...e){const[t,n,s]=e;super(n),this.code=t,this.data=s,this.name="SolanaMobileWalletAdapterError"}}const gb={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class sa extends Error{constructor(...e){const[t,n,s,i]=e;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function Ce(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(b){o(b)}}function c(g){try{p(n.throw(g))}catch(b){o(b)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,e||[])).next())})}function yb(r){return window.btoa(r)}function vc(r,e){const t=window.btoa(String.fromCharCode.call(null,...r));return e?t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):t}function mb(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function Ps(r,e){return Ce(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),s=new Uint8Array(t.byteLength+n.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(n),t.byteLength),s})}function wb(r){return pb.createSignInMessageText(r)}function bb(r){return yb(wb(r))}const Ih="solana:signTransactions",Sc="solana:cloneAuthorization",vb="solana:signInWithSolana";function xh(r,e){return new Proxy({},{get(t,n){return n==="then"?null:(t[n]==null&&(t[n]=function(s){return Ce(this,void 0,void 0,function*(){const{method:i,params:o}=Sb(n,s,r),a=yield e(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield _b(o.sign_in_payload,a,e)),Eb(n,a,r)})}),t[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function Sb(r,e,t){let n=e,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(t==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(t){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function Eb(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const s=[Ih];return n.supports_clone_authorization===!0&&s.push(Sc),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(Sc)})}}}return e}function _b(r,e,t){var n;return Ce(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=e.accounts[0].address,o=bb(Object.assign(Object.assign({},r),{domain:s,address:i})),a=yield t("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const Jn=4;function Ab(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Jn);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const Ec=12,$l=65;function kb(r,e,t){return Ce(this,void 0,void 0,function*(){const n=Ab(e),s=new Uint8Array(Ec);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(Bh(n,s),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function Rh(r,e){return Ce(this,void 0,void 0,function*(){const t=r.slice(0,Jn),n=r.slice(Jn,Jn+Ec),s=r.slice(Jn+Ec),i=yield crypto.subtle.decrypt(Bh(t,n),e,s);return Ib().decode(i)})}function Bh(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let Ja;function Ib(){return Ja===void 0&&(Ja=new TextDecoder("utf-8")),Ja}function Mh(){return Ce(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Ns(){return Ce(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Th(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let s=0;s<n;s++)e+=String.fromCharCode(t[s]);return window.btoa(e)}function xb(){return Ch(49152+Math.floor(Math.random()*(65535-49152+1)))}function Ch(r){if(r<49152||r>65535)throw new an(on.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Lh(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const Rb="solana-wallet";function $u(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function Ph(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new an(on.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${Rb}:/`));const n=r.startsWith("/")?r:[...$u(t.pathname),...$u(r)].join("/");return new URL(n,t)}function Bb(r,e,t,n=["v1"]){return Ce(this,void 0,void 0,function*(){const s=Ch(e),i=yield crypto.subtle.exportKey("raw",r),o=Th(i),a=Ph("v1/associate/local",t);return a.searchParams.set("association",Lh(o)),a.searchParams.set("port",`${s}`),n.forEach(c=>{a.searchParams.set("v",c)}),a})}function Mb(r,e,t,n,s=["v1"]){return Ce(this,void 0,void 0,function*(){const i=yield crypto.subtle.exportKey("raw",r),o=Th(i),a=Ph("v1/associate/remote",n);return a.searchParams.set("association",Lh(o)),a.searchParams.set("reflector",`${e}`),a.searchParams.set("id",`${vc(t,!0)}`),s.forEach(c=>{a.searchParams.set("v",c)}),a})}function Nh(r,e){return Ce(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return kb(t,n,e)})}function Oh(r,e){return Ce(this,void 0,void 0,function*(){const t=yield Rh(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new sa(n.id,n.error.code,n.error.message);return n})}function Wh(r,e,t){return Ce(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,$l),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},t,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Uh(r,e){return Ce(this,void 0,void 0,function*(){const t=yield Rh(r,e),n=JSON.parse(t);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new an(on.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}const Ao={Firefox:0,Other:1};function Tb(){return navigator.userAgent.indexOf("Firefox/")!==-1?Ao.Firefox:Ao.Other}function Cb(){return new Promise((r,e)=>{function t(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{t(),e()},3e3)})}let Oi=null;function Lb(r){Oi==null&&(Oi=document.createElement("iframe"),Oi.style.display="none",document.body.appendChild(Oi)),Oi.contentWindow.location.href=r.toString()}function Pb(r){return Ce(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=Tb();switch(e){case Ao.Firefox:Lb(r);break;case Ao.Other:{const t=Cb();window.location.assign(r),yield t;break}default:}}catch{throw new an(on.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Nb(r,e){return Ce(this,void 0,void 0,function*(){const t=xb(),n=yield Bb(r,t,e);return yield Pb(n),t})}const ko={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},zh="com.solana.mobilewalletadapter.v1",qu="com.solana.mobilewalletadapter.v1.base64";function Fh(){if(typeof window>"u"||window.isSecureContext!==!0)throw new an(on.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Dh(r){let e;try{e=new URL(r)}catch{throw new an(on.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new an(on.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Io(r){return new DataView(r).getUint32(0,!1)}function Ob(r){var e=new Uint8Array(r),t=r.byteLength,n=10,s=0,i=0,o;do{if(i>=t||i>n)throw new RangeError("Failed to decode varint");o=e[i++],s|=(o&127)<<7*i}while(o>=128);return{value:s,offset:i}}function Wb(r){let{value:e,offset:t}=Ob(r);return new Uint8Array(r.slice(t,t+e))}function Ub(r,e){return Ce(this,void 0,void 0,function*(){Fh();const t=yield Mh(),s=`ws://localhost:${yield Nb(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let i;const o=(()=>{const g=[...ko.retryDelayScheduleMs];return()=>g.length>1?g.shift():g[0]})();let a=1,c=0,p={__type:"disconnected"};return new Promise((g,b)=>{let I;const m={},R=()=>Ce(this,void 0,void 0,function*(){if(p.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);return}I.removeEventListener("open",R);const{associationKeypair:P}=p,K=yield Ns();I.send(yield Ps(K.publicKey,P.privateKey)),p={__type:"hello_req_sent",associationPublicKey:P.publicKey,ecdhPrivateKey:K.privateKey}}),x=P=>{P.wasClean?p={__type:"disconnected"}:b(new an(on.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${P.code}: ${P.reason}).`,{closeEvent:P})),C()},k=P=>Ce(this,void 0,void 0,function*(){C(),Date.now()-i>=ko.timeoutMs?b(new an(on.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(K=>{const H=o();L=window.setTimeout(K,H)}),U())}),M=P=>Ce(this,void 0,void 0,function*(){const K=yield P.data.arrayBuffer();switch(p.__type){case"connecting":if(K.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const H=yield Ns();I.send(yield Ps(H.publicKey,t.privateKey)),p={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:H.privateKey};break;case"connected":try{const G=K.slice(0,Jn),z=Io(G);if(z!==c+1)throw new Error("Encrypted message has invalid sequence number");c=z;const Y=yield Oh(K,p.sharedSecret),q=m[Y.id];delete m[Y.id],q.resolve(Y.result)}catch(G){if(G instanceof sa){const z=m[G.jsonRpcMessageId];delete m[G.jsonRpcMessageId],z.reject(G)}else throw G}break;case"hello_req_sent":{if(K.byteLength===0){const V=yield Ns();I.send(yield Ps(V.publicKey,t.privateKey)),p={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:V.privateKey};break}const G=yield Wh(K,p.associationPublicKey,p.ecdhPrivateKey),z=K.slice($l),Y=z.byteLength!==0?yield(()=>Ce(this,void 0,void 0,function*(){const V=z.slice(0,Jn),v=Io(V);if(v!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=v,Uh(z,G)}))():{protocol_version:"legacy"};p={__type:"connected",sharedSecret:G,sessionProperties:Y};const q=xh(Y.protocol_version,(V,v)=>Ce(this,void 0,void 0,function*(){const l=a++;return I.send(yield Nh({id:l,jsonrpc:"2.0",method:V,params:v??{}},G)),new Promise((h,y)=>{m[l]={resolve(S){switch(V){case"authorize":case"reauthorize":{const{wallet_uri_base:_}=S;if(_!=null)try{Dh(_)}catch(T){y(T);return}break}}h(S)},reject:y}})}));try{g(yield r(q))}catch(V){b(V)}finally{C(),I.close()}break}}});let C,L;const U=()=>{C&&C(),p={__type:"connecting",associationKeypair:t},i===void 0&&(i=Date.now()),I=new WebSocket(s,[zh]),I.addEventListener("open",R),I.addEventListener("close",x),I.addEventListener("error",k),I.addEventListener("message",M),C=()=>{window.clearTimeout(L),I.removeEventListener("open",R),I.removeEventListener("close",x),I.removeEventListener("error",k),I.removeEventListener("message",M)}};U()})})}function zb(r){return Ce(this,void 0,void 0,function*(){Fh();const e=yield Mh(),t=`wss://${r==null?void 0:r.remoteHostAuthority}/reflect`;let n;const s=(()=>{const x=[...ko.retryDelayScheduleMs];return()=>x.length>1?x.shift():x[0]})();let i=1,o=0,a,c={__type:"disconnected"},p,g,b=x=>Ce(this,void 0,void 0,function*(){if(a=="base64"){const k=yield x.data;return mb(k).buffer}else return yield x.data.arrayBuffer()});const I=yield new Promise((x,k)=>{const M=()=>Ce(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}p.protocol.includes(qu)?a="base64":a="binary",p.removeEventListener("open",M)}),C=H=>{H.wasClean?c={__type:"disconnected"}:k(new an(on.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${H.code}: ${H.reason}).`,{closeEvent:H})),g()},L=H=>Ce(this,void 0,void 0,function*(){g(),Date.now()-n>=ko.timeoutMs?k(new an(on.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${t}.`)):(yield new Promise(G=>{const z=s();P=window.setTimeout(G,z)}),K())}),U=H=>Ce(this,void 0,void 0,function*(){const G=yield b(H);if(c.__type==="connecting"){if(G.byteLength==0)throw new Error("Encountered unexpected message while connecting");const z=Wb(G);c={__type:"reflector_id_received",reflectorId:z};const Y=yield Mb(e.publicKey,r.remoteHostAuthority,z,r==null?void 0:r.baseUri);p.removeEventListener("message",U),x(Y)}});let P;const K=()=>{g&&g(),c={__type:"connecting",associationKeypair:e},n===void 0&&(n=Date.now()),p=new WebSocket(t,[zh,qu]),p.addEventListener("open",M),p.addEventListener("close",C),p.addEventListener("error",L),p.addEventListener("message",U),g=()=>{window.clearTimeout(P),p.removeEventListener("open",M),p.removeEventListener("close",C),p.removeEventListener("error",L),p.removeEventListener("message",U)}};K()});let m=!1,R;return{associationUrl:I,close:()=>{p.close(),R()},wallet:new Promise((x,k)=>{const M={},C=L=>Ce(this,void 0,void 0,function*(){const U=yield b(L);switch(c.__type){case"reflector_id_received":if(U.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const P=yield Ns(),K=yield Ps(P.publicKey,e.privateKey);a=="base64"?p.send(vc(K)):p.send(K),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:P.privateKey};break;case"connected":try{const H=U.slice(0,Jn),G=Io(H);if(G!==o+1)throw new Error("Encrypted message has invalid sequence number");o=G;const z=yield Oh(U,c.sharedSecret),Y=M[z.id];delete M[z.id],Y.resolve(z.result)}catch(H){if(H instanceof sa){const G=M[H.jsonRpcMessageId];delete M[H.jsonRpcMessageId],G.reject(H)}else throw H}break;case"hello_req_sent":{const H=yield Wh(U,c.associationPublicKey,c.ecdhPrivateKey),G=U.slice($l),z=G.byteLength!==0?yield(()=>Ce(this,void 0,void 0,function*(){const q=G.slice(0,Jn),V=Io(q);if(V!==o+1)throw new Error("Encrypted message has invalid sequence number");return o=V,Uh(G,H)}))():{protocol_version:"legacy"};c={__type:"connected",sharedSecret:H,sessionProperties:z};const Y=xh(z.protocol_version,(q,V)=>Ce(this,void 0,void 0,function*(){const v=i++,l=yield Nh({id:v,jsonrpc:"2.0",method:q,params:V??{}},H);return a=="base64"?p.send(vc(l)):p.send(l),new Promise((h,y)=>{M[v]={resolve(S){switch(q){case"authorize":case"reauthorize":{const{wallet_uri_base:_}=S;if(_!=null)try{Dh(_)}catch(T){y(T);return}break}}h(S)},reject:y}})}));m=!0;try{x(Y)}catch(q){k(q)}break}}});p.addEventListener("message",C),R=()=>{p.removeEventListener("message",C),g(),m||k(new an(on.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}Wn.SolanaCloneAuthorization=Sc;Wn.SolanaMobileWalletAdapterError=an;Wn.SolanaMobileWalletAdapterErrorCode=on;Wn.SolanaMobileWalletAdapterProtocolError=sa;Wn.SolanaMobileWalletAdapterProtocolErrorCode=gb;Wn.SolanaSignInWithSolana=vb;Wn.SolanaSignTransactions=Ih;var Fb=Wn.startRemoteScenario=zb,Db=Wn.transact=Ub;function Kb(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var R=0,x=0,k=0,M=m.length;k!==M&&m[k]===0;)k++,R++;for(var C=(M-k)*p+1>>>0,L=new Uint8Array(C);k!==M;){for(var U=m[k],P=0,K=C-1;(U!==0||P<x)&&K!==-1;K--,P++)U+=256*L[K]>>>0,L[K]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");x=P,k++}for(var H=C-x;H!==C&&L[H]===0;)H++;for(var G=a.repeat(R);H<C;++H)G+=r.charAt(L[H]);return G}function b(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var R=0,x=0,k=0;m[R]===a;)x++,R++;for(var M=(m.length-R)*c+1>>>0,C=new Uint8Array(M);m[R];){var L=m.charCodeAt(R);if(L>255)return;var U=e[L];if(U===255)return;for(var P=0,K=M-1;(U!==0||P<k)&&K!==-1;K--,P++)U+=o*C[K]>>>0,C[K]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");k=P,R++}for(var H=M-k;H!==M&&C[H]===0;)H++;for(var G=new Uint8Array(x+(M-H)),z=x;H!==M;)G[z++]=C[H++];return G}function I(m){var R=b(m);if(R)return R;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:b,decode:I}}var $b=Kb;const qb=$b,Hb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var jb=qb(Hb);const Vb=us(jb);function Xa(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function Qi(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(b){o(b)}}function c(g){try{p(n.throw(g))}catch(b){o(b)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,e||[])).next())})}function Kh(r){return window.btoa(String.fromCharCode.call(null,...r))}function Qa(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function Hu(r){const e="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return Kh(e)}function Gb(r){const t=r[0]*bi+1;return jo.deserializeMessageVersion(r.slice(t,r.length))==="legacy"?ke.from(r):vi.deserialize(r)}function Yb(r,e){return Qi(this,void 0,void 0,function*(){return yield Db(n=>r($h(n)),e)})}function Zb(r){return Qi(this,void 0,void 0,function*(){const{wallet:e,close:t,associationUrl:n}=yield Fb(r);return{wallet:e.then(i=>$h(i)),close:t,associationUrl:n}})}function $h(r){return new Proxy({},{get(e,t){if(e[t]==null)switch(t){case"signAndSendTransactions":e[t]=function(n){var{minContextSlot:s,commitment:i,skipPreflight:o,maxRetries:a,waitForCommitmentToSendNextTransaction:c,transactions:p}=n,g=Xa(n,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Qi(this,void 0,void 0,function*(){const b=p.map(Hu),I={min_context_slot:s,commitment:i,skip_preflight:o,max_retries:a,wait_for_commitment_to_send_next_transaction:c},{signatures:m}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},g),Object.values(I).some(x=>x!=null)?{options:I}:null),{payloads:b}));return m.map(Qa).map(Vb.encode)})};break;case"signMessages":e[t]=function(n){var{payloads:s}=n,i=Xa(n,["payloads"]);return Qi(this,void 0,void 0,function*(){const o=s.map(Kh),{signed_payloads:a}=yield r.signMessages(Object.assign(Object.assign({},i),{payloads:o}));return a.map(Qa)})};break;case"signTransactions":e[t]=function(n){var{transactions:s}=n,i=Xa(n,["transactions"]);return Qi(this,void 0,void 0,function*(){const o=s.map(Hu),{signed_payloads:a}=yield r.signTransactions(Object.assign(Object.assign({},i),{payloads:o}));return a.map(Qa).map(Gb)})};break;default:{e[t]=r[t];break}}return e[t]},defineProperty(){return!1},deleteProperty(){return!1}})}const Jb=Object.freeze(Object.defineProperty({__proto__:null,startRemoteScenario:Zb,transact:Yb},Symbol.toStringTag,{value:"Module"})),Xb=Xn(Jb);function Qb(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=r.length,a=r.charAt(0),c=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var R=0,x=0,k=0,M=m.length;k!==M&&m[k]===0;)k++,R++;for(var C=(M-k)*p+1>>>0,L=new Uint8Array(C);k!==M;){for(var U=m[k],P=0,K=C-1;(U!==0||P<x)&&K!==-1;K--,P++)U+=256*L[K]>>>0,L[K]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");x=P,k++}for(var H=C-x;H!==C&&L[H]===0;)H++;for(var G=a.repeat(R);H<C;++H)G+=r.charAt(L[H]);return G}function b(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var R=0,x=0,k=0;m[R]===a;)x++,R++;for(var M=(m.length-R)*c+1>>>0,C=new Uint8Array(M);m[R];){var L=m.charCodeAt(R);if(L>255)return;var U=e[L];if(U===255)return;for(var P=0,K=M-1;(U!==0||P<k)&&K!==-1;K--,P++)U+=o*C[K]>>>0,C[K]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");k=P,R++}for(var H=M-k;H!==M&&C[H]===0;)H++;for(var G=new Uint8Array(x+(M-H)),z=x;H!==M;)G[z++]=C[H++];return G}function I(m){var R=b(m);if(R)return R;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:b,decode:I}}var ev=Qb;const tv=ev,nv="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var rv=tv(nv);Object.defineProperty(Nn,"__esModule",{value:!0});var Bt=eh,ls=Qf,iv=ys,hi=j1,ju=mn,qh=Xb,sv=rv;function Hh(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var ov=Hh(iv),xo=Hh(sv);function ge(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(b){o(b)}}function c(g){try{p(n.throw(g))}catch(b){o(b)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,e||[])).next())})}function W(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Se(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t}var Wi,At,wr,Zr,jh,Vh,Gh,Os;const av=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,cv=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,lv=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Yh{constructor(){Wi.add(this),At.set(this,null),wr.set(this,{}),Zr.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),W(this,Wi,"m",Vh).call(this),W(this,At,"f")&&(W(this,At,"f").style.display="flex")},this.close=(e=void 0)=>{var t;console.debug("Modal close"),W(this,Wi,"m",Gh).call(this),W(this,At,"f")&&(W(this,At,"f").style.display="none"),(t=W(this,wr,"f").close)===null||t===void 0||t.forEach(n=>n(e))},Os.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),Se(this,At,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f")}init(){return ge(this,void 0,void 0,function*(){console.log("Injecting modal"),W(this,Wi,"m",jh).call(this)})}addEventListener(e,t){var n;return!((n=W(this,wr,"f")[e])===null||n===void 0)&&n.push(t)||(W(this,wr,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;W(this,wr,"f")[e]=(n=W(this,wr,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)}}At=new WeakMap,wr=new WeakMap,Zr=new WeakMap,Os=new WeakMap,Wi=new WeakSet,jh=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){W(this,At,"f")||Se(this,At,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f");return}Se(this,At,document.createElement("div"),"f"),W(this,At,"f").id="mobile-wallet-adapter-embedded-root-ui",W(this,At,"f").innerHTML=av,W(this,At,"f").style.display="none";const e=W(this,At,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=cv+this.contentStyles;const n=document.createElement("div");n.innerHTML=lv,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(W(this,At,"f")),document.body.appendChild(n)},Vh=function(){if(!W(this,At,"f")||W(this,Zr,"f"))return;[...W(this,At,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t==null?void 0:t.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",W(this,Os,"f")),Se(this,Zr,!0,"f")},Gh=function(){if(!W(this,Zr,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",W(this,Os,"f")),!W(this,At,"f")))return;[...W(this,At,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t==null?void 0:t.removeEventListener("click",this.close)),Se(this,Zr,!1,"f")};class uv extends Yh{constructor(){super(...arguments),this.contentStyles=fv,this.contentHtml=dv}initWithQR(e){const t=Object.create(null,{init:{get:()=>super.init}});return ge(this,void 0,void 0,function*(){t.init.call(this),this.populateQRCode(e)})}populateQRCode(e){var t;return ge(this,void 0,void 0,function*(){const n=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(n){const s=yield ov.default.toCanvas(e,{width:200,margin:0});n.firstElementChild!==null?n.replaceChild(s,n.firstElementChild):n.appendChild(s)}else console.error("QRCode Container not found")})}}const dv=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,fv=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,Zh="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function Jh(r){return"version"in r}function Xh(r){return window.btoa(String.fromCharCode.call(null,...r))}function fr(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}var Jr,Tr,_c,Ac,kc,Ic,Ui,qt,$n,rr,Xr,Qr,Ws,zi,Us,xc,zs,Qh,Rc,Fs,ei,Bc,Fi,Ds,ti,Di,Ks,Mc,Tc,$s,Cc,Lc,Pc,qs,ni,Cr,Nc,Oc,Wc,Uc,Ki,Ht,ir,sr,ri,ii,Hs,$i,js,Vs,gn,zc,Gs,e0,Fc,Ys,qi,Dc,Hi,Zs,si,ji,Js,Kc,$c,Xs,qc,Hc,jc,Qs;const ql="Mobile Wallet Adapter",t0=64,n0=[Bt.SolanaSignAndSendTransaction,Bt.SolanaSignTransaction,Bt.SolanaSignMessage,Bt.SolanaSignIn];class r0{constructor(e){Jr.add(this),Tr.set(this,{}),_c.set(this,"1.0.0"),Ac.set(this,ql),kc.set(this,"https://solanamobile.com/wallets"),Ic.set(this,Zh),Ui.set(this,void 0),qt.set(this,void 0),$n.set(this,void 0),rr.set(this,!1),Xr.set(this,0),Qr.set(this,[]),Ws.set(this,void 0),zi.set(this,void 0),Us.set(this,void 0),xc.set(this,(t,n)=>{var s;return!((s=W(this,Tr,"f")[t])===null||s===void 0)&&s.push(n)||(W(this,Tr,"f")[t]=[n]),()=>W(this,Jr,"m",Qh).call(this,t,n)}),Rc.set(this,({silent:t}={})=>ge(this,void 0,void 0,function*(){if(W(this,rr,"f")||this.connected)return{accounts:this.accounts};Se(this,rr,!0,"f");try{if(t){const n=yield W(this,$n,"f").get();if(n)yield W(this,ei,"f").call(this,n);else return{accounts:this.accounts}}else yield W(this,Fs,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{Se(this,rr,!1,"f")}return{accounts:this.accounts}})),Fs.set(this,t=>ge(this,void 0,void 0,function*(){try{const n=yield W(this,$n,"f").get();if(n)return W(this,ei,"f").call(this,n),n;const s=yield W(this,Ws,"f").select(W(this,Qr,"f"));return yield W(this,ti,"f").call(this,i=>ge(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:W(this,Ui,"f"),sign_in_payload:t})]),c=W(this,Ks,"f").call(this,a.accounts),p=Object.assign(Object.assign({},a),{accounts:c,chain:s});return Promise.all([W(this,Bc,"f").call(this,o),W(this,$n,"f").set(p),W(this,ei,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),ei.set(this,t=>ge(this,void 0,void 0,function*(){var n;const s=W(this,qt,"f")==null||((n=W(this,qt,"f"))===null||n===void 0?void 0:n.accounts.length)!==t.accounts.length||W(this,qt,"f").accounts.some((i,o)=>i.address!==t.accounts[o].address);Se(this,qt,t,"f"),s&&W(this,Jr,"m",zs).call(this,"change",{accounts:this.accounts})})),Bc.set(this,t=>ge(this,void 0,void 0,function*(){const n=t.features.includes("solana:signTransactions"),s=t.supports_sign_and_send_transactions,i=Bt.SolanaSignAndSendTransaction in this.features!==s||Bt.SolanaSignTransaction in this.features!==n;Se(this,zi,Object.assign(Object.assign({},(s||!s&&!n)&&{[Bt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:W(this,$s,"f")}}),n&&{[Bt.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:W(this,Cc,"f")}}),"f"),i&&W(this,Jr,"m",zs).call(this,"change",{features:this.features})})),Fi.set(this,(t,n,s)=>ge(this,void 0,void 0,function*(){try{const i=yield t.authorize({auth_token:n,identity:W(this,Ui,"f"),chain:s}),o=W(this,Ks,"f").call(this,i.accounts),a=Object.assign(Object.assign({},i),{accounts:o,chain:s});Promise.all([W(this,$n,"f").set(a),W(this,ei,"f").call(this,a)])}catch(i){throw W(this,Ds,"f").call(this),new Error(i instanceof Error&&i.message||"Unknown error")}})),Ds.set(this,()=>ge(this,void 0,void 0,function*(){var t;W(this,$n,"f").clear(),Se(this,rr,!1,"f"),Se(this,Xr,(t=W(this,Xr,"f"),t++,t),"f"),Se(this,qt,void 0,"f"),W(this,Jr,"m",zs).call(this,"change",{accounts:this.accounts})})),ti.set(this,t=>ge(this,void 0,void 0,function*(){var n;const s=(n=W(this,qt,"f"))===null||n===void 0?void 0:n.wallet_uri_base,i=s?{baseUri:s}:void 0,o=W(this,Xr,"f");try{return yield qh.transact(t,i)}catch(a){throw W(this,Xr,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield W(this,Us,"f").call(this,this)),a}})),Di.set(this,()=>{if(!W(this,qt,"f"))throw new Error("Wallet not connected");return{authToken:W(this,qt,"f").auth_token,chain:W(this,qt,"f").chain}}),Ks.set(this,t=>t.map(n=>{var s,i;const o=fr(n.address);return{address:xo.default.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:W(this,Qr,"f"),features:(i=n.features)!==null&&i!==void 0?i:n0}})),Mc.set(this,t=>ge(this,void 0,void 0,function*(){const{authToken:n,chain:s}=W(this,Di,"f").call(this);try{return yield W(this,ti,"f").call(this,i=>ge(this,void 0,void 0,function*(){return yield W(this,Fi,"f").call(this,i,n,s),yield i.signTransactions({transactions:t})}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),Tc.set(this,(t,n)=>ge(this,void 0,void 0,function*(){const{authToken:s,chain:i}=W(this,Di,"f").call(this);try{return yield W(this,ti,"f").call(this,o=>ge(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),W(this,Fi,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{transactions:[t]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),$s.set(this,(...t)=>ge(this,void 0,void 0,function*(){const n=[];for(const s of t){const i=ls.VersionedTransaction.deserialize(s.transaction),o=yield W(this,Tc,"f").call(this,i,s.options);n.push({signature:xo.default.decode(o)})}return n})),Cc.set(this,(...t)=>ge(this,void 0,void 0,function*(){const n=t.map(({transaction:i})=>ls.VersionedTransaction.deserialize(i));return(yield W(this,Mc,"f").call(this,n)).map(i=>({signedTransaction:Jh(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),Lc.set(this,(...t)=>ge(this,void 0,void 0,function*(){const{authToken:n,chain:s}=W(this,Di,"f").call(this),i=t.map(({account:a})=>Xh(a.publicKey)),o=t.map(({message:a})=>a);try{return yield W(this,ti,"f").call(this,a=>ge(this,void 0,void 0,function*(){return yield W(this,Fi,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).map(p=>({signedMessage:p,signature:p.slice(-t0)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),Pc.set(this,(...t)=>ge(this,void 0,void 0,function*(){const n=[];if(t.length>1)for(const s of t)n.push(yield W(this,qs,"f").call(this,s));else return[yield W(this,qs,"f").call(this,t[0])];return n})),qs.set(this,t=>ge(this,void 0,void 0,function*(){var n,s;Se(this,rr,!0,"f");try{const i=yield W(this,Fs,"f").call(this,Object.assign(Object.assign({},t),{domain:(n=t==null?void 0:t.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(s=i.accounts.find(c=>c.address==o))!==null&&s!==void 0?s:{address:o}),{publicKey:fr(o)}),signedMessage:fr(i.sign_in_result.signed_message),signature:fr(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{Se(this,rr,!1,"f")}})),Se(this,$n,e.authorizationCache,"f"),Se(this,Ui,e.appIdentity,"f"),Se(this,Qr,e.chains,"f"),Se(this,Ws,e.chainSelector,"f"),Se(this,Us,e.onWalletNotFound,"f"),Se(this,zi,{[Bt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:W(this,$s,"f")}},"f")}get version(){return W(this,_c,"f")}get name(){return W(this,Ac,"f")}get url(){return W(this,kc,"f")}get icon(){return W(this,Ic,"f")}get chains(){return W(this,Qr,"f")}get features(){return Object.assign({[hi.StandardConnect]:{version:"1.0.0",connect:W(this,Rc,"f")},[hi.StandardDisconnect]:{version:"1.0.0",disconnect:W(this,Ds,"f")},[hi.StandardEvents]:{version:"1.0.0",on:W(this,xc,"f")},[Bt.SolanaSignMessage]:{version:"1.0.0",signMessage:W(this,Lc,"f")},[Bt.SolanaSignIn]:{version:"1.0.0",signIn:W(this,Pc,"f")}},W(this,zi,"f"))}get accounts(){var e,t;return(t=(e=W(this,qt,"f"))===null||e===void 0?void 0:e.accounts)!==null&&t!==void 0?t:[]}get connected(){return!!W(this,qt,"f")}get isAuthorized(){return!!W(this,qt,"f")}get currentAuthorization(){return W(this,qt,"f")}get cachedAuthorizationResult(){return W(this,$n,"f").get()}}Tr=new WeakMap,_c=new WeakMap,Ac=new WeakMap,kc=new WeakMap,Ic=new WeakMap,Ui=new WeakMap,qt=new WeakMap,$n=new WeakMap,rr=new WeakMap,Xr=new WeakMap,Qr=new WeakMap,Ws=new WeakMap,zi=new WeakMap,Us=new WeakMap,xc=new WeakMap,Rc=new WeakMap,Fs=new WeakMap,ei=new WeakMap,Bc=new WeakMap,Fi=new WeakMap,Ds=new WeakMap,ti=new WeakMap,Di=new WeakMap,Ks=new WeakMap,Mc=new WeakMap,Tc=new WeakMap,$s=new WeakMap,Cc=new WeakMap,Lc=new WeakMap,Pc=new WeakMap,qs=new WeakMap,Jr=new WeakSet,zs=function(e,...t){var n;(n=W(this,Tr,"f")[e])===null||n===void 0||n.forEach(s=>s.apply(null,t))},Qh=function(e,t){var n;W(this,Tr,"f")[e]=(n=W(this,Tr,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)};class i0{constructor(e){ni.add(this),Cr.set(this,{}),Nc.set(this,"1.0.0"),Oc.set(this,ql),Wc.set(this,"https://solanamobile.com/wallets"),Uc.set(this,Zh),Ki.set(this,void 0),Ht.set(this,void 0),ir.set(this,void 0),sr.set(this,!1),ri.set(this,0),ii.set(this,[]),Hs.set(this,void 0),$i.set(this,void 0),js.set(this,void 0),Vs.set(this,void 0),gn.set(this,void 0),zc.set(this,(t,n)=>{var s;return!((s=W(this,Cr,"f")[t])===null||s===void 0)&&s.push(n)||(W(this,Cr,"f")[t]=[n]),()=>W(this,ni,"m",e0).call(this,t,n)}),Fc.set(this,({silent:t}={})=>ge(this,void 0,void 0,function*(){if(W(this,sr,"f")||this.connected)return{accounts:this.accounts};Se(this,sr,!0,"f");try{yield W(this,Ys,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{Se(this,sr,!1,"f")}return{accounts:this.accounts}})),Ys.set(this,t=>ge(this,void 0,void 0,function*(){try{const n=yield W(this,ir,"f").get();if(n)return W(this,qi,"f").call(this,n),n;W(this,gn,"f")&&Se(this,gn,void 0,"f");const s=yield W(this,Hs,"f").select(W(this,ii,"f"));return yield W(this,si,"f").call(this,i=>ge(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:W(this,Ki,"f"),sign_in_payload:t})]),c=W(this,Js,"f").call(this,a.accounts),p=Object.assign(Object.assign({},a),{accounts:c,chain:s});return Promise.all([W(this,Dc,"f").call(this,o),W(this,ir,"f").set(p),W(this,qi,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),qi.set(this,t=>ge(this,void 0,void 0,function*(){var n;const s=W(this,Ht,"f")==null||((n=W(this,Ht,"f"))===null||n===void 0?void 0:n.accounts.length)!==t.accounts.length||W(this,Ht,"f").accounts.some((i,o)=>i.address!==t.accounts[o].address);Se(this,Ht,t,"f"),s&&W(this,ni,"m",Gs).call(this,"change",{accounts:this.accounts})})),Dc.set(this,t=>ge(this,void 0,void 0,function*(){const n=t.features.includes("solana:signTransactions"),s=t.supports_sign_and_send_transactions||t.features.includes("solana:signAndSendTransaction"),i=Bt.SolanaSignAndSendTransaction in this.features!==s||Bt.SolanaSignTransaction in this.features!==n;Se(this,$i,Object.assign(Object.assign({},s&&{[Bt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:t.supported_transaction_versions,signAndSendTransaction:W(this,Xs,"f")}}),n&&{[Bt.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:t.supported_transaction_versions,signTransaction:W(this,qc,"f")}}),"f"),i&&W(this,ni,"m",Gs).call(this,"change",{features:this.features})})),Hi.set(this,(t,n,s)=>ge(this,void 0,void 0,function*(){try{const i=yield t.authorize({auth_token:n,identity:W(this,Ki,"f")}),o=W(this,Js,"f").call(this,i.accounts),a=Object.assign(Object.assign({},i),{accounts:o,chain:s});Promise.all([W(this,ir,"f").set(a),W(this,qi,"f").call(this,a)])}catch(i){throw W(this,Zs,"f").call(this),new Error(i instanceof Error&&i.message||"Unknown error")}})),Zs.set(this,()=>ge(this,void 0,void 0,function*(){var t,n;(t=W(this,gn,"f"))===null||t===void 0||t.close(),W(this,ir,"f").clear(),Se(this,sr,!1,"f"),Se(this,ri,(n=W(this,ri,"f"),n++,n),"f"),Se(this,Ht,void 0,"f"),Se(this,gn,void 0,"f"),W(this,ni,"m",Gs).call(this,"change",{accounts:this.accounts})})),si.set(this,t=>ge(this,void 0,void 0,function*(){var n;const s=(n=W(this,Ht,"f"))===null||n===void 0?void 0:n.wallet_uri_base,o=Object.assign(Object.assign({},s?{baseUri:s}:void 0),{remoteHostAuthority:W(this,Vs,"f")}),a=W(this,ri,"f"),c=new uv;if(W(this,gn,"f"))return t(W(this,gn,"f").wallet);try{const{associationUrl:p,close:g,wallet:b}=yield qh.startRemoteScenario(o),I=c.addEventListener("close",m=>{m&&g()});return c.initWithQR(p.toString()),c.open(),Se(this,gn,{close:g,wallet:yield b},"f"),I(),c.close(),yield t(W(this,gn,"f").wallet)}catch(p){throw c.close(),W(this,ri,"f")!==a&&(yield new Promise(()=>{})),p instanceof Error&&p.name==="SolanaMobileWalletAdapterError"&&p.code==="ERROR_WALLET_NOT_FOUND"&&(yield W(this,js,"f").call(this,this)),p}})),ji.set(this,()=>{if(!W(this,Ht,"f"))throw new Error("Wallet not connected");return{authToken:W(this,Ht,"f").auth_token,chain:W(this,Ht,"f").chain}}),Js.set(this,t=>t.map(n=>{var s,i;const o=fr(n.address);return{address:xo.default.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:W(this,ii,"f"),features:(i=n.features)!==null&&i!==void 0?i:n0}})),Kc.set(this,t=>ge(this,void 0,void 0,function*(){const{authToken:n,chain:s}=W(this,ji,"f").call(this);try{return yield W(this,si,"f").call(this,i=>ge(this,void 0,void 0,function*(){return yield W(this,Hi,"f").call(this,i,n,s),yield i.signTransactions({transactions:t})}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),$c.set(this,(t,n)=>ge(this,void 0,void 0,function*(){const{authToken:s,chain:i}=W(this,ji,"f").call(this);try{return yield W(this,si,"f").call(this,o=>ge(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),W(this,Hi,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{transactions:[t]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),Xs.set(this,(...t)=>ge(this,void 0,void 0,function*(){const n=[];for(const s of t){const i=ls.VersionedTransaction.deserialize(s.transaction),o=yield W(this,$c,"f").call(this,i,s.options);n.push({signature:xo.default.decode(o)})}return n})),qc.set(this,(...t)=>ge(this,void 0,void 0,function*(){const n=t.map(({transaction:i})=>ls.VersionedTransaction.deserialize(i));return(yield W(this,Kc,"f").call(this,n)).map(i=>({signedTransaction:Jh(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),Hc.set(this,(...t)=>ge(this,void 0,void 0,function*(){const{authToken:n,chain:s}=W(this,ji,"f").call(this),i=t.map(({account:a})=>Xh(a.publicKey)),o=t.map(({message:a})=>a);try{return yield W(this,si,"f").call(this,a=>ge(this,void 0,void 0,function*(){return yield W(this,Hi,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).map(p=>({signedMessage:p,signature:p.slice(-t0)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),jc.set(this,(...t)=>ge(this,void 0,void 0,function*(){const n=[];if(t.length>1)for(const s of t)n.push(yield W(this,Qs,"f").call(this,s));else return[yield W(this,Qs,"f").call(this,t[0])];return n})),Qs.set(this,t=>ge(this,void 0,void 0,function*(){var n,s;Se(this,sr,!0,"f");try{const i=yield W(this,Ys,"f").call(this,Object.assign(Object.assign({},t),{domain:(n=t==null?void 0:t.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(s=i.accounts.find(c=>c.address==o))!==null&&s!==void 0?s:{address:o}),{publicKey:fr(o)}),signedMessage:fr(i.sign_in_result.signed_message),signature:fr(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{Se(this,sr,!1,"f")}})),Se(this,ir,e.authorizationCache,"f"),Se(this,Ki,e.appIdentity,"f"),Se(this,ii,e.chains,"f"),Se(this,Hs,e.chainSelector,"f"),Se(this,Vs,e.remoteHostAuthority,"f"),Se(this,js,e.onWalletNotFound,"f"),Se(this,$i,{[Bt.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:W(this,Xs,"f")}},"f")}get version(){return W(this,Nc,"f")}get name(){return W(this,Oc,"f")}get url(){return W(this,Wc,"f")}get icon(){return W(this,Uc,"f")}get chains(){return W(this,ii,"f")}get features(){return Object.assign({[hi.StandardConnect]:{version:"1.0.0",connect:W(this,Fc,"f")},[hi.StandardDisconnect]:{version:"1.0.0",disconnect:W(this,Zs,"f")},[hi.StandardEvents]:{version:"1.0.0",on:W(this,zc,"f")},[Bt.SolanaSignMessage]:{version:"1.0.0",signMessage:W(this,Hc,"f")},[Bt.SolanaSignIn]:{version:"1.0.0",signIn:W(this,jc,"f")}},W(this,$i,"f"))}get accounts(){var e,t;return(t=(e=W(this,Ht,"f"))===null||e===void 0?void 0:e.accounts)!==null&&t!==void 0?t:[]}get connected(){return!!W(this,gn,"f")&&!!W(this,Ht,"f")}get isAuthorized(){return!!W(this,Ht,"f")}get currentAuthorization(){return W(this,Ht,"f")}get cachedAuthorizationResult(){return W(this,ir,"f").get()}}Cr=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,Wc=new WeakMap,Uc=new WeakMap,Ki=new WeakMap,Ht=new WeakMap,ir=new WeakMap,sr=new WeakMap,ri=new WeakMap,ii=new WeakMap,Hs=new WeakMap,$i=new WeakMap,js=new WeakMap,Vs=new WeakMap,gn=new WeakMap,zc=new WeakMap,Fc=new WeakMap,Ys=new WeakMap,qi=new WeakMap,Dc=new WeakMap,Hi=new WeakMap,Zs=new WeakMap,si=new WeakMap,ji=new WeakMap,Js=new WeakMap,Kc=new WeakMap,$c=new WeakMap,Xs=new WeakMap,qc=new WeakMap,Hc=new WeakMap,jc=new WeakMap,Qs=new WeakMap,ni=new WeakSet,Gs=function(e,...t){var n;(n=W(this,Cr,"f")[e])===null||n===void 0||n.forEach(s=>s.apply(null,t))},e0=function(e,t){var n;W(this,Cr,"f")[e]=(n=W(this,Cr,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)};var hv=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},pv=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},eo;function Vu(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new gv(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}let gv=class extends Event{constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),eo.set(this,void 0),hv(this,eo,e,"f")}get detail(){return pv(this,eo,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}};eo=new WeakMap;function yv(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function mv(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function wv(r){yv()?Vu(new r0(r)):mv()&&r.remoteHostAuthority!==void 0&&Vu(new i0(Object.assign(Object.assign({},r),{remoteHostAuthority:r.remoteHostAuthority})))}const bv="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",vv="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class Sv extends Yh{constructor(){super(...arguments),this.contentStyles=_v,this.contentHtml=Ev}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,n;const s=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-error-message"),i=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(s){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":s.innerHTML=bv,i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":s.innerHTML=vv,i&&(i.style.display="none");return}s.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const Ev=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,_v=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function s0(){return ge(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),e=new Sv;r.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}function Av(){return()=>ge(this,void 0,void 0,function*(){s0()})}const ec="SolanaMobileWalletAdapterDefaultAuthorizationCache";function kv(){let r;try{r=window.localStorage}catch{}return{clear(){return ge(this,void 0,void 0,function*(){if(r)try{r.removeItem(ec)}catch{}})},get(){return ge(this,void 0,void 0,function*(){if(r)try{const e=JSON.parse(r.getItem(ec));if(e&&e.accounts){const t=e.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):new ls.PublicKey(n.address).toBytes()}));return Object.assign(Object.assign({},e),{accounts:t})}else return e||void 0}catch{}})},set(e){return ge(this,void 0,void 0,function*(){if(r)try{r.setItem(ec,JSON.stringify(e))}catch{}})}}}function Iv(){return{select(r){return ge(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(ju.SOLANA_MAINNET_CHAIN)?ju.SOLANA_MAINNET_CHAIN:r[0]})}}}Nn.LocalSolanaMobileWalletAdapterWallet=r0;Nn.RemoteSolanaMobileWalletAdapterWallet=i0;Nn.SolanaMobileWalletAdapterWalletName=ql;Nn.createDefaultAuthorizationCache=kv;Nn.createDefaultChainSelector=Iv;Nn.createDefaultWalletNotFoundHandler=Av;Nn.defaultErrorModalWalletNotFoundHandler=s0;Nn.registerMwa=wv;Object.defineProperty(yr,"__esModule",{value:!0});var kt=i1,to=Qf,Ar=eh,xi=Nn;function Pe(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(b){o(b)}}function c(g){try{p(n.throw(g))}catch(b){o(b)}}function p(g){g.done?i(g.value):s(g.value).then(a,c)}p((n=n.apply(r,e||[])).next())})}function ue(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function tn(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t}const Vc="standard:connect",xv="standard:disconnect",Rv="standard:events";function tc(r){return window.btoa(String.fromCharCode.call(null,...r))}function Bv(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var It,Ve,ar,Yn,no,Hn,br,Gc,Yc,o0,Ro,ro,or;const Mv="Mobile Wallet Adapter",Tv=64;function Cv(r){return"version"in r}function Hl(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class a0 extends kt.BaseSignInMessageSignerWalletAdapter{constructor(e,t){super(),It.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Ve.set(this,void 0),ar.set(this,!1),Yn.set(this,Bv()?kt.WalletReadyState.Loadable:kt.WalletReadyState.Unsupported),no.set(this,void 0),Hn.set(this,void 0),br.set(this,void 0),Gc.set(this,n=>Pe(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){ue(this,It,"m",o0).call(this);const s=yield ue(this,no,"f").call(this,n.accounts);s!==ue(this,Hn,"f")&&(tn(this,Hn,s,"f"),tn(this,br,void 0,"f"),this.emit("connect",this.publicKey))}})),tn(this,no,n=>Pe(this,void 0,void 0,function*(){var s;const i=yield t.addressSelector.select(n.map(({publicKey:o})=>tc(o)));return(s=n.find(({publicKey:o})=>tc(o)===i))!==null&&s!==void 0?s:n[0]}),"f"),tn(this,Ve,e,"f"),ue(this,Ve,"f").features[Rv].on("change",ue(this,Gc,"f")),this.name=ue(this,Ve,"f").name,this.icon=ue(this,Ve,"f").icon,this.url=ue(this,Ve,"f").url}get publicKey(){var e;if(!ue(this,br,"f")&&ue(this,Hn,"f"))try{tn(this,br,new to.PublicKey(ue(this,Hn,"f").publicKey),"f")}catch(t){throw new kt.WalletPublicKeyError(t instanceof Error&&(t==null?void 0:t.message)||"Unknown error",t)}return(e=ue(this,br,"f"))!==null&&e!==void 0?e:null}get connected(){return ue(this,Ve,"f").connected}get connecting(){return ue(this,ar,"f")}get readyState(){return ue(this,Yn,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Pe(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Pe(this,void 0,void 0,function*(){ue(this,It,"m",Yc).call(this,!0)})}connect(){return Pe(this,void 0,void 0,function*(){ue(this,It,"m",Yc).call(this)})}performAuthorization(e){return Pe(this,void 0,void 0,function*(){try{const t=yield ue(this,Ve,"f").cachedAuthorizationResult;return t?(yield ue(this,Ve,"f").features[Vc].connect({silent:!0}),t):(e?yield ue(this,Ve,"f").features[Ar.SolanaSignIn].signIn(e):yield ue(this,Ve,"f").features[Vc].connect(),yield yield ue(this,Ve,"f").cachedAuthorizationResult)}catch(t){throw new kt.WalletConnectionError(t instanceof Error&&t.message||"Unknown error",t)}})}disconnect(){return Pe(this,void 0,void 0,function*(){return yield ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){tn(this,ar,!1,"f"),tn(this,br,void 0,"f"),tn(this,Hn,void 0,"f"),yield ue(this,Ve,"f").features[xv].disconnect(),this.emit("disconnect")}))})}signIn(e){return Pe(this,void 0,void 0,function*(){return ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){var t;if(ue(this,Yn,"f")!==kt.WalletReadyState.Installed&&ue(this,Yn,"f")!==kt.WalletReadyState.Loadable)throw new kt.WalletNotReadyError;tn(this,ar,!0,"f");try{const n=yield ue(this,Ve,"f").features[Ar.SolanaSignIn].signIn(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new kt.WalletConnectionError(n instanceof Error&&n.message||"Unknown error",n)}finally{tn(this,ar,!1,"f")}}))})}signMessage(e){return Pe(this,void 0,void 0,function*(){return yield ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){const t=ue(this,It,"m",Ro).call(this);try{return(yield ue(this,Ve,"f").features[Ar.SolanaSignMessage].signMessage({account:t,message:e}))[0].signature}catch(n){throw new kt.WalletSignMessageError(n==null?void 0:n.message,n)}}))})}sendTransaction(e,t,n){return Pe(this,void 0,void 0,function*(){return yield ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){const s=ue(this,It,"m",Ro).call(this);try{let i=function(){let o;switch(t.commitment){case"confirmed":case"finalized":case"processed":o=t.commitment;break;default:o="finalized"}let a;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":a=n.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(Ar.SolanaSignAndSendTransaction in ue(this,Ve,"f").features){const o=Hl(ue(this,Ve,"f").currentAuthorization.chain),[a]=(yield ue(this,Ve,"f").features[Ar.SolanaSignAndSendTransaction].signAndSendTransaction({account:s,transaction:e.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(c=>tc(c.signature));return a}else{const[o]=yield ue(this,It,"m",ro).call(this,[e]);if(Cv(o))return yield t.sendTransaction(o);{const a=o.serialize();return yield t.sendRawTransaction(a,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new kt.WalletSendTransactionError(i==null?void 0:i.message,i)}}))})}signTransaction(e){return Pe(this,void 0,void 0,function*(){return yield ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){const[t]=yield ue(this,It,"m",ro).call(this,[e]);return t}))})}signAllTransactions(e){return Pe(this,void 0,void 0,function*(){return yield ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){return yield ue(this,It,"m",ro).call(this,e)}))})}}Ve=new WeakMap,ar=new WeakMap,Yn=new WeakMap,no=new WeakMap,Hn=new WeakMap,br=new WeakMap,Gc=new WeakMap,It=new WeakSet,Yc=function(e=!1){return Pe(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield ue(this,It,"m",or).call(this,()=>Pe(this,void 0,void 0,function*(){if(ue(this,Yn,"f")!==kt.WalletReadyState.Installed&&ue(this,Yn,"f")!==kt.WalletReadyState.Loadable)throw new kt.WalletNotReadyError;tn(this,ar,!0,"f");try{yield ue(this,Ve,"f").features[Vc].connect({silent:e})}catch(t){throw new kt.WalletConnectionError(t instanceof Error&&t.message||"Unknown error",t)}finally{tn(this,ar,!1,"f")}}))})},o0=function(){ue(this,Yn,"f")!==kt.WalletReadyState.Installed&&this.emit("readyStateChange",tn(this,Yn,kt.WalletReadyState.Installed,"f"))},Ro=function(){if(!ue(this,Ve,"f").isAuthorized||!ue(this,Hn,"f"))throw new kt.WalletNotConnectedError;return ue(this,Hn,"f")},ro=function(e){return Pe(this,void 0,void 0,function*(){const t=ue(this,It,"m",Ro).call(this);try{if(Ar.SolanaSignTransaction in ue(this,Ve,"f").features)return ue(this,Ve,"f").features[Ar.SolanaSignTransaction].signTransaction(...e.map(n=>({account:t,transaction:n.serialize()}))).then(n=>n.map(s=>{const i=s.signedTransaction,a=i[0]*Tv+1;return to.VersionedMessage.deserializeMessageVersion(i.slice(a,i.length))==="legacy"?to.Transaction.from(i):to.VersionedTransaction.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new kt.WalletSignTransactionError(n==null?void 0:n.message,n)}})},or=function(e){return Pe(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})};class c0 extends a0{constructor(e){var t;const n=Hl((t=e.chain)!==null&&t!==void 0?t:e.cluster);super(new xi.LocalSolanaMobileWalletAdapterWallet({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Pe(this,void 0,void 0,function*(){const s=yield e.authorizationResultCache.get();return s&&"chain"in s?s:s?Object.assign(Object.assign({},s),{chain:n}):void 0}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:xi.createDefaultChainSelector(),onWalletNotFound:()=>Pe(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class Lv extends a0{constructor(e){const t=Hl(e.chain);super(new xi.RemoteSolanaMobileWalletAdapterWallet({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Pe(this,void 0,void 0,function*(){const n=yield e.authorizationResultCache.get();return n&&"chain"in n?n:n?Object.assign(Object.assign({},n),{chain:t}):void 0}),clear:e.authorizationResultCache.clear},chains:[t],chainSelector:xi.createDefaultChainSelector(),remoteHostAuthority:e.remoteHostAuthority,onWalletNotFound:()=>Pe(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:t})}}class Pv extends c0{}function Nv(){return{select(r){return Pe(this,void 0,void 0,function*(){return r[0]})}}}function Ov(){return xi.createDefaultAuthorizationCache()}function Wv(r){return Pe(this,void 0,void 0,function*(){return xi.defaultErrorModalWalletNotFoundHandler()})}function Uv(){return Wv}yr.LocalSolanaMobileWalletAdapter=c0;yr.RemoteSolanaMobileWalletAdapter=Lv;var zv=yr.SolanaMobileWalletAdapter=Pv,io=yr.SolanaMobileWalletAdapterWalletName=Mv,Fv=yr.createDefaultAddressSelector=Nv,Dv=yr.createDefaultAuthorizationResultCache=Ov,Kv=yr.createDefaultWalletNotFoundHandler=Uv,$v=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},qv=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},so;function _S(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new Hv(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class Hv extends Event{get detail(){return $v(this,so,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),so.set(this,void 0),qv(this,so,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}so=new WeakMap;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function jv(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function Vv(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<r.length;p++){const g=r.charAt(p),b=g.charCodeAt(0);if(e[b]!==255)throw new TypeError(g+" is ambiguous");e[b]=p}const t=r.length,n=r.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let g=0,b=0,I=0;const m=p.length;for(;I!==m&&p[I]===0;)I++,g++;const R=(m-I)*i+1>>>0,x=new Uint8Array(R);for(;I!==m;){let C=p[I],L=0;for(let U=R-1;(C!==0||L<b)&&U!==-1;U--,L++)C+=256*x[U]>>>0,x[U]=C%t>>>0,C=C/t>>>0;if(C!==0)throw new Error("Non-zero carry");b=L,I++}let k=R-b;for(;k!==R&&x[k]===0;)k++;let M=n.repeat(g);for(;k<R;++k)M+=r.charAt(x[k]);return M}function a(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let g=0,b=0,I=0;for(;p[g]===n;)b++,g++;const m=(p.length-g)*s+1>>>0,R=new Uint8Array(m);for(;g<p.length;){const C=p.charCodeAt(g);if(C>255)return;let L=e[C];if(L===255)return;let U=0;for(let P=m-1;(L!==0||U<I)&&P!==-1;P--,U++)L+=t*R[P]>>>0,R[P]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");I=U,g++}let x=m-I;for(;x!==m&&R[x]===0;)x++;const k=new Uint8Array(b+(m-x));let M=b;for(;x!==m;)k[M++]=R[x++];return k}function c(p){const g=a(p);if(g)return g;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Gv="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Yv=Vv(Gv);var ae=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_t=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Lt,Gt,Lr,Pr,vr,Vi,Bo,xe,Mo,Zc,oo,Jc,es,Xc,Gu,Yu,Zu,Ju;class Zv extends Nl{get name(){return ae(this,xe,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ae(this,xe,"f").icon}get readyState(){return ae(this,Mo,"f")}get publicKey(){return ae(this,Lr,"f")}get connecting(){return ae(this,Pr,"f")}get supportedTransactionVersions(){return ae(this,Bo,"f")}get wallet(){return ae(this,xe,"f")}get standard(){return!0}constructor({wallet:e}){super(),Lt.add(this),Gt.set(this,void 0),Lr.set(this,void 0),Pr.set(this,void 0),vr.set(this,void 0),Vi.set(this,void 0),Bo.set(this,void 0),xe.set(this,void 0),Mo.set(this,typeof window>"u"||typeof document>"u"?Jt.Unsupported:Jt.Installed),Xc.set(this,t=>{if("accounts"in t){const n=ae(this,xe,"f").accounts[0];ae(this,Gt,"f")&&!ae(this,vr,"f")&&n!==ae(this,Gt,"f")&&(n?ae(this,Lt,"m",oo).call(this,n):(this.emit("error",new Hf),ae(this,Lt,"m",Jc).call(this)))}"features"in t&&ae(this,Lt,"m",es).call(this)}),_t(this,xe,e,"f"),_t(this,Gt,null,"f"),_t(this,Lr,null,"f"),_t(this,Pr,!1,"f"),_t(this,vr,!1,"f"),_t(this,Vi,ae(this,xe,"f").features[Qo].on("change",ae(this,Xc,"f")),"f"),ae(this,Lt,"m",es).call(this)}destroy(){_t(this,Gt,null,"f"),_t(this,Lr,null,"f"),_t(this,Pr,!1,"f"),_t(this,vr,!1,"f");const e=ae(this,Vi,"f");e&&(_t(this,Vi,null,"f"),e())}async autoConnect(){return ae(this,Lt,"m",Zc).call(this,{silent:!0})}async connect(){return ae(this,Lt,"m",Zc).call(this)}async disconnect(){if(vo in ae(this,xe,"f").features)try{_t(this,vr,!0,"f"),await ae(this,xe,"f").features[vo].disconnect()}catch(e){this.emit("error",new jf(e==null?void 0:e.message,e))}finally{_t(this,vr,!1,"f")}ae(this,Lt,"m",Jc).call(this)}async sendTransaction(e,t,n={}){try{const s=ae(this,Gt,"f");if(!s)throw new Bn;let i;if(Gn in ae(this,xe,"f").features)if(s.features.includes(Gn))i=Gn;else if(Rt in ae(this,xe,"f").features&&s.features.includes(Rt))i=Rt;else throw new Rr;else if(Rt in ae(this,xe,"f").features){if(!s.features.includes(Rt))throw new Rr;i=Rt}else throw new ci;const o=vh(t.rpcEndpoint);if(!s.chains.includes(o))throw new Br;try{const{signers:a,...c}=n;let p;if(ur(e)?(a!=null&&a.length&&e.sign(a),p=e.serialize()):(e=await this.prepareTransaction(e,t,c),a!=null&&a.length&&e.partialSign(...a),p=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Gn){const[g]=await ae(this,xe,"f").features[Gn].signAndSendTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:Ls(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return Yv.encode(g.signature)}else{const[g]=await ae(this,xe,"f").features[Rt].signTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:Ls(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(g.signedTransaction,{...c,preflightCommitment:Ls(c.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof it?a:new Br(a==null?void 0:a.message,a)}}catch(s){throw this.emit("error",s),s}}}Gt=new WeakMap,Lr=new WeakMap,Pr=new WeakMap,vr=new WeakMap,Vi=new WeakMap,Bo=new WeakMap,xe=new WeakMap,Mo=new WeakMap,Xc=new WeakMap,Lt=new WeakSet,Zc=async function(e){try{if(this.connected||this.connecting)return;if(ae(this,Mo,"f")!==Jt.Installed)throw new bo;if(_t(this,Pr,!0,"f"),!ae(this,xe,"f").accounts.length)try{await ae(this,xe,"f").features[Xo].connect(e)}catch(n){throw new qf(n==null?void 0:n.message,n)}const t=ae(this,xe,"f").accounts[0];if(!t)throw new Rr;ae(this,Lt,"m",oo).call(this,t)}catch(t){throw this.emit("error",t),t}finally{_t(this,Pr,!1,"f")}},oo=function(e){let t;try{t=new X(e.address)}catch(n){throw new Vf(n==null?void 0:n.message,n)}_t(this,Gt,e,"f"),_t(this,Lr,t,"f"),ae(this,Lt,"m",es).call(this),this.emit("connect",t)},Jc=function(){_t(this,Gt,null,"f"),_t(this,Lr,null,"f"),ae(this,Lt,"m",es).call(this),this.emit("disconnect")},es=function(){var t,n;const e=Gn in ae(this,xe,"f").features?ae(this,xe,"f").features[Gn].supportedTransactionVersions:ae(this,xe,"f").features[Rt].supportedTransactionVersions;_t(this,Bo,jv(e,["legacy"])?null:new Set(e),"f"),Rt in ae(this,xe,"f").features&&((t=ae(this,Gt,"f"))!=null&&t.features.includes(Rt))?(this.signTransaction=ae(this,Lt,"m",Gu),this.signAllTransactions=ae(this,Lt,"m",Yu)):(delete this.signTransaction,delete this.signAllTransactions),Yr in ae(this,xe,"f").features&&((n=ae(this,Gt,"f"))!=null&&n.features.includes(Yr))?this.signMessage=ae(this,Lt,"m",Zu):delete this.signMessage,Cs in ae(this,xe,"f").features?this.signIn=ae(this,Lt,"m",Ju):delete this.signIn},Gu=async function(e){try{const t=ae(this,Gt,"f");if(!t)throw new Bn;if(!(Rt in ae(this,xe,"f").features))throw new ci;if(!t.features.includes(Rt))throw new Rr;try{const s=(await ae(this,xe,"f").features[Rt].signTransaction({account:t,transaction:ur(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ur(e)?vi.deserialize(s):ke.from(s)}catch(n){throw n instanceof it?n:new Mr(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},Yu=async function(e){try{const t=ae(this,Gt,"f");if(!t)throw new Bn;if(!(Rt in ae(this,xe,"f").features))throw new ci;if(!t.features.includes(Rt))throw new Rr;try{const n=await ae(this,xe,"f").features[Rt].signTransaction(...e.map(s=>({account:t,transaction:ur(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,i)=>{const o=n[i].signedTransaction;return ur(s)?vi.deserialize(o):ke.from(o)})}catch(n){throw new Mr(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},Zu=async function(e){try{const t=ae(this,Gt,"f");if(!t)throw new Bn;if(!(Yr in ae(this,xe,"f").features))throw new ci;if(!t.features.includes(Yr))throw new Rr;try{return(await ae(this,xe,"f").features[Yr].signMessage({account:t,message:e}))[0].signature}catch(n){throw new Gf(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},Ju=async function(e={}){try{if(!(Cs in ae(this,xe,"f").features))throw new ci;let t;try{[t]=await ae(this,xe,"f").features[Cs].signIn(e)}catch(n){throw new pc(n==null?void 0:n.message,n)}if(!t)throw new pc;return ae(this,Lt,"m",oo).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const Jv=Jf;var Xv=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Qv=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},ao;let nn;const oa=new Set;function eS(r){ts=void 0,oa.add(r)}function tS(r){ts=void 0,oa.delete(r)}const li={};function nS(){if(nn||(nn=Object.freeze({register:Xu,get:rS,on:iS}),typeof window>"u"))return nn;const r=Object.freeze({register:Xu});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new sS(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return nn}function Xu(...r){var e;return r=r.filter(t=>!oa.has(t)),r.length?(r.forEach(t=>eS(t)),(e=li.register)==null||e.forEach(t=>Qc(()=>t(...r))),function(){var n;r.forEach(s=>tS(s)),(n=li.unregister)==null||n.forEach(s=>Qc(()=>s(...r)))}):()=>{}}let ts;function rS(){return ts||(ts=[...oa]),ts}function iS(r,e){var t;return(t=li[r])!=null&&t.push(e)||(li[r]=[e]),function(){var s;li[r]=(s=li[r])==null?void 0:s.filter(i=>e!==i)}}function Qc(r){try{r()}catch(e){console.error(e)}}class sS extends Event{get detail(){return Xv(this,ao,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),ao.set(this,void 0),Qv(this,ao,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ao=new WeakMap;function oS(){if(nn||(nn=nS(),typeof window>"u"))return nn;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),nn;const{register:e}=nn,t=(...n)=>n.forEach(s=>Qc(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),nn}return t(...r),nn}function aS(r){const e=Qu(()=>new Set),{get:t,on:n}=Qu(()=>oS()),[s,i]=fe.useState(()=>ed(t()));fe.useEffect(()=>{const a=[n("register",(...c)=>i(p=>[...p,...ed(c)])),n("unregister",(...c)=>i(p=>p.filter(g=>c.some(b=>b===g.wallet))))];return()=>a.forEach(c=>c())},[n]);const o=cS(s);return fe.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(p=>!a.has(p))).forEach(p=>p.destroy())},[o,s]),fe.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),fe.useMemo(()=>[...s,...r.filter(({name:a})=>s.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,r,e])}function Qu(r){const e=fe.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function cS(r){const e=fe.useRef(void 0);return fe.useEffect(()=>{e.current=r}),e.current}function ed(r){return r.filter(Jv).map(e=>new Zv({wallet:e}))}var pi;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(pi||(pi={}));function lS(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function uS({adapters:r,userAgentString:e}){return r.some(t=>t.name!==io&&t.readyState===Jt.Installed)?pi.DESKTOP_WEB:e&&/android/i.test(e)&&!lS(e)?pi.MOBILE_WEB:pi.DESKTOP_WEB}function dS(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function fS({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const c=fe.useRef(!1),[p,g]=fe.useState(!1),b=fe.useRef(!1),[I,m]=fe.useState(!1),[R,x]=fe.useState(()=>(t==null?void 0:t.publicKey)??null),[k,M]=fe.useState(()=>(t==null?void 0:t.connected)??!1),C=fe.useRef(o);fe.useEffect(()=>(C.current=o,()=>{C.current=void 0}),[o]);const L=fe.useRef((h,y)=>(n.current||(C.current?C.current(h,y):(console.error(h,y),h instanceof bo&&typeof window<"u"&&y&&window.open(y.url,"_blank"))),h)),[U,P]=fe.useState(()=>e.map(h=>({adapter:h,readyState:h.readyState})).filter(({readyState:h})=>h!==Jt.Unsupported));fe.useEffect(()=>{P(y=>e.map((S,_)=>{const T=y[_];return T&&T.adapter===S&&T.readyState===S.readyState?T:{adapter:S,readyState:S.readyState}}).filter(({readyState:S})=>S!==Jt.Unsupported));function h(y){P(S=>{const _=S.findIndex(({adapter:N})=>N===this);if(_===-1)return S;const{adapter:T}=S[_];return[...S.slice(0,_),{adapter:T,readyState:y},...S.slice(_+1)].filter(({readyState:N})=>N!==Jt.Unsupported)})}return e.forEach(y=>y.on("readyStateChange",h,y)),()=>{e.forEach(y=>y.off("readyStateChange",h,y))}},[t,e]);const K=fe.useMemo(()=>U.find(h=>h.adapter===t)??null,[t,U]);fe.useEffect(()=>{if(!t)return;const h=_=>{x(_),c.current=!1,g(!1),M(!0),b.current=!1,m(!1)},y=()=>{n.current||(x(null),c.current=!1,g(!1),M(!1),b.current=!1,m(!1))},S=_=>{L.current(_,t)};return t.on("connect",h),t.on("disconnect",y),t.on("error",S),()=>{t.off("connect",h),t.off("disconnect",y),t.off("error",S),y()}},[t,n]);const H=fe.useRef(!1);fe.useEffect(()=>()=>{H.current=!1},[t]),fe.useEffect(()=>{H.current||c.current||k||!s||!((K==null?void 0:K.readyState)===Jt.Installed||(K==null?void 0:K.readyState)===Jt.Loadable)||(c.current=!0,g(!0),H.current=!0,async function(){try{await s()}catch{i()}finally{g(!1),c.current=!1}}())},[k,s,i,K]);const G=fe.useCallback(async(h,y,S)=>{if(!t)throw L.current(new zu);if(!k)throw L.current(new Bn,t);return await t.sendTransaction(h,y,S)},[t,k]),z=fe.useMemo(()=>t&&"signTransaction"in t?async h=>{if(!k)throw L.current(new Bn,t);return await t.signTransaction(h)}:void 0,[t,k]),Y=fe.useMemo(()=>t&&"signAllTransactions"in t?async h=>{if(!k)throw L.current(new Bn,t);return await t.signAllTransactions(h)}:void 0,[t,k]),q=fe.useMemo(()=>t&&"signMessage"in t?async h=>{if(!k)throw L.current(new Bn,t);return await t.signMessage(h)}:void 0,[t,k]),V=fe.useMemo(()=>t&&"signIn"in t?async h=>await t.signIn(h):void 0,[t]),v=fe.useCallback(async()=>{if(c.current||b.current||K!=null&&K.adapter.connected)return;if(!K)throw L.current(new zu);const{adapter:h,readyState:y}=K;if(!(y===Jt.Installed||y===Jt.Loadable))throw L.current(new bo,h);c.current=!0,g(!0);try{await h.connect()}catch(S){throw i(),S}finally{g(!1),c.current=!1}},[i,K]),l=fe.useCallback(async()=>{if(!b.current&&t){b.current=!0,m(!0);try{await t.disconnect()}finally{m(!1),b.current=!1}}},[t]);return el.createElement(Xf.Provider,{value:{autoConnect:!!s,wallets:U,wallet:K,publicKey:R,connected:k,connecting:p,disconnecting:I,select:a,connect:v,disconnect:l,sendTransaction:G,signTransaction:z,signAllTransactions:Y,signMessage:q,signIn:V}},r)}let nc;function hS(){var r;return nc===void 0&&(nc=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),nc}function td(r){const e=hS();return uS({adapters:r,userAgentString:e})===pi.MOBILE_WEB}function pS(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function AS({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:s}){const{connection:i}=Fw(),o=aS(e),a=fe.useMemo(()=>{if(!td(o))return null;const C=o.find(L=>L.name===io);return C||new zv({addressSelector:Fv(),appIdentity:{uri:pS()},authorizationResultCache:Dv(),cluster:dS(i==null?void 0:i.rpcEndpoint),onWalletNotFound:Kv()})},[o,i==null?void 0:i.rpcEndpoint]),c=fe.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[p,g]=r1(n,null),b=fe.useMemo(()=>c.find(C=>C.name===p)??null,[c,p]),I=fe.useCallback(C=>{p!==C&&(b&&b.name!==io&&b.disconnect(),g(C))},[b,g,p]);fe.useEffect(()=>{if(!b)return;function C(){x.current||g(null)}return b.on("disconnect",C),()=>{b.off("disconnect",C)}},[b,o,g,p]);const m=fe.useRef(!1),R=fe.useMemo(()=>{if(!(!t||!b))return async()=>{(t===!0||await t(b))&&(m.current?await b.connect():await b.autoConnect())}},[t,b]),x=fe.useRef(!1);fe.useEffect(()=>{if(p===io&&td(o)){x.current=!1;return}function C(){x.current=!0}return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[o,p]);const k=fe.useCallback(()=>{b&&I(null)},[b,I]),M=fe.useCallback(C=>{m.current=!0,I(C)},[I]);return el.createElement(fS,{wallets:c,adapter:b,isUnloadingRef:x,onAutoConnectRequest:R,onConnectError:k,onError:s,onSelectWallet:M},r)}export{Ow as A,Zf as B,vS as C,AS as D,$o as E,xp as F,le as G,Ip as H,X as P,Xo as S,ke as T,vi as V,Jt as W,Hf as a,bo as b,qf as c,Rr as d,Vf as e,jf as f,Bn as g,it as h,ur as i,Br as j,Mr as k,Yf as l,Dw as m,Vw as n,Gf as o,mn as p,vo as q,Qo as r,jw as s,Gn as t,SS as u,Rt as v,Yr as w,_S as x,ci as y,gc as z};
